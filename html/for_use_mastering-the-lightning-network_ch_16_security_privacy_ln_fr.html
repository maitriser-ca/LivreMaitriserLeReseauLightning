<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Sécurité et confidentialité du Lightning Network</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
</div>
<div id="content">
<div class="sect1 data-line-2">
<h2 id="security_and_privacy">Sécurité et confidentialité du <span class="keep-together">Lightning Network</span></h2>
<div class="sectionbody">
<div class="paragraph data-line-4">
<p>Dans ce chapitre, nous examinons certains des problèmes les plus importants liés à la sécurité et à la confidentialité du Lightning Network. Tout d&#8217;abord, nous examinerons la confidentialité, ce que ce qu&#8217;elle implique, comment l&#8217;évaluer et certaines choses que vous pouvez faire pour protéger votre propre confidentialité lorsque vous utilisez le Lightning Network. Ensuite, nous explorerons certaines attaques courantes et les techniques pour les mitiger.</p>
</div>
<div class="sect2 data-line-6">
<h3 id="_pourquoi_la_confidentialité_est_elle_importante">Pourquoi la confidentialité est-elle importante ?</h3>
<div class="paragraph data-line-8">
<p>La proposition de valeur fondamentale des cryptomonnaies est une monnaie résistante à la censure. Bitcoin offre aux participants la possibilité de stocker et de transférer leurs actifs sans interférence de la part des gouvernements, des banques ou des entreprises. Le Lightning Network poursuit cette mission.</p>
</div>
<div class="paragraph data-line-10">
<p>Contrairement aux solutions d&#8217;évolutivité triviales telles que les banques Bitcoin dépositaires, le Lightning Network vise à faire évoluer le Bitcoin sans compromettre l&#8217;auto-dépôt, ce qui devrait conduire à une plus grande résistance à la censure dans l&#8217;écosystème Bitcoin. Cependant, le Lightning Network fonctionne selon un modèle de sécurité différent qui introduit de nouveaux défis en matière de sécurité et de confidentialité.</p>
</div>
</div>
<div class="sect2 data-line-12">
<h3 id="_définitions_de_la_confidentialité">Définitions de la confidentialité</h3>
<div class="paragraph data-line-14">
<p>La question : "Est-ce que Lightning est privé ?" n&#8217;a pas de réponse directe. La confidentialité est un sujet complexe, il est souvent difficile de définir précisément ce que nous entendons par confidentialité, surtout si vous n&#8217;êtes pas un chercheur en matière de confidentialité. Heureusement, les chercheurs en confidentialité utilisent des processus pour analyser et évaluer les caractéristiques de confidentialité des systèmes, et nous pouvons aussi les utiliser ! Voyons comment un chercheur en sécurité pourrait chercher à répondre à la question "Est-ce que Lightning est privé ?" en deux étapes générales.</p>
</div>
<div class="paragraph data-line-16">
<p>Tout d&#8217;abord, un chercheur en confidentialité définirait un <em>modèle de sécurité</em> qui spécifie ce dont un adversaire est capable et vise à réaliser.
Ensuite, il décrirait les propriétés pertinentes du système et vérifierait s&#8217;il est conforme à ces exigences.</p>
</div>
</div>
<div class="sect2 data-line-19">
<h3 id="_processus_dévaluation_de_la_confidentialité">Processus d&#8217;évaluation de la confidentialité</h3>
<div class="paragraph data-line-21">
<p>Un modèle de sécurité est basé sur un ensemble <em>d&#8217;hypothèses de sécurité</em> sous-jacentes.
Dans les systèmes cryptographiques, ces hypothèses sont souvent centrées sur les propriétés mathématiques des primitives cryptographiques, telles que les chiffres, les signatures et les fonctions de hachage.
Les hypothèses de sécurité du Lightning Network sont que les signatures ECDSA, la fonction de hachage SHA-256 et les autres fonctions cryptographiques utilisées dans le protocole se comportent dans le cadre de leurs définitions en matière de sécurité.
Par exemple, nous supposons qu&#8217;il est pratiquement impossible de trouver une préimage (et une deuxième préimage) d&#8217;une fonction de hachage.
Cela permet au Lightning Network de s&#8217;appuyer sur le mécanisme des HTLC (qui utilise la préimage d&#8217;une fonction de hachage) pour l&#8217;atomicité des paiements multi-sauts : personne, à l&#8217;exception du destinataire final, ne peut révéler le secret du paiement et résoudre les HTLC.
Nous supposons également un degré de connectivité dans le réseau, à savoir que les canaux Lightning forment un graphe connexe. Par conséquent, il est possible de trouver un chemin de n&#8217;importe quel expéditeur à n&#8217;importe quel destinataire. Enfin, nous supposons que les messages réseau sont propagés sous certains délais.</p>
</div>
<div class="paragraph data-line-28">
<p>Maintenant que nous avons identifié certaines de nos hypothèses sous-jacentes, considérons quelques adversaires possibles.</p>
</div>
<div class="paragraph data-line-30">
<p>Voici quelques modèles possibles d&#8217;adversaires sur le Lightning Network.
Un nœud de transfert "honnête mais curieux" peut observer les montants des paiements, les nœuds immédiatement précédents et suivants, et le graphe des canaux annoncés avec leurs capacités.
Un nœud très bien connecté peut faire la même chose mais dans une plus large mesure.
Par exemple, considérez les développeurs d&#8217;un porte-monnaie populaire qui maintiennent un nœud auquel leurs utilisateurs se connectent par défaut.
Ce nœud serait responsable de l&#8217;acheminement d&#8217;une grande partie des paiements vers et depuis les utilisateurs de ce porte-monnaie.
Que se passe-t-il si plusieurs nœuds sont sous le contrôle d&#8217;adversaires ?
Si deux nœuds en collusion se trouvent sur le même chemin de paiement, ils comprendraient qu&#8217;ils transmettent des HTLC appartenant au même paiement car les HTLC ont le même hachage de paiement.</p>
</div>
<div class="admonitionblock note data-line-39">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-40">
<p>Paiements en plusieurs parties (voir <a href="#mpp">[mpp]</a>) permettent aux utilisateurs de masquer leurs montants de paiement compte tenu de leurs tailles de fractionnements non uniformes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-43">
<p>Quels peuvent être les objectifs d&#8217;un attaquant sur Lightning ?
La sécurité de l&#8217;information est souvent décrite en termes de trois propriétés principales : confidentialité, intégrité et disponibilité.</p>
</div>
<div class="dlist data-line-46">
<dl>
<dt class="hdlist1">Confidentialité</dt>
<dd>
<p>Les informations ne parviennent qu&#8217;aux destinataires prévus.</p>
</dd>
<dt class="hdlist1">Intégrité</dt>
<dd>
<p>Les informations ne sont pas modifiées en transit.</p>
</dd>
<dt class="hdlist1">Disponibilité</dt>
<dd>
<p>Le système fonctionne la plupart du temps.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-50">
<p>Les propriétés importantes du Lightning Network sont principalement centrées sur la confidentialité et la disponibilité. Certaines des propriétés les plus importantes à protéger incluent :</p>
</div>
<div class="ulist data-line-52">
<ul>
<li class="data-line-52">
<p>Seuls l&#8217;expéditeur et le destinataire connaissent le montant du paiement.</p>
</li>
<li class="data-line-53">
<p>Personne ne peut faire le lien entre les émetteurs et les récepteurs.</p>
</li>
<li class="data-line-54">
<p>Un utilisateur honnête ne peut pas être empêché d&#8217;envoyer et de recevoir des paiements.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-56">
<p>Pour chaque objectif de confidentialité et modèle de sécurité, il existe une certaine probabilité qu&#8217;un attaquant parvienne à ses fins.
Cette probabilité dépend de divers facteurs, tels que la taille et la structure du réseau.
À toutes choses égales par ailleurs, il est généralement plus facile d&#8217;attaquer avec succès un petit réseau qu&#8217;un grand.
De même, plus le réseau est centralisé, plus un attaquant peut être efficace si les nœuds "centraux" sont sous son contrôle.
Bien entendu, le terme "centralisation" doit être défini avec précision pour pouvoir construire des modèles de sécurité sur cette base, et il existe de nombreuses définitions possibles du degré de centralisation d&#8217;un réseau.
Enfin, en tant que réseau de paiement, le Lightning Network dépend des stimuli économiques.
La taille et la structure des frais affectent l&#8217;algorithme de routage et peuvent donc soit aider l&#8217;attaquant en transférant la plupart des paiements via leurs nœuds, soit empêcher que cela se produise.</p>
</div>
</div>
<div class="sect2 data-line-65">
<h3 id="_ensemble_danonymat">Ensemble d&#8217;anonymat</h3>
<div class="paragraph data-line-67">
<p>Que signifie désanonymiser quelqu&#8217;un ?
En termes simples, la désanonymisation implique de lier une action à l&#8217;identité réelle d&#8217;une personne, comme son nom ou son adresse physique.
Dans la recherche sur la confidentialité, la notion de désanonymisation est plus nuancée.
Premièrement, nous ne parlons pas nécessairement de noms et d&#8217;adresses.
Découvrir l&#8217;adresse IP ou le numéro de téléphone de quelqu&#8217;un peut également être considéré comme une désanonymisation.
Une information qui permet de lier l&#8217;action d&#8217;un utilisateur à ses actions précédentes est appelée une <em>identité</em>.
Deuxièmement, la désanonymisation n&#8217;est pas binaire ; un utilisateur n&#8217;est ni totalement anonyme ni complètement désanonymisé.
Au lieu de cela, la recherche sur la confidentialité examine l&#8217;anonymat par rapport à l&#8217;ensemble d&#8217;anonymat.</p>
</div>
<div class="paragraph data-line-76">
<p><em>L&#8217;ensemble d&#8217;anonymat</em> est une notion centrale dans la recherche sur la confidentialité.
Cela fait référence à l&#8217;ensemble des identités telles que, du point de vue d&#8217;un attaquant, une action donnée pourrait correspondre à n&#8217;importe qui dans l&#8217;ensemble.
Prenons un exemple concret.
Imaginez que vous rencontrez une personne dans une rue de la ville.
Quel est leur ensemble d&#8217;anonymat de votre point de vue ?
Si vous ne les connaissez pas personnellement, et sans aucune information supplémentaire, leur anonymat est à peu près égal à la population de la ville, y compris les voyageurs.
Si vous tenez également compte de leur apparence, vous pourrez peut-être estimer approximativement leur âge et exclure les habitants de la ville qui sont manifestement plus âgés ou plus jeunes que la personne en question de l&#8217;ensemble d&#8217;anonymat.
De plus, si vous remarquez que la personne entre dans les bureaux de l&#8217;Entreprise X à l&#8217;aide d&#8217;un badge électronique, l&#8217;ensemble d&#8217;anonymat défini se réduit au nombre d&#8217;employés et de visiteurs <span class="keep-together">de l'Entreprise</span> X.
Enfin, vous remarquerez peut-être le numéro d&#8217;immatriculation de la voiture qu&#8217;ils ont utilisée pour arriver sur les lieux.
Si vous êtes un observateur occasionnel, cela ne vous donne pas grand-chose.
Cependant, si vous êtes un fonctionnaire de la ville et que vous avez accès à la base de données qui associe les numéros de plaque d&#8217;immatriculation aux noms, vous pouvez limiter l&#8217;anonymat à quelques personnes : le propriétaire de la voiture et tous les amis proches et parents qui ont pu emprunter la voiture.</p>
</div>
<div class="paragraph data-line-88">
<p>Cet exemple illustre quelques points importants.
Tout d&#8217;abord, chaque élément d&#8217;information peut rapprocher l&#8217;adversaire de son objectif.
Il n&#8217;est peut-être pas nécessaire de réduire l&#8217;ensemble d&#8217;anonymat à une taille d&#8217;un individu.
Par exemple, si l&#8217;adversaire planifie une attaque par déni de service ("Denial of Service" ou "DoS" en anglais) ciblée et peut arrêter 100 serveurs, l&#8217;ensemble d&#8217;anonymat de 100 est suffisant.
Deuxièmement, l&#8217;adversaire peut croiser des informations provenant de différentes sources.
Même si une fuite de confidentialité semble relativement bénigne, nous ne savons jamais ce qu&#8217;elle peut accomplir en combinaison avec d&#8217;autres sources de données.
Enfin, en particulier dans les paramètres cryptographiques, l&#8217;attaquant a toujours le "dernier recours" d&#8217;une recherche par force brute.
Les primitives cryptographiques sont conçues de manière à ce qu&#8217;il soit pratiquement impossible de deviner un secret tel qu&#8217;une clé privée.
Néanmoins, chaque information rapproche l&#8217;adversaire de ce but et, à un moment donné, celui-ci devient atteignable.</p>
</div>
<div class="paragraph data-line-98">
<p>Pour ce qui est de Lightning, la désanonymisation signifie généralement établir une correspondance entre les paiements et les utilisateurs identifiés par des ID de nœud.
Chaque paiement peut se voir attribuer un ensemble d&#8217;anonymat d&#8217;expéditeur et un ensemble d&#8217;anonymat de destinataire.
Idéalement, l&#8217;ensemble d&#8217;anonymat est composé de tous les utilisateurs du réseau.
Cela garantit que l&#8217;attaquant n&#8217;a aucune information.
Cependant, le réseau réel laisse échapper des informations qui permettent à un attaquant de restreindre la recherche.
Plus l&#8217;ensemble d&#8217;anonymat est petit, plus les chances d&#8217;une désanonymisation réussie sont élevées.</p>
</div>
</div>
<div class="sect2 pagebreak-before less_space data-line-106">
<h3 id="_différences_entre_lightning_network_et_bitcoin_en_termes_de_confidentialité">Différences entre Lightning Network et Bitcoin en termes de confidentialité</h3>
<div class="paragraph data-line-108">
<p>S&#8217;il est vrai que les transactions sur le réseau Bitcoin ne s&#8217;associent pas les identités du monde réel avec des adresses Bitcoin, toutes les transactions sont diffusées en clair et peuvent être analysées.
Plusieurs sociétés ont été créées pour désanonymiser les utilisateurs de Bitcoin et d&#8217;autres cryptomonnaies.</p>
</div>
<div class="paragraph data-line-111">
<p>À première vue, Lightning offre une meilleure confidentialité que Bitcoin car les paiements Lightning ne sont pas diffusés sur l&#8217;ensemble du réseau.
Bien que cela améliore la base de confidentialité, d&#8217;autres propriétés du protocole Lightning peuvent rendre les paiements anonymes plus difficiles.
Par exemple, les paiements plus importants peuvent avoir moins d&#8217;options de routage.
Cela peut permettre à un adversaire qui contrôle des nœuds bien capitalisés d&#8217;acheminer la plupart des paiements importants et de découvrir les montants des paiements et probablement d&#8217;autres détails. Au fil du temps, à mesure que le Lightning Network se développe, cela peut devenir moins problématique.</p>
</div>
<div class="paragraph data-line-116">
<p>Une autre différence pertinente entre Lightning et Bitcoin est que les nœuds Lightning conservent une identité permanente, contrairement aux nœuds Bitcoin.
Un utilisateur sophistiqué de Bitcoin peut facilement changer de nœud utilisé pour recevoir des données de blockchain et diffuser des transactions.
Un utilisateur Lightning, au contraire, envoie et reçoit des paiements via les nœuds qu&#8217;il a utilisés pour ouvrir ses canaux de paiement.
De plus, le protocole Lightning suppose que les nœuds de routage annoncent leur adresse IP en plus de leur ID de nœud.
Cela crée un lien permanent entre les ID de nœud et les adresses IP, ce qui peut être dangereux, étant donné qu&#8217;une adresse IP est souvent une étape intermédiaire dans les attaques sur l&#8217;anonymat liées à l&#8217;emplacement physique de l&#8217;utilisateur et, dans la plupart des cas, à leur identité réelle.
Il est possible d&#8217;utiliser Lightning sur Tor, mais de nombreux nœuds n&#8217;utilisent pas cette fonctionnalité, comme on peut le voir sur <a href="https://1ml.com/statistics" data-href="https://1ml.com/statistics">statistiques collectées depuis les annonces de nœuds</a>.</p>
</div>
<div class="paragraph data-line-123">
<p>Un utilisateur Lightning, lors de l&#8217;envoi d&#8217;un paiement, a ses voisins dans son ensemble d&#8217;anonymat.
Plus précisément, un nœud de routage ne connaît que les nœuds immédiatement précédents et suivants.
Le nœud de routage ne sait pas si ses voisins immédiats dans la route de paiement sont l&#8217;expéditeur ou le destinataire final.
Par conséquent, l&#8217;ensemble d&#8217;anonymat d&#8217;un nœud dans Lightning est à peu près égal à ses voisins (voir <a href="#anonymity_set">L&#8217;ensemble d&#8217;anonymat d&#8217;Alice et Bob est constitué de leurs voisins</a>).</p>
</div>
<div id="anonymity_set" class="imageblock data-line-130">
<div class="content">
<img src="images/mtln_1601.png" alt="L&#8217;ensemble d&#8217;anonymat d&#8217;Alice et Bob est constitué de leurs voisins">
</div>
<div class="title">Figure 1. L&#8217;ensemble d&#8217;anonymat d&#8217;Alice et Bob est constitué de leurs voisins</div>
</div>
<div class="paragraph data-line-132">
<p>Une logique similaire s&#8217;applique aux destinataires des paiements.
De nombreux utilisateurs n&#8217;ouvrent qu&#8217;une poignée de canaux de paiement, limitant ainsi leurs ensembles d&#8217;anonymat.
De plus, dans Lightning, l&#8217;ensemble d&#8217;anonymat est statique ou du moins change lentement.
En revanche, on peut obtenir des ensembles d&#8217;anonymat beaucoup plus importants dans les transactions CoinJoin sur la chaîne.
Les transactions CoinJoin avec des ensembles d&#8217;anonymat supérieurs à 50 sont assez fréquentes.
En règle générale, les ensembles d&#8217;anonymat dans une transaction CoinJoin correspondent à un ensemble d&#8217;utilisateurs changeant dynamiquement.</p>
</div>
<div class="paragraph data-line-139">
<p>Enfin, les utilisateurs de Lightning peuvent également se voir refuser le service, voir leurs canaux bloqués ou épuisés par un attaquant.
L&#8217;acheminement des paiements nécessite du capital — une ressource rare ! — pouvant être temporairement bloqué dans les HTLC le long de la route.
Un attaquant peut envoyer de nombreux paiements mais ne pas les finaliser, occupant le capital des utilisateurs honnêtes pendant de longues périodes.
Ce vecteur d&#8217;attaque n&#8217;est pas présent (ou du moins pas aussi évident) dans Bitcoin.</p>
</div>
<div class="paragraph data-line-144">
<p>En résumé, si certains aspects de l&#8217;architecture du Lightning Network suggèrent qu&#8217;il s&#8217;agit d&#8217;un pas en avant en termes de confidentialité par rapport au Bitcoin, d&#8217;autres propriétés du protocole peuvent faciliter les attaques contre la confidentialité. Des recherches approfondies sont nécessaires pour évaluer les garanties de confidentialité fournies par le Lightning Network et améliorer la situation.</p>
</div>
<div class="paragraph data-line-146">
<p>Les questions abordées dans cette partie du chapitre résument les recherches disponibles à la mi-2021. Cependant, ce domaine de recherche et de développement est en pleine expansion. Nous sommes heureux d&#8217;annoncer que les auteurs ont connaissance de plusieurs équipes de recherche travaillant actuellement sur la confidentialité de Lightning.</p>
</div>
<div class="paragraph data-line-148">
<p>Passons maintenant en revue certaines des attaques contre la confidentialité de LN qui ont été décrites dans la littérature académique.</p>
</div>
</div>
<div class="sect2 data-line-151">
<h3 id="_attaques_contre_lightning">Attaques contre Lightning</h3>
<div class="paragraph data-line-153">
<p>Des recherches récentes décrivent différentes manières dont la sécurité et la confidentialité du Lightning Network peuvent être compromises.</p>
</div>
<div class="sect3 data-line-155">
<h4 id="_observation_des_montants_de_paiements">Observation des montants de paiements</h4>
<div class="paragraph data-line-157">
<p>L&#8217;un des objectifs d&#8217;un système de paiement préservant la confidentialité est de cacher le montant du paiement aux parties non impliquées.
Le Lightning Network est une amélioration par rapport à la couche 1 à cet égard.
Alors que les transactions Bitcoin sont diffusées en texte clair et peuvent être observées par n&#8217;importe qui, les paiements Lightning ne transitent que par quelques nœuds le long du chemin de paiement.
Cependant, les nœuds intermédiaires voient le montant du paiement, bien que ce montant puisse ne pas correspondre au montant total réel du paiement (voir <a href="#mpp">[mpp]</a>).
Ceci est nécessaire pour créer un nouveau HTLC à chaque saut.
La disponibilité des montants de paiement pour les nœuds intermédiaires ne présente pas une menace immédiate.
Cependant, un nœud intermédiaire <em>honnête mais curieux</em> peut les utiliser dans le cadre d&#8217;une attaque plus importante.</p>
</div>
</div>
<div class="sect3 data-line-166">
<h4 id="_lier_les_expéditeurs_et_les_destinataires">Lier les expéditeurs et les destinataires</h4>
<div class="paragraph data-line-168">
<p>Un attaquant pourrait être intéressé à connaître l&#8217;expéditeur et/ou le destinataire d&#8217;un paiement pour révéler certaines relations économiques.
Cette violation de la confidentialité pourrait nuire à la résistance à la censure, car un nœud intermédiaire pourrait censurer les paiements vers ou en provenance de certains destinataires ou expéditeurs.
Idéalement, la liaison des expéditeurs aux destinataires ne devrait pas être possible pour quiconque d&#8217;autre que l&#8217;expéditeur et le destinataire.</p>
</div>
<div class="paragraph data-line-172">
<p>Dans les sections suivantes, nous considérerons deux types d&#8217;adversaires : l&#8217;adversaire hors-chemin et l&#8217;adversaire sur le chemin.
Un adversaire hors chemin essaie d&#8217;évaluer l&#8217;expéditeur et le destinataire d&#8217;un paiement sans participer au processus d&#8217;acheminement du paiement.
Un adversaire sur le chemin peut exploiter toutes les informations qu&#8217;il pourrait obtenir en acheminant le paiement en question.</p>
</div>
<div class="paragraph data-line-176">
<p>Premièrement, considérons <em>l&#8217;adversaire hors-chemin</em>.
Dans la première étape de ce scénario d&#8217;attaque, un puissant adversaire hors chemin déduit les soldes individuels de chaque canal de paiement via un sondage (décrit dans une section ultérieure) et forme un instantané du réseau au temps <em>t<sub>1</sub></em>. Par souci de simplicité, faisons en sorte que <em>t<sub>1</sub></em> soit égal à 12:05.
Il sonde ensuite à nouveau le réseau un peu plus tard à l&#8217;heure <em>t<sub>2</sub></em>, que nous définissons à 12h10. L&#8217;attaquant comparerait alors les instantanés à 12h10 et 12h05 et utiliserait les différences entre les deux instantanés pour déduire des informations sur les paiements qui ont eu lieu en examinant les chemins qui ont changé.
Dans le cas le plus simple, s&#8217;il n&#8217;y avait qu&#8217;un seul paiement entre 12h10 et 12h05, l&#8217;adversaire observerait un chemin unique où les soldes ont changé des mêmes montants.
Ainsi, l&#8217;adversaire apprend presque tout sur ce paiement : l&#8217;expéditeur, le destinataire et le montant.
Si plusieurs voies de paiement se chevauchent, l&#8217;adversaire doit appliquer des heuristiques pour identifier ce chevauchement et séparer les paiements.</p>
</div>
<div class="paragraph data-line-183">
<p>Maintenant, nous tournons notre attention vers un <em>adversaire sur le chemin</em>.
Un tel adversaire pourrait sembler complexe.
Cependant, en juin 2020, les chercheurs ont remarqué que le nœud le plus central <a href="https://arxiv.org/pdf/2006.12143.pdf" data-href="https://arxiv.org/pdf/2006.12143.pdf">observait près de 50% de tous les paiements LN</a>, tandis que les quatre nœuds les plus centraux <a href="https://arxiv.org/pdf/1909.06890.pdf" data-href="https://arxiv.org/pdf/1909.06890.pdf">observaient une moyenne de 72 % des paiements</a>.
Ces résultats soulignent la pertinence du modèle d&#8217;attaquant sur le chemin.
Même si les intermédiaires d&#8217;un chemin de paiement n&#8217;apprennent que leur successeur et prédécesseur, il existe plusieurs fuites qu&#8217;un intermédiaire malveillant ou honnête mais curieux pourrait utiliser pour déduire l&#8217;expéditeur et le destinataire.</p>
</div>
<div class="paragraph data-line-189">
<p>L&#8217;adversaire sur le chemin peut observer le montant de tout paiement acheminé ainsi que les deltas de timelocks (voir <a href="#onion_routing">[onion_routing]</a>).
Par conséquent, l&#8217;adversaire peut exclure tous les nœuds de l&#8217;ensemble d&#8217;anonymat de l&#8217;expéditeur ou du destinataire avec des capacités inférieures au montant routé.
Par conséquent, nous observons un compromis réalisé entre la confidentialité et les montants des paiements.
En règle générale, plus le montant des paiements sont grands, plus les ensembles d&#8217;anonymat sont petits.
Nous notons que cette fuite pourrait être minimisée avec des paiements en plusieurs parties ou avec des canaux de paiement de grande capacité.
De même, les canaux de paiement avec de petits deltas de timelocks pourraient être exclus d&#8217;un chemin de paiement.
Plus précisément, un canal de paiement ne peut pas concerner un paiement si le temps restant pour lequel le paiement pourrait être bloqué est supérieur à ce que le nœud de transfert serait prêt à accepter.
Cette fuite pourrait être évitée en adhérant à ce que l&#8217;on appelle les routes "de l&#8217;ombre" ("shadow routes" en anglais).</p>
</div>
<div class="paragraph data-line-198">
<p>L&#8217;analyse du timing est l&#8217;une des fuites les plus subtiles et pourtant les plus puissantes qu&#8217;un adversaire sur le chemin peut favoriser.
Un adversaire sur le chemin peut conserver un journal pour chaque paiement acheminé, ainsi que le temps nécessaire à un nœud pour répondre à une requête de HTLC.
Avant de lancer l&#8217;attaque, l&#8217;attaquant apprend les caractéristiques de latence de chaque nœud dans le Lightning Network en leur envoyant des requêtes.
Naturellement, cela peut aider à établir la position précise de l&#8217;adversaire dans le chemin de paiement.
De plus, comme cela a été récemment expliqué, un attaquant peut déterminer avec succès l&#8217;expéditeur et le destinataire d&#8217;un paiement à partir d&#8217;un ensemble d&#8217;expéditeurs et de destinataires possibles en utilisant des estimateurs basés sur le timing.</p>
</div>
<div class="paragraph data-line-204">
<p>Enfin, il est important de reconnaître qu&#8217;il existe probablement des fuites inconnues ou non étudiées qui pourraient faciliter les tentatives de désanonymisation. Par exemple, étant donné que différents porte-monnaie Lightning appliquent différents algorithmes de routage, simplement connaître l&#8217;algorithme de routage appliqué pourrait aider à exclure certains nœuds comme expéditeur et/ou destinataire d&#8217;un paiement.</p>
</div>
</div>
<div class="sect3 data-line-207">
<h4 id="_révéler_les_soldes_des_canaux_sondage">Révéler les soldes des canaux (sondage)</h4>
<div class="paragraph data-line-209">
<p>Les soldes des canaux Lightning sont censés être cachés pour des raisons de confidentialité et d&#8217;efficacité.
Un nœud Lightning ne connaît que les soldes de ses canaux adjacents.
Le protocole ne fournit aucun moyen standard d&#8217;interroger le solde d&#8217;un canal distant.</p>
</div>
<div class="paragraph data-line-213">
<p>Cependant, un attaquant peut révéler le solde d&#8217;un canal distant lors d&#8217;une <em>attaque par sondage</em>.
En sécurité de l&#8217;information, le sondage fait référence à la technique consistant à envoyer des requêtes à un système ciblé et à tirer des conclusions sur son état privé en fonction des réponses reçues.</p>
</div>
<div class="paragraph data-line-216">
<p>Les canaux Lightning sont susceptibles au sondage.
Rappelez-vous qu&#8217;un paiement Lightning standard commence par la création par le destinataire d&#8217;un secret de paiement aléatoire et l&#8217;envoi de son hachage à l&#8217;expéditeur.
Notez que pour les nœuds intermédiaires, tous les hachages semblent aléatoires.
Il n&#8217;y a aucun moyen de savoir si un hachage correspond à un vrai secret ou s&#8217;il a été généré aléatoirement.</p>
</div>
<div class="paragraph data-line-221">
<p>L&#8217;attaque par sondage se déroule comme suit.
Supposons que l&#8217;attaquant Mallory veuille révéler le solde d&#8217;Alice sur un canal publique entre Alice et Bob.
Supposons que la capacité totale de ce canal soit de 1 million de satoshis.
Le solde d&#8217;Alice pourrait aller de zéro à 1 million de satoshis (pour être précis, l&#8217;estimation est un peu plus petite en raison de la réserve de canal, mais nous ne la comptabilisons pas ici pour plus de simplicité).
Mallory ouvre un canal avec Alice pour 1 million de satoshis et envoie 500 000 satoshis à Bob via Alice en utilisant un <em>nombre aléatoire</em> comme hachage de paiement.
Bien entendu, ce nombre ne correspond à aucun secret de paiement connu.
Par conséquent, le paiement échouera.
La question est : comment échouera-t-il exactement ?</p>
</div>
<div class="paragraph data-line-230">
<p>Il existe deux scénarios.
Si Alice a plus de 500 000 satoshis de son côté du canal vers Bob, elle transmet le paiement.
Bob décrypte l&#8217;oignon de paiement et se rend compte que le paiement lui est destiné.
Il consulte son magasin local de secrets de paiement et recherche la préimage qui correspond au hachage de paiement, mais n&#8217;en trouve pas.
Suivant le protocole, Bob renvoie l&#8217;erreur "hachage de paiement inconnu" à Alice, qui la relaie à Mallory.
En conséquence, Mallory sait que le paiement <em>aurait pu réussir</em> si le hachage de paiement avait été réel.
Par conséquent, Mallory peut mettre à jour son estimation du solde d&#8217;Alice de "entre zéro et 1 million" à "entre 500 000 et 1 million".
Un autre scénario se produit si le solde d&#8217;Alice est inférieur à 500 000 satoshis.
Dans ce cas, Alice est incapable de transférer le paiement et renvoie l&#8217;erreur "solde insuffisant" à Mallory.
Mallory met à jour son estimation de "entre zéro et 1 million" à "entre zéro et 500 000".</p>
</div>
<div class="paragraph data-line-241">
<p>Notez que dans tous les cas, l&#8217;estimation de Mallory devient deux fois plus précise après un seul sondage !
Elle peut continuer à sonder, en choisissant la quantité de sondage suivante de manière à diviser par deux l&#8217;intervalle d&#8217;estimation actuel.
Cette technique de recherche bien connue est appelée <em>recherche binaire</em>.
Avec la recherche binaire, le nombre de sondages est <em>logarithmique</em> dans la précision souhaitée.
Par exemple, pour obtenir le solde d&#8217;Alice dans un canal de 1 million de satoshis jusqu&#8217;à un seul satoshi, Mallory n&#8217;aurait qu&#8217;à effectuer log<sub>2</sub> (1 000 000) &asymp; 20 sondages.
Si un sondage prend 3 secondes, un canal peut être précisément sondé en seulement une minute environ !</p>
</div>
<div class="paragraph data-line-248">
<p>Le sondage des canaux peut être rendu encore plus efficace.
Dans sa variante la plus simple, Mallory se connecte directement au canal qu&#8217;elle souhaite sonder.
Est-il possible de sonder un canal sans ouvrir un canal à l&#8217;une de ses extrémités ?
Imaginez que Mallory veuille maintenant sonder un canal entre Bob et Charlie mais ne veuille pas ouvrir un autre canal, ce qui nécessiterait de payer des frais sur la chaîne et d&#8217;attendre les confirmations des transactions de financement.
Au lieu de cela, Mallory réutilise son canal existant vers Alice et envoie un sondage le long de la route Mallory &#8594; Alice &#8594; Bob &#8594; Charlie.
Mallory peut interpréter l&#8217;erreur "hachage de paiement inconnu" de la même manière qu&#8217;auparavant : la sonde a atteint la destination ; par conséquent, tous les canaux le long de la route ont des soldes suffisants pour le transmettre.
Mais que se passe-t-il si Mallory reçoit l&#8217;erreur "solde insuffisant" ?
Cela signifie-t-il que le solde est insuffisant entre Alice et Bob ou entre Bob et Charlie ?</p>
</div>
<div class="paragraph data-line-257">
<p>Dans le protocole Lightning actuel, les messages d&#8217;erreur signalent non seulement <em>quelle</em> erreur s&#8217;est produite, mais également <em>où</em> elle s&#8217;est produite.
Ainsi, avec une gestion des erreurs plus soignée, Mallory sait désormais quel canal a échoué.
S&#8217;il s&#8217;agit du canal cible, elle met à jour ses estimations ; sinon, elle choisit une autre route vers le canal cible.
Elle obtient même des informations <em>supplémentaires</em> sur les soldes des canaux intermédiaires, en plus de celui du canal cible.</p>
</div>
<div class="paragraph data-line-262">
<p>L&#8217;attaque par sondage peut en plus être utilisée pour relier les expéditeurs et les destinataires, comme décrit dans la section précédente.</p>
</div>
<div class="paragraph data-line-264">
<p>À ce stade, vous pouvez vous demander : pourquoi le Lightning Network fait-il un si mauvais travail pour protéger les données privées de ses utilisateurs ?
Ne serait-il pas préférable de ne pas révéler à l&#8217;expéditeur pourquoi et où le paiement a échoué ?
En effet, cela pourrait être une contre-mesure potentielle, mais cela présente des inconvénients importants.
Lightning doit trouver un équilibre délicat entre confidentialité et efficacité.
N&#8217;oubliez pas que les nœuds réguliers ne connaissent pas la répartition des soldes dans les canaux distants.
Par conséquent, les paiements peuvent échouer (et échouent souvent) en raison d&#8217;un solde insuffisant auprès d&#8217;un saut intermédiaire.
Les messages d&#8217;erreur permettent à l&#8217;expéditeur d&#8217;exclure le canal défaillant de la considération lors de la construction d&#8217;une autre route.
Un porte-monnaie Lightning populaire effectue même des sondages en interne pour vérifier si un itinéraire construit peut vraiment gérer un paiement.</p>
</div>
<div class="paragraph data-line-273">
<p>Il existe d&#8217;autres contre-mesures potentielles contre le sondage de canaux.
Premièrement, il est difficile pour un attaquant de cibler des canaux non annoncés.
Deuxièmement, les nœuds qui implémentent le routage juste-à-temps ("Just-in-Time" ou "JIT" en anglais) peuvent être moins sujets à cette attaque.
Enfin, comme les paiements en plusieurs parties atténuent le problème de capacité insuffisante, les développeurs de protocoles peuvent envisager de masquer certains des détails de l&#8217;erreur sans nuire à l&#8217;efficacité.</p>
</div>
</div>
<div class="sect3 data-line-279">
<h4 id="denial_of_service">Déni de service</h4>
<div class="paragraph data-line-281">
<p>Lorsque des ressources sont mises à la disposition du public, il existe un risque que des attaquants tentent de rendre cette ressource indisponible en exécutant une attaque par déni de service ("Denial of Service" ou "DoS" en anglais).
Généralement, cela est réalisé par l&#8217;attaquant en bombardant une ressource avec des requêtes qui sont indiscernables de requêtes légitimes.
Les attaques entraînent rarement des pertes financières pour la cible, mis à part le coût d&#8217;opportunité de leur service et visent simplement à léser la cible.</p>
</div>
<div class="paragraph data-line-285">
<p>Les moyens typiques pour mitiger des attaques DoS nécessitent une authentification pour les demandes afin de séparer les utilisateurs légitimes des utilisateurs malveillants. Ces moyens pour mitiger entraînent un coût insignifiant pour les utilisateurs réguliers, mais ils agiront comme un moyen de dissuasion suffisant pour un attaquant lançant des requêtes à grande échelle.
Des mesures anti-déni de service peuvent être observées partout sur Internet — les sites Web appliquent des limites de débit pour s&#8217;assurer qu&#8217;aucun utilisateur ne puisse consommer toute l&#8217;attention de leur serveur, les sites de critiques de films exigent une authentification de connexion pour garder les membres en colère de r/prequelmemes (groupe Reddit) à distance, et les services de données vendent des clés API pour limiter le nombre de requêtes.</p>
</div>
<div class="sect4 data-line-288">
<h5 id="_dos_sur_bitcoin">DoS sur Bitcoin</h5>
<div class="paragraph data-line-290">
<p>Dans Bitcoin, la bande passante utilisée par les nœuds pour relayer les transactions et l&#8217;espace dont ils disposent sur le réseau sous la forme de leur mempool sont des ressources accessibles au public.
Tout nœud du réseau peut consommer de la bande passante et de l&#8217;espace mempool en envoyant une transaction valide.
Si cette transaction est minée dans un bloc valide, ils paieront des frais de transaction, ce qui ajoute un coût à l&#8217;utilisation de ces ressources réseau partagées.</p>
</div>
<div class="paragraph data-line-294">
<p>Dans le passé, le réseau Bitcoin a fait face à une tentative d&#8217;attaque DoS où les attaquants ont spammé le réseau avec des transactions à faible coût.
Beaucoup de ces transactions n&#8217;ont pas été sélectionnées par les mineurs en raison de leurs faibles frais de transaction, de sorte que les attaquants étaient capables de consommer les ressources du réseau sans payer de frais.
Pour résoudre ce problème, des frais minimums de relayage de transaction qui définissent un seuil de frais dont les nœuds ont besoin pour propager les transactions ont été définis.
Cette mesure garantit en grande partie que les transactions qui consomment des ressources réseau finiront par payer leurs frais de chaîne.
Les frais de relayage minimum sont acceptables pour les utilisateurs réguliers, mais nuiraient financièrement aux attaquants s&#8217;ils tentaient de spammer le réseau.
Bien que certaines transactions puissent ne pas se retrouver dans des blocs valides dans un contexte de frais élevés, ces mesures ont été largement efficaces pour décourager ce type de spam.</p>
</div>
</div>
<div class="sect4 data-line-301">
<h5 id="_dos_sur_lightning">DoS sur Lightning</h5>
<div class="paragraph data-line-303">
<p>Comme pour Bitcoin, le Lightning Network facture des frais pour l&#8217;utilisation de ses ressources publiques, mais dans ce cas, les ressources sont des canaux publics et les frais se présentent sous la forme de frais de routage.
La possibilité d&#8217;acheminer les paiements via des nœuds en échange de frais offre au réseau un avantage d&#8217;évolutivité important — les nœuds qui ne sont pas directement connectés peuvent toujours effectuer des transactions — mais cela se fait au prix de l&#8217;exposition d&#8217;une ressource publique qui doit être protégée contre les attaques DoS.</p>
</div>
<div class="paragraph data-line-306">
<p>Lorsqu&#8217;un nœud Lightning transfère un paiement en votre nom, il utilise les données et la bande passante de paiement pour mettre à jour sa transaction d&#8217;engagement, et le montant du paiement est réservé dans le solde de son canal jusqu&#8217;à ce qu&#8217;il soit réglé ou qu&#8217;il ait échoué.
Dans les paiements réussis, cela est acceptable car le nœud finit par recevoir le paiement de ses frais.
Les échecs de paiement n&#8217;entraînent pas de frais dans le protocole actuel.
Cela permet aux nœuds d&#8217;acheminer sans frais les paiements échoués via n&#8217;importe quel canal.
C&#8217;est idéal pour les utilisateurs légitimes, qui ne voudraient pas payer pour les tentatives infructueuses, mais cela permet également aux attaquants de consommer sans frais les ressources des nœuds, tout comme les transactions à faible coût sur Bitcoin qui ne finissent jamais par payer des frais de minage.</p>
</div>
<div class="paragraph data-line-312">
<p>Au moment de la rédaction, une discussion est <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002734.html" data-href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002734.html">en cours</a> sur la liste de diffusion lightning-dev pour savoir comment résoudre au mieux ce problème.</p>
</div>
</div>
<div class="sect4 data-line-314">
<h5 id="_attaques_dos_connues">Attaques DoS connues</h5>
<div class="paragraph data-line-316">
<p>Il existe deux attaques DoS connues sur les canaux LN publics qui rendent un canal cible, ou un ensemble de canaux cibles, inutilisables.
Les deux attaques impliquent d&#8217;acheminer les paiements via un canal public, puis de les retenir jusqu&#8217;à leur expiration, maximisant ainsi la durée de l&#8217;attaque.
L&#8217;exigence d&#8217;échec des paiements pour ne pas payer les frais est assez simple à respecter car les nœuds malveillants peuvent simplement rediriger les paiements vers eux-mêmes.
En l&#8217;absence de frais pour les paiements échoués, le seul coût pour l&#8217;attaquant est le coût sur la chaîne de l&#8217;ouverture d&#8217;un canal pour envoyer ces paiements, ce qui peut être insignifiant dans les environnements avec des frais bas.</p>
</div>
</div>
</div>
<div class="sect3 data-line-321">
<h4 id="_le_blocage_de_lengagement">Le blocage de l&#8217;engagement</h4>
<div class="paragraph data-line-323">
<p>Les nœuds Lightning mettent à jour leur état partagé à l&#8217;aide de transactions d&#8217;engagement asymétriques, sur lesquelles des HTLC sont ajoutés et supprimés pour faciliter les paiements.
Chaque partie est limitée à un total de <a href="https://github.com/lightningnetwork/lightning-rfc/blob/c053ce7afb4cbf88615877a0d5fc7b8dbe2b9ba0/02-peer-protocol.md#the-open_channel-message" data-href="https://github.com/lightningnetwork/lightning-rfc/blob/c053ce7afb4cbf88615877a0d5fc7b8dbe2b9ba0/02-peer-protocol.md#the-open_channel-message">483</a> HTLC dans la transaction d&#8217;engagement simultanément.
Une attaque de blocage de canal permet à un attaquant de rendre un canal inutilisable en acheminant 483 paiements via le canal cible et en les retenant jusqu&#8217;à leur expiration.</p>
</div>
<div class="paragraph data-line-327">
<p>Il convient de noter que cette limite a été choisie dans la spécification pour garantir que tous les HTLC puissent être traités dans une <a href="https://github.com/lightningnetwork/lightning-rfc/blob/master/05-onchain.md#penalty-transaction-weight-calculation" data-href="https://github.com/lightningnetwork/lightning-rfc/blob/master/05-onchain.md#penalty-transaction-weight-calculation">transaction de pénalité unique</a>.
Bien que cette limite puisse être augmentée, les transactions sont toujours limitées par la taille du bloc, de sorte que le nombre d&#8217;emplacements disponibles restera probablement limité.</p>
</div>
</div>
<div class="sect3 data-line-330">
<h4 id="_verrouillage_de_la_liquidité_dun_canal">Verrouillage de la liquidité d&#8217;un canal</h4>
<div class="paragraph data-line-332">
<p>Une attaque de verrouillage de la liquidité du canal est comparable à une attaque de blocage de canal en ce sens qu&#8217;elle achemine les paiements via un canal et les retient afin que le canal soit inutilisable.
Plutôt que de verrouiller des emplacements sur l&#8217;engagement du canal, cette attaque achemine de grands HTLC via un canal cible, consommant toute la bande passante disponible du canal.
L&#8217;engagement de capital de cette attaque est supérieur à l&#8217;attaque de blocage d&#8217;engagement car le nœud attaquant a besoin de plus de fonds pour acheminer les paiements échoués via la cible.</p>
</div>
</div>
</div>
<div class="sect2 data-line-336">
<h3 id="_désanonymisation_inter_couches">Désanonymisation inter-couches</h3>
<div class="paragraph data-line-338">
<p>Les réseaux informatiques sont souvent conçus en couches.
La superposition de couches permet de séparer les préoccupations et rend l&#8217;ensemble du système gérable.
Personne ne pourrait concevoir un site Web s&#8217;il fallait comprendre toute la pile TCP/IP jusqu&#8217;au codage physique des bits dans une fibre optique.
Chaque couche est censée fournir la fonctionnalité à la couche supérieure de manière propre.
Idéalement, la couche supérieure devrait percevoir une couche inférieure comme une boîte noire.
En réalité, cependant, les implémentations ne sont pas idéales et les détails <em>fuient</em> dans la couche supérieure.
C&#8217;est le problème des abstractions qui fuient.</p>
</div>
<div class="paragraph data-line-346">
<p>Dans le cadre de Lightning, le protocole LN s&#8217;appuie sur le protocole Bitcoin et le réseau P2P du  LN.
Jusqu&#8217;à présent, nous n&#8217;avons considéré que les garanties de confidentialité offertes par le Lightning Network de manière isolée.
Cependant, la création et la fermeture des canaux de paiement sont intrinsèquement effectuées sur la blockchain Bitcoin.
Par conséquent, pour une analyse complète des dispositions de confidentialité du Lightning Network, il faut tenir compte de chaque couche de la pile technologique avec laquelle les utilisateurs peuvent interagir.
Plus précisément, un adversaire désanonymisant peut utiliser et utilisera des données hors chaîne et sur la chaîne pour regrouper ou lier des nœuds LN aux adresses Bitcoin correspondantes.</p>
</div>
<div class="paragraph data-line-352">
<p>Les attaquants qui tentent de désanonymiser les utilisateurs de LN peuvent avoir différents objectifs, dans un contexte multicouche :</p>
</div>
<div class="ulist data-line-354">
<ul>
<li class="data-line-354">
<p>Regrouper en cluster des adresses Bitcoin détenues par le même utilisateur (couche 1). Nous appelons celles-ci des entités Bitcoin.</p>
</li>
<li class="data-line-355">
<p>Regrouper en cluster des nœuds LN appartenant au même utilisateur (couche 2).</p>
</li>
<li class="data-line-356">
<p>Relier sans ambiguïté les ensembles de nœuds LN aux ensembles d&#8217;entités Bitcoin qui les contrôlent.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-358">
<p>Il existe plusieurs heuristiques et modèles d&#8217;utilisation qui permettent à un adversaire de regrouper en cluster des adresses Bitcoin et des nœuds LN appartenant aux mêmes utilisateurs LN.
De plus, ces clusters peuvent être liés entre les couches à l&#8217;aide d&#8217;autres puissantes heuristiques de liaison entre les couches.
Le dernier type d&#8217;heuristique, les techniques de liaison inter-couches, met l&#8217;accent sur la nécessité d&#8217;une vision holistique de la confidentialité. Plus précisément, nous devons considérer la confidentialité dans le contexte des deux couches ensemble.</p>
</div>
<div class="sect3 data-line-363">
<h4 id="_mise_en_cluster_dentités_bitcoin_sur_la_chaîne">Mise en cluster d&#8217;entités Bitcoin sur la chaîne</h4>
<div class="paragraph data-line-364">
<p>Les interactions blockchain-Lightning Network sont reflétées en permanence dans le graphe d&#8217;entités Bitcoin.
Même si un canal est fermé, un attaquant peut observer quelle adresse a financé le canal et où les fonds sont dépensés après sa fermeture.
Pour cette analyse, considérons quatre entités distinctes.
L&#8217;ouverture d&#8217;un canal provoque un flux monétaire d&#8217;une <em>entité source</em> vers une <em>entité de financement</em> ; la fermeture d&#8217;un canal provoque un flux d&#8217;une <em>entité de règlement</em> vers une <em>entité de destination</em>.</p>
</div>
<div class="paragraph data-line-369">
<p>Début 2021, <a href="https://arxiv.org/pdf/2007.00764.pdf" data-href="https://arxiv.org/pdf/2007.00764.pdf">Romiti et al.</a> ont identifié quatre heuristiques permettant la mise en cluster de ces entités.
Deux d&#8217;entre elles capturent certains comportements de financement qui fuient et deux décrivent des comportements de règlement qui fuient.</p>
</div>
<div class="dlist data-line-372">
<dl>
<dt class="hdlist1">Heuristique en étoile (financement)</dt>
<dd>
<p>Si un composant contient une entité source qui transfère des fonds à une ou plusieurs entités de financement, ces entités de financement sont probablement contrôlées par le même utilisateur.</p>
</dd>
<dt class="hdlist1">Heuristique de serpent (financement)</dt>
<dd>
<p>Si un composant contient une entité source qui transfère des fonds d&#8217;une ou plusieurs entités, qui sont elles-mêmes utilisées comme entités source et de financement, alors toutes ces entités sont probablement contrôlées par le même utilisateur.</p>
</dd>
<dt class="hdlist1">Heuristique de collecteur (règlement)</dt>
<dd>
<p>Si un composant contient une entité de destination qui reçoit des fonds d&#8217;une ou plusieurs entités de règlement, ces entités de règlement sont probablement contrôlées par le même utilisateur.</p>
</dd>
<dt class="hdlist1">Heuristique de proxy (règlement)</dt>
<dd>
<p>Si un composant contient une entité de destination qui reçoit des fonds d&#8217;une ou plusieurs entités, qui sont elles-mêmes utilisées comme entités de règlement et de destination, alors ces entités sont probablement contrôlées par le même utilisateur.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-377">
<p>Il convient de souligner que ces heuristiques peuvent produire des faux positifs.
Par exemple, si les transactions de plusieurs utilisateurs non liés sont combinées dans une transaction CoinJoin, alors l&#8217;heuristique en étoile ou de proxy peuvent produire des faux positifs.
Cela peut se produire si les utilisateurs financent un canal de paiement à partir d&#8217;une transaction CoinJoin.
Une autre source potentielle de faux positifs pourrait être qu&#8217;une entité puisse représenter plusieurs utilisateurs si les adresses groupées sont contrôlées par un service (par exemple, échange) ou pour le nom de leurs utilisateurs (porte-monnaie dépositaire).
Cependant, ces faux positifs peuvent être efficacement filtrés.</p>
</div>
<div class="sect4 data-line-383">
<h5 id="_contre_mesures">Contre-mesures</h5>
<div class="paragraph data-line-384">
<p>Si les résultats des transactions de financement ne sont pas réutilisés pour ouvrir d&#8217;autres canaux, l&#8217;heuristique de serpent ne fonctionne pas.
Si les utilisateurs s&#8217;abstiennent de financer des canaux à partir d&#8217;une seule source externe et évitent de collecter des fonds dans une seule entité de destination externe, les autres heuristiques ne donneraient aucun résultat significatif.</p>
</div>
</div>
</div>
<div class="sect3 data-line-387">
<h4 id="_mise_en_cluster_de_nœuds_lightning_hors_chaîne">Mise en cluster de nœuds Lightning hors chaîne</h4>
<div class="paragraph data-line-388">
<p>Les nœuds LN annoncent des alias, par exemple, <em>LNBig.com</em>.
Les alias peuvent améliorer la convivialité du système.
Cependant, les utilisateurs ont tendance à utiliser des alias similaires pour leurs propres nœuds différents.
Par exemple, <em>LNBig.com Billing</em> appartient probablement au même utilisateur que le nœud avec l&#8217;alias <em>LNBig.com</em>.
Compte tenu de cette observation, on peut regrouper les nœuds LN en s&#8217;appuyant sur leur alias de nœud.
Plus précisément, on regroupe les nœuds LN en une seule adresse si leurs alias sont similaires par rapport à une métrique de similarité de chaîne de caractères.</p>
</div>
<div class="paragraph data-line-395">
<p>Une autre méthode pour regrouper les nœuds LN consiste à s&#8217;appuyer sur leurs adresses IP ou Tor.
Si les mêmes adresses IP ou Tor correspondent à différents nœuds LN, ces nœuds sont probablement contrôlés par le même utilisateur.</p>
</div>
<div class="sect4 data-line-398">
<h5 id="_contre_mesures_2">Contre-mesures</h5>
<div class="paragraph data-line-399">
<p>Pour plus de confidentialité, les alias doivent être suffisamment différents les uns des autres.
Alors que l&#8217;annonce publique des adresses IP peut être inévitable pour les nœuds qui souhaitent avoir des canaux entrants sur le Lightning Network, la possibilité d&#8217;établir des liens entre les nœuds d&#8217;un même utilisateur peut être mitigée si les clients de chaque nœud sont hébergés chez des fournisseurs de services différents et ont donc des adresses IP différentes.</p>
</div>
</div>
</div>
<div class="sect3 data-line-402">
<h4 id="_liaison_entre_les_couches_nœuds_lightning_et_entités_bitcoin">Liaison entre les couches : nœuds Lightning et entités Bitcoin</h4>
<div class="paragraph data-line-403">
<p>L&#8217;association de nœuds LN à des entités Bitcoin est une violation grave de la confidentialité qui est exacerbée par le fait que la plupart des nœuds LN exposent publiquement leurs adresses IP.
Typiquement, une adresse IP peut être considérée comme un identifiant unique d&#8217;un utilisateur.
Deux modèles de comportement largement observés révèlent des liaisons entre les nœuds LN et les entités Bitcoin :</p>
</div>
<div class="dlist data-line-407">
<dl>
<dt class="hdlist1">Réutilisation des pièces</dt>
<dd>
<p>Chaque fois que les utilisateurs ferment les canaux de paiement, ils récupèrent leurs pièces ("coins" en anglais) correspondantes. Cependant, de nombreux utilisateurs réutilisent ces pièces pour ouvrir un nouveau canal.
Ces pièces peuvent effectivement être liées à un nœud LN commun.</p>
</dd>
<dt class="hdlist1">Réutilisation d&#8217;entité</dt>
<dd>
<p>En règle générale, les utilisateurs financent leurs canaux de paiement à partir d&#8217;adresses Bitcoin correspondant à la même entité Bitcoin.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-412">
<p>Ces algorithmes de liaison entre les couches pourraient être déjoués si les utilisateurs possédaient plusieurs adresses non mises en cluster ou utilisent plusieurs porte-monnaie pour interagir avec le Lightning Network.</p>
</div>
<div class="paragraph data-line-414">
<p>La désanonymisation possible des entités Bitcoin illustre à quel point il est important de prendre en compte la confidentialité des deux couches simultanément au lieu d&#8217;une à la fois.</p>
</div>
</div>
</div>
<div class="sect2 data-line-418">
<h3 id="_graphe_lightning">Graphe Lightning</h3>
<div class="paragraph data-line-420">
<p>Le Lightning Network, comme son nom l&#8217;indique, est un réseau pair-à-pair de canaux de paiement.
Par conséquent, bon nombre de ses propriétés (confidentialité, robustesse, connectivité, efficacité du routage) sont influencées et caractérisées par sa nature de réseau.</p>
</div>
<div class="paragraph data-line-423">
<p>Dans cette section, nous discutons et analysons le Lightning Network du point de vue de la science des réseaux.
Nous sommes particulièrement intéressés par la compréhension du graphe des canaux LN, sa robustesse, sa connectivité et d&#8217;autres caractéristiques importantes.</p>
</div>
<div class="sect3 data-line-426">
<h4 id="_à_quoi_ressemble_le_graphe_lightning_en_réalité">À quoi ressemble le graphe Lightning en réalité ?</h4>
<div class="paragraph data-line-427">
<p>On aurait pu s&#8217;attendre à ce que le Lightning Network soit un graphe aléatoire, où les arêtes sont formées au hasard entre les nœuds.
Si tel était le cas, la distribution des degrés du Lightning Network suivrait une distribution normale gaussienne.
En particulier, la plupart des nœuds auraient approximativement le même degré, et nous ne nous attendrions pas à des nœuds avec des degrés extraordinairement grands.
En effet, la distribution normale diminue de manière exponentielle pour les valeurs en dehors de l&#8217;intervalle autour de la valeur moyenne de la distribution.
La représentation d&#8217;un graphe aléatoire (comme nous l&#8217;avons vu dans <a href="#lngraph">[lngraph]</a>) ressemble à une topologie de réseau maillé.
Il semble décentralisé et non hiérarchique : chaque nœud semble avoir une importance égale.
De plus, les graphes aléatoires ont un grand diamètre.
En particulier, le routage dans de tels graphes est difficile car le chemin le plus court entre deux nœuds est modérément long.</p>
</div>
<div class="paragraph data-line-436">
<p>Or, le graphe du LN est tout à fait différent.</p>
</div>
<div class="sect4 data-line-438">
<h5 id="_le_graphe_lightning_aujourdhui">Le graphe Lightning aujourd&#8217;hui</h5>
<div class="paragraph data-line-439">
<p>Lightning est un réseau financier.
Ainsi, la croissance et la formation du réseau sont également influencées par des incitations économiques.
Chaque fois qu&#8217;un nœud rejoint le Lightning Network, il peut vouloir maximiser sa connectivité avec d&#8217;autres nœuds afin d&#8217;augmenter son efficacité de routage. Ce phénomène est appelé attachement préférentiel.
Ces incitations économiques se traduisent par un réseau fondamentalement différent d&#8217;un graphe aléatoire.</p>
</div>
<div class="paragraph data-line-444">
<p>Sur la base d&#8217;instantanés de canaux annoncés publiquement, la distribution des degrés du Lightning Network suit une fonction de loi de puissance.
Dans un tel graphe, la grande majorité des nœuds ont très peu de connexions à d&#8217;autres nœuds, tandis que seulement une poignée de nœuds ont de nombreuses connexions.
À un niveau élevé, cette topologie de graphe ressemble à une étoile : le réseau a un cœur bien connecté et une périphérie faiblement connectée.
Les réseaux avec distribution de degrés en loi de puissance sont également appelés réseaux invariants d&#8217;échelle ("scale-free" en anglais).
Cette topologie est avantageuse pour acheminer efficacement les paiements mais sujette à certaines attaques basées sur la topologie.</p>
</div>
</div>
<div class="sect4 data-line-450">
<h5 id="_attaques_basées_sur_la_topologie">Attaques basées sur la topologie</h5>
<div class="paragraph data-line-452">
<p>Un adversaire peut vouloir perturber le Lightning Network et peut décider que son objectif est de démanteler l&#8217;ensemble du réseau en de nombreux composants plus petits, rendant le routage des paiements pratiquement impossible dans l&#8217;ensemble du réseau.
Un objectif moins ambitieux, mais toujours malveillant et grave, pourrait consister à ne faire tomber que certains nœuds du réseau.
Une telle perturbation peut se produire au niveau du nœud ou au niveau de l&#8217;arête.</p>
</div>
<div class="paragraph data-line-456">
<p>Supposons qu&#8217;un adversaire puisse détruire n&#8217;importe quel nœud du Lightning Network.
Par exemple, il peut les attaquer avec une attaque par déni de service distribué (DDoS) ou les rendre non opérationnels par n&#8217;importe quel moyen.
Il s&#8217;avère que si l&#8217;adversaire choisit des nœuds au hasard, alors les réseaux invariants d&#8217;échelle comme le Lightning Network sont robustes contre les attaques de suppression de nœuds.
En effet, un nœud aléatoire se trouve à la périphérie avec un petit nombre de connexions, jouant ainsi un rôle négligeable dans la connectivité du réseau.
Cependant, si l&#8217;adversaire est plus prudent, il peut cibler les nœuds les mieux connectés.
Sans surprise, le Lightning Network et d&#8217;autres réseaux invariants d&#8217;échelle ne sont <em>pas</em> robustes contre les attaques ciblées de suppression de nœuds.</p>
</div>
<div class="paragraph data-line-463">
<p>En revanche, l&#8217;adversaire pourrait être plus furtif.
Plusieurs attaques basées sur la topologie ciblent un seul nœud ou un seul canal de paiement.
Par exemple, un adversaire pourrait vouloir épuiser délibérément la capacité d&#8217;un certain canal de paiement.
Plus généralement, un adversaire peut épuiser toute la capacité sortante d&#8217;un nœud pour le faire tomber du marché du routage.
Cela pourrait être facilement obtenu en acheminant les paiements via le nœud victime avec des montants équivalant à la capacité sortante de chaque canal de paiement.
Après avoir terminé cette soi-disant attaque d&#8217;isolement de nœud, la victime ne peut plus envoyer ou acheminer des paiements à moins qu&#8217;elle ne reçoive un paiement ou rééquilibre ses canaux.</p>
</div>
<div class="paragraph data-line-470">
<p>En conclusion, même par conception, il est possible de supprimer des arêtes et des nœuds du Lightning Network routable.
Cependant, selon le vecteur d&#8217;attaque utilisé, l&#8217;adversaire peut avoir à fournir plus ou moins de ressources pour mener à bien l&#8217;attaque.</p>
</div>
</div>
<div class="sect4 data-line-474">
<h5 id="_la_temporalité_du_lightning_network">La temporalité du Lightning Network</h5>
<div class="paragraph data-line-476">
<p>Le Lightning Network est un réseau sans autorisation qui change dynamiquement.
Les nœuds peuvent librement rejoindre ou quitter le réseau, ils peuvent ouvrir et créer des canaux de paiement à tout moment.
Par conséquent, un seul instantané statique du graphe LN est trompeur. Nous devons tenir compte de la temporalité et de la nature en constante évolution du réseau. Pour l&#8217;instant, le graphe LN augmente en termes de nombre de nœuds et de canaux de paiement.
Son diamètre effectif diminue également ; c&#8217;est-à-dire que les nœuds se rapprochent les uns des autres, comme nous pouvons le voir dans <a href="#temporal_ln">La croissance constante du Lightning Network en nœuds, canaux et capacité verrouillée (en septembre 2021)</a>.</p>
</div>
<div id="temporal_ln" class="imageblock data-line-483">
<div class="content">
<img src="images/mtln_1602.png" alt="La croissance constante du Lightning Network en nœuds, canaux et capacité verrouillée (en septembre 2021)">
</div>
<div class="title">Figure 2. La croissance constante du Lightning Network en nœuds, canaux et capacité verrouillée (en septembre 2021)</div>
</div>
<div class="paragraph data-line-485">
<p>Dans les réseaux sociaux, le comportement de fermeture en triangle est courant.
Plus précisément, dans un graphe où les nœuds représentent des personnes et les amitiés sont représentées comme des arêtes, on s&#8217;attend quelque peu à ce que des triangles apparaissent dans le graphe.
Un triangle, dans ce cas, représente des amitiés par paires entre trois personnes.
Par exemple, si Alice connaît Bob et que Bob connaît Charlie, il est probable qu&#8217;à un moment donné, Bob présentera Alice à Charlie.
Cependant, ce comportement serait étrange dans le Lightning Network.
Les nœuds ne sont tout simplement pas incités à fermer des triangles car ils auraient pu simplement acheminer les paiements au lieu d&#8217;ouvrir un nouveau canal de paiement.
Étonnamment, la fermeture en triangle est une pratique courante sur le Lightning Network.
Le nombre de triangles augmentait régulièrement avant la mise en œuvre des paiements en plusieurs parties.
Ceci est contre-intuitif et surprenant étant donné que les nœuds auraient pu simplement acheminer les paiements par les deux côtés du triangle au lieu d&#8217;ouvrir le troisième canal.
Cela peut signifier que les inefficacités de routage ont incité les utilisateurs à fermer les triangles et à ne pas se rabattre sur le routage.
Espérons que les paiements en plusieurs parties contribueront à accroître l&#8217;efficacité du routage des paiements.</p>
</div>
</div>
</div>
</div>
<div class="sect2 data-line-497">
<h3 id="_centralisation_dans_le_lightning_network">Centralisation dans le Lightning Network</h3>
<div class="paragraph data-line-499">
<p>Une métrique courante pour évaluer la centralité d&#8217;un nœud dans un graphe est sa <em>centralité intermédiaire</em>. La dominance du point central est une métrique dérivée de la centralité intermédiaire, utilisée pour évaluer la centralité d&#8217;un réseau.
Pour une définition précise de la dominance du point central, le lecteur est renvoyé à <a href="https://doi.org/10.2307/3033543" data-href="https://doi.org/10.2307/3033543">Travaux de Freeman</a>.</p>
</div>
<div class="paragraph data-line-502">
<p>Plus la dominance du point central d&#8217;un réseau est grande, plus le réseau est centralisé.
Nous pouvons observer que le Lightning Network a une plus grande dominance de point central (c&#8217;est-à-dire qu&#8217;il est plus centralisé) qu&#8217;un graphe aléatoire (graphe Erdős–Rényi) ou un graphe invariant d&#8217;échelle (graphe Barabási–Albert) de taille égale.</p>
</div>
<div class="paragraph data-line-505">
<p>En général, notre compréhension de la nature dynamique du graphe des canaux LN est plutôt limitée.
Il est fructueux d&#8217;analyser comment les changements de protocole comme les paiements en plusieurs parties peuvent affecter les dynamiques du Lightning Network.
Il serait profitable d&#8217;explorer la nature temporelle du graphe LN plus en profondeur.</p>
</div>
</div>
<div class="sect2 data-line-509">
<h3 id="_incitations_économiques_et_structure_de_graphe">Incitations économiques et structure de graphe</h3>
<div class="paragraph data-line-511">
<p>Le graphe LN se forme spontanément et les nœuds se connectent les uns aux autres en fonction de leurs intérêts mutuels.
En conséquence, les incitations stimulent le développement du graphe.
Examinons quelques-unes des incitations pertinentes :</p>
</div>
<div class="ulist data-line-515">
<ul>
<li class="data-line-515">
<p>Incitations rationnelles :</p>
<div class="ulist data-line-516">
<ul>
<li class="data-line-516">
<p>Les nœuds établissent des canaux pour envoyer, recevoir et acheminer les paiements (gagner des frais).</p>
</li>
<li class="data-line-517">
<p>Qu&#8217;est-ce qui rend un canal plus susceptible d&#8217;être établi entre deux nœuds qui agissent rationnellement ?</p>
</li>
</ul>
</div>
</li>
<li class="data-line-518">
<p>Incitations altruistes :</p>
<div class="ulist data-line-519">
<ul>
<li class="data-line-519">
<p>Les nœuds établissent des canaux "pour le bien du réseau".</p>
</li>
<li class="data-line-520">
<p>Bien que nous ne devrions pas baser nos hypothèses de sécurité sur l&#8217;altruisme, dans une certaine mesure, le comportement altruiste fait avancer Bitcoin (accepter les connexions entrantes, servir des blocs).</p>
</li>
<li class="data-line-521">
<p>Quel rôle cela joue-t-il dans Lightning ?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph data-line-523">
<p>Dans les premiers stades du Lightning Network, de nombreux opérateurs de nœuds ont affirmé que les frais de routage gagnés ne compensent pas les coûts d&#8217;opportunité résultant du blocage des liquidités. Cela indiquerait que l&#8217;exploitation d&#8217;un nœud peut être motivée principalement par des incitations altruistes "pour le bien du réseau".
Cela pourrait changer à l&#8217;avenir si le Lightning Network a un trafic beaucoup plus important ou si un marché pour les frais de routage émerge.
D&#8217;autre part, si un nœud souhaite optimiser ses frais de routage, il minimisera les longueurs moyennes des chemins les plus courts vers tous les autres nœuds.
En d&#8217;autres termes, un nœud à la recherche de profit essaiera de se situer au <em>centre</em> du graphe des canaux ou proche <span class="keep-together">de celui-ci</span>.</p>
</div>
</div>
<div class="sect2 data-line-528">
<h3 id="_conseils_pratiques_aux_utilisateurs_pour_protéger_leur_confidentialité">Conseils pratiques aux utilisateurs pour protéger leur confidentialité</h3>
<div class="paragraph data-line-530">
<p>Nous en sommes encore aux premiers stades du Lightning Network.
Bon nombre des préoccupations énumérées dans ce chapitre seront probablement traitées à mesure qu&#8217;il grandira et se développera.
En attendant, vous pouvez prendre certaines mesures pour protéger votre nœud contre les utilisateurs malveillants ; quelque chose d&#8217;aussi simple que la mise à jour des paramètres par défaut avec lesquels votre nœud s&#8217;exécute peut grandement contribuer à renforcer votre nœud.</p>
</div>
</div>
<div class="sect2 data-line-534">
<h3 id="_canaux_non_annoncés">Canaux non annoncés</h3>
<div class="paragraph data-line-536">
<p>Si vous avez l&#8217;intention d&#8217;utiliser le Lightning Network pour envoyer et recevoir des fonds entre les nœuds et les porte-monnaie que vous contrôlez, et n&#8217;avez aucun intérêt à acheminer les paiements des autres utilisateurs, il n&#8217;est pas nécessaire d&#8217;annoncer vos canaux au reste du réseau.
Vous pouvez ouvrir un canal entre, par exemple, votre ordinateur de bureau exécutant un nœud complet et votre téléphone mobile exécutant un porte-monnaie Lightning, et simplement renoncer à l&#8217;annonce de canal discutée dans <a href="#ch03_How_Lightning_Works">[ch03_How_Lightning_Works]</a>.
Ceux-ci sont parfois appelés canaux "privées" ; cependant, il est plus correct de les désigner comme des canaux "non annoncés" car ils ne sont pas strictement privés.</p>
</div>
<div class="paragraph data-line-540">
<p>Les canaux non annoncés ne seront pas connus du reste du réseau et ne seront normalement pas utilisés pour acheminer les paiements des autres utilisateurs.
Ils peuvent toujours être utilisés pour acheminer les paiements si d&#8217;autres nœuds sont informés à leur sujet ; par exemple, une facture peut contenir des indications de routage suggérant un chemin avec un canal non annoncé.
Cependant, en supposant que vous n&#8217;ayez ouvert qu&#8217;un canal non annoncé avec vous-même, vous gagnez une certaine confidentialité.
Puisque vous n&#8217;exposez pas votre canal sur le réseau, vous réduisez le risque d&#8217;attaque par déni de service sur votre nœud.
Vous pourrez également gérer plus facilement la capacité de ce canal, puisqu&#8217;il ne servira qu&#8217;à recevoir ou envoyer directement vers votre nœud.</p>
</div>
<div class="paragraph data-line-546">
<p>L&#8217;ouverture d&#8217;un canal non annoncé avec une partie connue avec laquelle vous effectuez fréquemment des transactions présente également des avantages.
Par exemple, si Alice et Bob jouent fréquemment au poker avec des bitcoins, ils pourraient ouvrir un canal pour envoyer leurs gains dans les deux sens.
Dans des conditions normales, ce canal ne sera pas utilisé pour acheminer les paiements d&#8217;autres utilisateurs ou pour percevoir des frais.
Et puisque le canal ne sera pas connu du reste du réseau, aucun paiement entre Alice et Bob ne peut être déduit en suivant les changements dans la capacité de routage du canal.
Cela confère une certaine intimité à Alice et Bob ; cependant, si l&#8217;un d&#8217;eux décide de faire connaître le canal aux autres utilisateurs, par exemple en l&#8217;incluant dans les conseils de routage d&#8217;une facture, cette confidentialité est perdue.</p>
</div>
<div class="paragraph data-line-552">
<p>Il convient également de noter que pour ouvrir un canal non annoncé, une transaction publique doit être effectuée sur la blockchain Bitcoin.
Il est donc possible de déduire l&#8217;existence et la taille du canal si une partie malveillante surveille la blockchain pour les transactions d&#8217;ouverture de canal et tente de les faire correspondre aux canaux du réseau.
De plus, lorsque le canal sera fermé, le solde final du canal sera rendu public une fois qu&#8217;il sera engagé sur la blockchain Bitcoin.
Cependant, comme les transactions d&#8217;ouverture et d&#8217;engagement sont pseudonymes, il ne sera pas simple de les relier à Alice ou à Bob.
De plus, la mise à jour Taproot de 2021 rend difficile la distinction entre les transactions d&#8217;ouverture et de fermeture de canal et d&#8217;autres types spécifiques de transactions Bitcoin.
Par conséquent, bien que les canaux non annoncés ne soient pas complètement privés, ils offrent certains avantages en matière de confidentialité lorsqu&#8217;ils sont utilisés avec précaution.</p>
</div>
</div>
<div class="sect2 data-line-560">
<h3 id="routing_considerations">Considérations de routage</h3>
<div class="paragraph data-line-562">
<p>Comme indiqué dans <a href="#denial_of_service">Déni de service</a>, les nœuds qui ouvrent des canaux publics s&#8217;exposent au risque d&#8217;une série d&#8217;attaques sur leurs canaux.
Bien que des moyens de mitigation soient en cours d&#8217;élaboration au niveau du protocole, il existe de nombreuses mesures qu&#8217;un nœud peut prendre pour se protéger contre les attaques par déni de service sur ses canaux publics :</p>
</div>
<div class="dlist data-line-565">
<dl>
<dt class="hdlist1">Taille de HTLC minimale</dt>
<dd>
<p>Lorsque le canal est ouvert, votre nœud peut définir la taille de HTLC minimale qu&#8217;il acceptera.
En fixant une valeur plus élevée, vous vous assurez que chacun de vos slots de canaux disponibles ne peut pas être occupé par un très petit paiement.</p>
</dd>
<dt class="hdlist1">Limitation de cadence</dt>
<dd>
<p>De nombreuses implémentations de nœuds permettent aux nœuds d&#8217;accepter ou de rejeter dynamiquement les HTLC qui sont transmis via votre nœud.
Voici quelques lignes directrices utiles pour un limiteur de cadence personnalisé :</p>
<div class="ulist data-line-570">
<ul>
<li class="data-line-570">
<p>Limiter le nombre d&#8217;emplacements d&#8217;engagement qu&#8217;un seul pair peut consommer</p>
</li>
<li class="data-line-571">
<p>Surveiller les taux d&#8217;échec provenant d&#8217;un seul pair et limiter la cadence si leurs échecs augmentent soudainement</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Canaux de l&#8217;ombre</dt>
<dd>
<p>Les nœuds qui souhaitent ouvrir de grands canaux vers une seule cible peuvent à la place ouvrir un seul canal public vers la cible et le supporter ensuite avec d&#8217;autres canaux privés appelés <a href='https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6'>shadow channels</a> ("shadow channels" en anglais). Ces canaux peuvent toujours être utilisés pour le routage mais ne sont pas annoncés aux attaquants potentiels.</p>
</dd>
</dl>
</div>
<div class="sect3 data-line-574">
<h4 id="_accepter_des_canaux">Accepter des canaux</h4>
<div class="paragraph data-line-575">
<p>À l&#8217;heure actuelle, les nœuds Lightning ont du mal à amorcer la liquidité entrante. Alors qu&#8217;il y existe des
solutions payantes pour acquérir des liquidités entrantes, comme les services d&#8217;échange, les marchés de canaux et les services d&#8217;ouverture de canaux payants à partir de hubs connus, de nombreux nœuds accepteront volontiers toute demande d&#8217;ouverture de canal d&#8217;apparence légitime pour augmenter leur liquidité entrante.</p>
</div>
<div class="paragraph data-line-578">
<p>En revenant au contexte de Bitcoin, cela peut être comparé à la façon dont Bitcoin Core traite différemment ses connexions entrantes et sortantes par crainte que le nœud ne soit éclipsé.
Si un nœud ouvre une connexion entrante vers votre nœud Bitcoin, vous n&#8217;avez aucun moyen de savoir si l&#8217;initiateur vous a sélectionné au hasard ou cible spécifiquement votre nœud avec des intentions malveillantes.
Vos connexions sortantes n&#8217;ont pas besoin d&#8217;être traitées avec une telle suspicion car soit le nœud a été sélectionné au hasard parmi un groupe de nombreux pairs potentiels, soit vous vous êtes intentionnellement connecté manuellement au pair.</p>
</div>
<div class="paragraph data-line-582">
<p>La même chose peut être dite dans Lightning.
Lorsque vous ouvrez un canal, cela se fait intentionnellement, mais lorsqu&#8217;une partie distante ouvre un canal vers votre nœud, vous n&#8217;avez aucun moyen de savoir si ce canal sera utilisé pour attaquer votre nœud ou non.
Comme le notent plusieurs articles, le coût relativement faible de la création d&#8217;un nœud et de l&#8217;ouverture de canaux vers des cibles sont des facteurs importants qui facilitent les attaques.
Si vous acceptez les canaux entrants, il est prudent de placer certaines restrictions sur les nœuds à partir desquels vous acceptez les canaux entrants.
De nombreuses implémentations exposent des hooks d&#8217;acceptation de canal qui vous permettent d&#8217;adapter vos politiques d&#8217;acceptation de canal à vos préférences.</p>
</div>
<div class="paragraph data-line-588">
<p>La question de l&#8217;acceptation et du rejet des canaux est philosophique.
Que se passe-t-il si nous nous retrouvons avec un Lightning Network où les nouveaux nœuds ne peuvent pas participer car ils ne peuvent ouvrir aucun canal ?
Notre suggestion n&#8217;est pas de définir une liste exclusive de "méga-hubs" à partir desquels vous accepterez des canaux, mais plutôt d&#8217;accepter des canaux d&#8217;une manière qui correspond à votre préférence en matière de risques.</p>
</div>
<div class="paragraph data-line-592">
<p>Certaines stratégies potentielles sont :</p>
</div>
<div class="dlist data-line-594">
<dl>
<dt class="hdlist1">Aucun risque</dt>
<dd>
<p>N&#8217;acceptez aucun canal entrant.</p>
</dd>
<dt class="hdlist1">Risque faible</dt>
<dd>
<p>Acceptez les canaux d&#8217;un ensemble connu de nœuds avec lesquels vous avez déjà ouvert des canaux avec succès.</p>
</dd>
<dt class="hdlist1">Risque moyen</dt>
<dd>
<p>N&#8217;acceptez que les canaux des nœuds qui sont présents dans le graphe depuis plus longtemps et qui ont des canaux de longue durée.</p>
</dd>
<dt class="hdlist1">Risque plus élevé</dt>
<dd>
<p>Acceptez tous les canaux entrants et mettez en œuvre les mesures de mitigation décrites dans <a href="#routing_considerations">Considérations de routage</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2 data-line-599">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph data-line-600">
<p>En résumé, la confidentialité et la sécurité sont des sujets nuancés et complexes, et bien que de nombreux chercheurs et développeurs recherchent des améliorations pour l&#8217;évolution du réseau, il est important que tous ceux qui participent au réseau comprennent ce qu&#8217;ils peuvent faire pour protéger leur propre confidentialité et accroître la sécurité au niveau d&#8217;un nœud individuel.</p>
</div>
</div>
<div class="sect2 data-line-602">
<h3 id="_références_et_lectures_complémentaires">Références et lectures complémentaires</h3>
<div class="paragraph data-line-604">
<p>Dans ce chapitre, nous avons utilisé de nombreuses références issues de recherches en cours sur la sécurité de Lightning. Vous pouvez trouver ces articles et documents utiles répertoriés par sujet dans les listes suivantes.</p>
</div>
<div class="sect4 data-line-606">
<h5 id="_confidentialité_et_attaques_par_sondage">Confidentialité et attaques par sondage</h5>
<div class="ulist data-line-608">
<ul>
<li class="data-line-608">
<p>Jordi Herrera-Joancomartí et al. <a href="https://eprint.iacr.org/2019/328" data-href="https://eprint.iacr.org/2019/328">"On the Difficulty of Hiding the Balance of Lightning Network Channels"</a>. <em>Asia CCS '19 : Actes de la conférence ACM Asia 2019 sur la sécurité informatique et des communications</em> (juillet 2019) : 602–612.</p>
</li>
<li class="data-line-609">
<p>Utz Nisslmueller et al. "Toward Active and Passive Confidentiality Attacks on Cryptocurrency Off-Chain Networks." Prépublication arXiv, <a href="https://arxiv.org/abs/2003.00003" class="undefined" data-href="https://arxiv.org/abs/2003.00003">https://arxiv.org/abs/2003.00003</a> (2020).</p>
</li>
<li class="data-line-610">
<p>Sergei Tikhomirov et al. "Probing Channel Balances in the Lightning Network." Prépublication arXiv, <a href="https://arxiv.org/abs/2004.00333" class="undefined" data-href="https://arxiv.org/abs/2004.00333">https://arxiv.org/abs/2004.00333</a> (2020).</p>
</li>
<li class="data-line-611">
<p>George Kappos et al. "An Empirical Analysis of Privacy in the Lightning Network." Prépublication arXiv, <a href="https://arxiv.org/abs/2003.12470" class="undefined" data-href="https://arxiv.org/abs/2003.12470">https://arxiv.org/abs/2003.12470</a> (2021).</p>
</li>
<li class="data-line-612">
<p><a href="https://github.com/LN-Zap/zap-desktop/blob/v0.7.2-beta/services/grpc/router.methods.js" data-href="https://github.com/LN-Zap/zap-desktop/blob/v0.7.2-beta/services/grpc/router.methods.js">Code source Zap avec la fonction de sondage</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4 data-line-614">
<h5 id="_attaques_de_congestion">Attaques de congestion</h5>
<div class="ulist data-line-616">
<ul>
<li class="data-line-616">
<p>Ayelet Mizrahi and Aviv Zohar. "Congestion Attacks in Payment Channel Networks." Prépublication arXiv, <a href="https://arxiv.org/abs/2002.06564" class="undefined" data-href="https://arxiv.org/abs/2002.06564">https://arxiv.org/abs/2002.06564</a> (2020).</p>
</li>
</ul>
</div>
</div>
<div class="sect4 data-line-618">
<h5 id="_considérations_de_routage">Considérations de routage</h5>
<div class="ulist data-line-620">
<ul>
<li class="data-line-620">
<p>Marty Bent, entretien avec Joost Jager, <em>Tales from the Crypt</em>, podcast audio, 2 octobre 2020, <a href="https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6" class="undefined" data-href="https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6">https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6</a>. </p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-28 02:38:42 -0400
</div>
</div>
</body>
</html>