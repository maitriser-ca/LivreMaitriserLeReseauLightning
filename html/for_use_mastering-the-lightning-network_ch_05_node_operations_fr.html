<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Exploitation d&#8217;un nœud du Lightning Network</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
</div>
<div id="content">
<div class="sect1 data-line-3">
<h2 id="node_operations">Exploitation d&#8217;un nœud du Lightning Network</h2>
<div class="sectionbody">
<div class="paragraph data-line-5">
<p>En ayant lu jusqu&#8217;ici, vous avez probablement créé une porte-monnaie Lightning. Dans ce chapitre, nous allons aller plus loin et mettre en place un nœud Lightning complet. En plus de la mise en place d&#8217;un nœud, nous apprendrons à le faire fonctionner et à le maintenir dans le temps.</p>
</div>
<div class="paragraph data-line-7">
<p>Il existe de nombreuses raisons pour lesquelles vous pourriez vouloir installer votre propre nœud Lightning. Ils comprennent :</p>
</div>
<div class="ulist data-line-9">
<ul>
<li class="data-line-9">
<p>Être un participant actif à part entière du Lightning Network, et pas seulement un utilisateur final</p>
</li>
<li class="data-line-10">
<p>Pour gérer une boutique en ligne ou recevoir des revenus via des paiements Lightning</p>
</li>
<li class="data-line-11">
<p>Pour gagner des revenus grâce aux frais de routage Lightning ou en louant des liquidités de canal</p>
</li>
<li class="data-line-12">
<p>Pour développer de nouveaux services, applications ou plug-ins pour le Lightning Network</p>
</li>
<li class="data-line-13">
<p>Pour augmenter votre confidentialité financière lors de l&#8217;utilisation de Lightning</p>
</li>
<li class="data-line-14">
<p>Pour utiliser certaines applications construites sur Lightning, telles que les applications de messagerie instantanée propulsées par Lightning</p>
</li>
<li class="data-line-15">
<p>Pour la liberté financière, l&#8217;indépendance et la souveraineté</p>
</li>
</ul>
</div>
<div class="paragraph data-line-17">
<p>Il y a des coûts associés à l&#8217;exécution d&#8217;un nœud LN. Vous avez besoin d&#8217;un ordinateur, d&#8217;une connexion Internet permanente, de beaucoup d&#8217;espace disque et de beaucoup de temps !
Les coûts d&#8217;exploitation comprendront des dépenses d&#8217;électricité.</p>
</div>
<div class="paragraph data-line-20">
<p>Mais les compétences que vous apprendrez de cette expérience sont précieuses et peuvent également être appliquées à une variété d&#8217;autres tâches.</p>
</div>
<div class="paragraph data-line-22">
<p>Commençons !</p>
</div>
<div class="admonitionblock note data-line-25">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-26">
<p>Il est important que vous définissiez correctement vos propres attentes en se basant sur des faits précis.
Si vous envisagez d&#8217;exploiter un nœud Lightning <em>uniquement</em> pour gagner un revenu en percevant des frais de routage,
veuillez d&#8217;abord faire vos devoirs avec diligence. Diriger une entreprise rentable en exploitant un nœud Lightning n&#8217;est
définitivement <em>pas</em> facile. Calculez tous vos coûts initiaux et continus dans une feuille de calcul. Étudiez attentivement les statistiques du LN.
Quel est le volume de paiement actuel ? Quel est le volume par nœud ? Quels sont les frais de routage moyens actuels ? Consultez les forums et demandez
des conseils ou des commentaires d&#8217;autres membres de la communauté qui ont déjà acquis une expérience du monde réel. Formez votre propre opinion éclairée uniquement
<em>après</em> que vous avez fait cet exercice de diligence raisonnable. La plupart des gens trouveront leur motivation pour gérer un nœud non dans un gain financier,
mais plutôt ailleurs.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2 data-line-36">
<h3 id="_choisir_votre_plateforme">Choisir votre plateforme</h3>
<div class="paragraph data-line-38">
<p>Il existe de nombreuses façons d&#8217;exécuter un nœud Lightning, allant d&#8217;un petit mini PC hébergé dans votre domicile ou un serveur dédié, vers un serveur hébergé dans le cloud. La méthode que vous choisirez dépendra des ressources dont vous disposez et du montant que vous souhaitez dépenser.</p>
</div>
<div class="sect3 data-line-41">
<h4 id="continuous_operation">Pourquoi la fiabilité est-elle importante pour l&#8217;exécution d&#8217;un nœud Lightning ?</h4>
<div class="paragraph data-line-43">
<p>Dans Bitcoin, le matériel n&#8217;est pas particulièrement important à moins que l&#8217;on n&#8217;exécute spécifiquement un nœud de minage.
Le logiciel de nœud Bitcoin Core peut être exécuté sur n&#8217;importe quelle machine qui répond à ses exigences minimales et n&#8217;a pas besoin d&#8217;être en ligne pour recevoir des paiements, uniquement pour les envoyer.
Si un nœud Bitcoin tombe en panne pendant une période prolongée, l&#8217;utilisateur peut simplement redémarrer le nœud, et une fois qu&#8217;il se connecte au reste du réseau, il se resynchronisera avec la blockchain.</p>
</div>
<div class="paragraph data-line-47">
<p>Dans Lightning, cependant, l&#8217;utilisateur doit être en ligne à la fois pour envoyer <em>et</em> pour recevoir des paiements. Si le nœud Lightning est hors ligne, il ne peut recevoir aucun paiement de qui que ce soit et ses factures ouvertes ne peuvent donc pas être honorées.
De plus, les canaux ouverts d&#8217;un nœud hors ligne ne peuvent pas être utilisés pour acheminer des paiements. Vos partenaires de canal remarqueront que vous êtes hors ligne et ne pourront pas vous contacter pour acheminer un paiement. Si vous êtes trop souvent hors ligne, ils peuvent considérer que les bitcoins verrouillés dans leurs canaux avec vous est une capacité sous-utilisée et peuvent fermer ces canaux. Nous avons déjà évoqué le cas d&#8217;une attaque de protocole dans laquelle votre partenaire de canal tente de vous tromper en soumettant une transaction d&#8217;engagement antérieure. Si vous êtes hors ligne et que vos canaux ne sont pas surveillés, la tentative de vol peut réussir et vous n&#8217;aurez aucun recours une fois le délai expiré.
Par conséquent, la fiabilité du nœud est extrêmement importante pour un nœud Lightning.</p>
</div>
<div class="paragraph data-line-51">
<p>Il y a aussi les problèmes de panne matérielle et de perte de données. Dans Bitcoin, une panne matérielle peut être un problème trivial si l&#8217;utilisateur dispose d&#8217;une sauvegarde de sa phrase mnémonique ou de ses clés privées. Le porte-monnaie Bitcoin et le bitcoin à l&#8217;intérieur du porte-monnaie peuvent être facilement restaurés à partir des clés privées sur un nouvel ordinateur. La plupart des informations peuvent être retéléchargées depuis la blockchain.</p>
</div>
<div class="paragraph data-line-53">
<p>En revanche, sur Lightning, les informations sur les canaux de l&#8217;utilisateur, y compris les transactions d&#8217;engagement et les secrets de révocation, ne sont pas connues du public et ne sont stockées que sur le matériel de l&#8217;utilisateur individuel.
Ainsi, les pannes logicielles et matérielles du Lightning Network peuvent facilement entraîner une perte de fonds.</p>
</div>
</div>
<div class="sect3 data-line-56">
<h4 id="_types_de_nœuds_lightning_matériels">Types de nœuds Lightning matériels</h4>
<div class="paragraph data-line-58">
<p>Il existe trois principaux types de nœuds Lightning matériels :</p>
</div>
<div class="dlist data-line-60">
<dl>
<dt class="hdlist1">Ordinateurs à usage général</dt>
<dd>
<p>Un nœud LN peut être exécuté sur un ordinateur personnel ou un ordinateur portable exécutant Windows, macOS ou Linux. Généralement, il est exécuté au côté d&#8217;un nœud Bitcoin.</p>
</dd>
<dt class="hdlist1">Matériel dédié</dt>
<dd>
<p>Un nœud Lightning peut également être exécuté sur du matériel dédié comme un Raspberry Pi, Rock64 ou un mini PC. Cette configuration exécuterait généralement une pile logicielle, y compris un nœud Bitcoin et d&#8217;autres applications. Cette configuration est populaire car le matériel est dédié à l&#8217;exécution et à la maintenance du nœud Lightning uniquement et est généralement configuré avec un "assistant" d&#8217;installation.</p>
</dd>
<dt class="hdlist1">Matériel préconfiguré</dt>
<dd>
<p>Un nœud LN peut également être exécuté sur du matériel spécialement conçu, sélectionné et configuré pour cette tâche. Cela comprendrait des solutions de nœuds Lightning "prêtes à l&#8217;emploi" qui peuvent être achetées sous forme de kit ou de système clé en main.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 data-line-64">
<h4 id="_exécuté_dans_le_cloud">Exécuté dans le "Cloud"</h4>
<div class="paragraph data-line-66">
<p>Les <em>Serveurs privés virtuels</em> ("Virtual Private Server" ou "VPS" en anglais) et les services d&#8217;informatique en nuage ("cloud computing" en anglais) tels que Microsoft Azure, Google Cloud, Amazon Web Services (AWS) ou DigitalOcean sont assez abordables et peuvent être mis en place très rapidement. Un nœud Lightning peut être hébergé pour une somme entre 20 $ et 40 $ par mois sur de tels services.</p>
</div>
<div class="paragraph data-line-68">
<p>Cependant, comme le dit l&#8217;adage, "le &lsquo;cloud&rsquo; n&#8217;est que l&#8217;ordinateur d&#8217;autrui". Utiliser ces services signifie exécuter votre nœud sur les ordinateurs d&#8217;autres personnes. Cela comporte des avantages et des inconvénients correspondants. Les principaux avantages sont la commodité, l&#8217;efficacité, la disponibilité et peut-être même le coût. L&#8217;opérateur cloud gère et exécute le nœud à un haut niveau, vous offrant automatiquement commodité et efficacité. Ils offrent un temps de fonctionnement et une disponibilité excellents, souvent bien meilleurs que ce qu&#8217;un individu peut obtenir à la maison. Si vous considérez que le coût de l&#8217;électricité pour faire fonctionner un serveur dans de nombreux pays occidentaux est d&#8217;environ 10 $ par mois, ajoutez à cela le coût de la bande passante du réseau et du matériel lui-même, l&#8217;offre VPS devient financièrement compétitive. Enfin, avec un VPS, vous n&#8217;avez pas besoin d&#8217;espace pour un PC à la maison et vous n&#8217;avez aucun problème avec le bruit ou la chaleur du PC.
En revanche, il existe plusieurs inconvénients notables. Un nœud Lightning exécuté dans le "cloud" sera toujours moins sécurisé et moins privé qu&#8217;un nœud exécuté sur votre propre ordinateur. De plus, ces services d&#8217;informatique en nuage sont très centralisés. La grande majorité des nœuds Bitcoin et Lightning fonctionnant sur ces services sont situés dans une poignée de centres de données en Virginie, à Sunnyvale, Seattle, Londres et Francfort. Lorsque les réseaux ou les centres de données de ces fournisseurs ont des problèmes de service, cela affecte des milliers de nœuds sur des réseaux prétendument « décentralisés ».</p>
</div>
<div class="paragraph data-line-71">
<p>Si vous avez la possibilité et la capacité d&#8217;exécuter un nœud sur votre propre ordinateur à la maison ou au bureau, cela peut être préférable de l&#8217;y exécuter
plutôt que sur le cloud. Néanmoins, si l&#8217;exécution de votre propre serveur n&#8217;est pas une option, envisagez certainement d&#8217;en exécuter un sur un VPS.</p>
</div>
</div>
<div class="sect3 data-line-74">
<h4 id="_exécuter_un_nœud_à_la_maison">Exécuter un nœud à la maison</h4>
<div class="paragraph data-line-76">
<p>Si vous disposez d&#8217;une connexion Internet de capacité raisonnable à la maison ou dans votre bureau, vous pouvez certainement y exécuter un nœud Lightning. Toute connexion "haut débit" est suffisante pour exécuter un nœud léger, et une connexion rapide vous permettra également d&#8217;exécuter un nœud complet Bitcoin.</p>
</div>
<div class="paragraph data-line-78">
<p>Bien que vous puissiez exécuter un nœud Lightning (et même un nœud Bitcoin) sur votre ordinateur portable, cela deviendra rapidement ennuyeux. Ces programmes consomment les ressources de votre ordinateur et doivent fonctionner 24h/24 et 7j/7. Vos applications utilisateur telles que votre navigateur ou votre feuille de calcul seront en concurrence avec les services d&#8217;arrière-plan Lightning pour les ressources de votre ordinateur. En d&#8217;autres termes, votre navigateur et d&#8217;autres charges de travail de bureau seront ralentis.
Et lorsque votre application de traitement de texte gèle votre ordinateur portable, votre nœud Lightning s&#8217;arrête également, vous laissant incapable de recevoir des transactions et potentiellement vulnérable aux attaques. De plus, vous ne devez jamais éteindre votre ordinateur portable.
Tout cela combiné donne une configuration qui n&#8217;est pas idéale. Il en va de même pour votre ordinateur de bureau personnel utilisé quotidiennement.</p>
</div>
<div class="paragraph data-line-82">
<p>Au lieu de cela, la plupart des utilisateurs choisiront d&#8217;exécuter un nœud sur un ordinateur dédié.
Heureusement, vous n&#8217;avez pas besoin d&#8217;un ordinateur de classe "serveur" pour ce faire.
Vous pouvez exécuter un nœud Lightning sur un ordinateur monocarte, tel qu&#8217;un Raspberry Pi ou sur un mini PC (généralement commercialisé comme PC de Home Cinéma).
Ce sont de simples ordinateurs qui sont couramment utilisés comme hub domotique ou serveur multimédia.
Ils sont relativement peu coûteux par rapport à un PC ou un ordinateur portable.
L&#8217;avantage d&#8217;un appareil dédié en tant que plateforme pour les nœuds Lightning et Bitcoin est qu&#8217;il peut fonctionner en continu, silencieusement et discrètement sur votre réseau domestique, caché derrière votre routeur ou votre téléviseur.
Personne ne saura même que cette petite boîte fait partie d&#8217;un système bancaire mondial !</p>
</div>
<div class="admonitionblock warning data-line-91">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph data-line-92">
<p>L&#8217;utilisation d&#8217;un nœud sur un système d&#8217;exploitation 32 bits et/ou un processeur 32 bits n&#8217;est pas recommandée, car le logiciel du nœud peut rencontrer des problèmes de ressources, provoquant un plantage et éventuellement une perte de fonds.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3 data-line-95">
<h4 id="_quel_matériel_est_requis_pour_exécuter_un_nœud_lightning">Quel matériel est requis pour exécuter un nœud Lightning ?</h4>
<div class="paragraph data-line-97">
<p>Au minimum, les éléments suivants sont requis pour exécuter un nœud Lightning :</p>
</div>
<div class="dlist data-line-99">
<dl>
<dt class="hdlist1">CPU</dt>
<dd>
<p>Une puissance de traitement suffisante est nécessaire pour exécuter un nœud Bitcoin, qui téléchargera et validera en permanence de nouveaux blocs. L&#8217;utilisateur doit également tenir compte du téléchargement initial des blocs ("Initial Block Download" ou "IBD" en anglais) lors de la configuration d&#8217;un nouveau nœud Bitcoin qui peut prendre de plusieurs heures à plusieurs jours. Un processeur à 2 ou 4 cœurs est recommandé.</p>
</dd>
<dt class="hdlist1">RAM</dt>
<dd>
<p>Un système avec 2 Go de RAM exécutera qu&#8217;à peine les nœuds Bitcoin et Lightning. Il fonctionnera beaucoup mieux avec au moins 4 Go de RAM. L&#8217;IBD sera particulièrement difficile avec moins de 4 Go de RAM. Plus de 8 Go de RAM sont inutiles car le CPU est le plus grand goulet d&#8217;étranglement pour ces types de services, en raison d&#8217;opérations cryptographiques telles que la validation de signature.</p>
</dd>
<dt class="hdlist1">Unité de stockage</dt>
<dd>
<p>Il peut s&#8217;agir d&#8217;un disque dur (HDD) ou d&#8217;un disque à semi-conducteurs (SSD).
Un SSD sera nettement plus rapide (mais plus cher) pour exécuter un nœud.
La majeure partie du stockage est utilisée par la blockchain Bitcoin, qui fait des centaines de gigaoctets.
Un compromis équitable (coût pour la complexité) consiste à acheter un petit SSD pour démarrer le système d&#8217;exploitation et un disque dur plus grand pour stocker des données volumineuses (principalement des bases de données).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note data-line-109">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-110">
<p>Les Raspberry Pis sont un choix courant pour exécuter un logiciel de nœud, en raison du coût et de la disponibilité des pièces.
Le système d&#8217;exploitation qui s&#8217;exécute sur l&#8217;appareil démarre généralement à partir d&#8217;une carte Secure Digital (SD).
Pour la plupart des cas d&#8217;utilisation, ce n&#8217;est pas un problème, mais Bitcoin Core est connu pour être lourd en E/S.
Vous devez vous assurer de placer la blockchain Bitcoin et le répertoire de données Lightning sur un autre lecteur, car des E/S intensives à long terme peuvent entraîner des défaillances avec une carte SD.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist data-line-116">
<dl>
<dt class="hdlist1">Connexion Internet</dt>
<dd>
<p>Une connexion Internet fiable est nécessaire pour télécharger de nouveaux blocs Bitcoin, ainsi que pour communiquer avec d&#8217;autres pairs Lightning. Pendant le fonctionnement, l&#8217;utilisation estimée des données varie de 10 à 100 Go par mois, selon la configuration. Au démarrage, un nœud complet Bitcoin télécharge la blockchain complète.</p>
</dd>
<dt class="hdlist1">Alimentation</dt>
<dd>
<p>Une alimentation électrique fiable est nécessaire car les nœuds Lightning doivent être en ligne à tout moment. Une panne de courant entraînera l&#8217;échec des paiements en cours. Pour les nœuds de routage à usage intensif, une alimentation de secours ou sans coupure (UPS) est utile en cas de panne de courant.
Idéalement, vous devriez également connecter votre routeur Internet à cet onduleur.</p>
</dd>
<dt class="hdlist1">Sauvegarde</dt>
<dd>
<p>La sauvegarde est cruciale car une panne peut entraîner une perte de données et donc une perte de fonds.
Vous devrez envisager une sorte de solution de sauvegarde des données. Il peut s&#8217;agir d&#8217;une sauvegarde automatisée basée sur le cloud vers un serveur ou un service Web que vous contrôlez. Alternativement, il peut s&#8217;agir d&#8217;une sauvegarde matérielle locale automatisée, telle qu&#8217;un deuxième disque dur. Pour de meilleurs résultats, les sauvegardes locales et distantes peuvent être combinées.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 data-line-124">
<h4 id="_changer_de_configuration_de_serveur_dans_le_cloud">Changer de configuration de serveur dans le cloud</h4>
<div class="paragraph data-line-126">
<p>Lors de la location d&#8217;un serveur cloud, il est souvent rentable de modifier la configuration entre deux phases de fonctionnement. Un processeur plus rapide et un stockage plus rapide seront nécessaires pendant l&#8217;IBD (par exemple, le premier jour). Une fois la blockchain synchronisée, les exigences en matière de vitesse de processeur et de stockage sont bien inférieures, de sorte que les performances peuvent être réduites à un niveau plus rentable.</p>
</div>
<div class="paragraph data-line-128">
<p>Par exemple, sur le cloud d&#8217;Amazon, nous utiliserions une RAM de 8 à 16 Go, un processeur à 8 cœurs (par exemple, t3-large ou m3.large) et un SSD de 400 Go plus rapide (plus de 1000 opérations d&#8217;entrée/sortie provisionnées par seconde [IOPS]) pour l&#8217;IBD, réduisant son temps à seulement 6-8 heures. Une fois cette opération terminée, nous basculerions l&#8217;instance de serveur sur une RAM de 2 Go, un processeur à 2 cœurs (par exemple, t3.small) et le stockage sur un disque dur à usage général de 1 To. Cela coûtera à peu près le même prix que si vous l&#8217;exécutiez sur le serveur le plus lent tout le temps, mais cela vous permettra d&#8217;être opérationnel en moins d&#8217;une journée au lieu d&#8217;avoir à attendre presque une semaine pour l&#8217;IBD.</p>
</div>
<div class="sect4 data-line-130">
<h5 id="_stockage_permanent_des_données_lecteur">Stockage permanent des données (lecteur)</h5>
<div class="paragraph data-line-132">
<p>Si vous utilisez un mini PC ou louez un serveur, le stockage peut être la partie la plus chère, coûtant autant comme l&#8217;ordinateur et la connectivité (données) additionnés.</p>
</div>
<div class="paragraph data-line-134">
<p>Voyons ensemble les différentes options disponibles. Premièrement, il existe deux principaux types de disques, les disques durs et les disques SSD. Les disques durs sont moins chers et les SSD sont plus rapides, mais les deux font le travail.</p>
</div>
<div class="paragraph data-line-136">
<p>Les SSD les plus rapides disponibles aujourd&#8217;hui utilisent l&#8217;interface NVMe ("Non-Volatile Memory Express" en anglais). Les SSD NVMe sont plus rapides dans les machines haut de gamme, mais aussi plus coûteux.
Les SSD traditionnels basés sur SATA sont moins chers, mais pas aussi rapides. Les SSD SATA fonctionnent suffisamment bien pour l&#8217;installation de votre nœud.
Les petits ordinateurs peuvent ne pas être en mesure de tirer parti des SSD NVMe.
Par exemple, le Raspberry Pi 4 ne peut pas en bénéficier à cause de la bande passante limitée de son port USB.</p>
</div>
<div class="paragraph data-line-141">
<p>Pour choisir la taille, regardons la blockchain Bitcoin. En août 2021, sa taille est de 360 Go, y compris l&#8217;indice de transactions, et augmente d&#8217;environ 60 Go par an. Si vous souhaitez avoir une certaine marge disponible pour une croissance future ou pour installer d&#8217;autres données sur votre nœud, achetez au moins un disque de 512 Go, ou mieux encore, un disque de 1 To.</p>
</div>
</div>
</div>
</div>
<div class="sect2 data-line-144">
<h3 id="helpers">Utilisation d&#8217;un installateur ou d&#8217;un assistant</h3>
<div class="paragraph data-line-146">
<p>L&#8217;installation d&#8217;un nœud Lightning ou d&#8217;un nœud Bitcoin peut être intimidante si vous n&#8217;êtes pas familier avec un environnement de ligne de commande. Heureusement, il existe un certain nombre de projets qui proposent des "assistants", c&#8217;est-à-dire des logiciels qui installent et configurent les différents composants pour vous. Vous aurez toujours besoin d&#8217;apprendre quelques incantations en ligne de commande pour interagir avec votre nœud, mais la plupart du travail initial est fait pour vous.</p>
</div>
<div class="sect3 data-line-148">
<h4 id="_raspiblitz">RaspiBlitz</h4>
<div class="paragraph data-line-150">
<p>L&#8217;un des "assistant" les plus populaires et les plus complets est <em>RaspiBlitz</em> (<a href="#RaspiBlitz">Un nœud RaspiBlitz</a>), un projet construit par Christian Rotzoll. Il est destiné à être installé sur un Raspberry Pi 4. RaspiBlitz est livré avec un kit matériel recommandé que vous pouvez construire en quelques heures ou tout au plus un week-end. Si vous assistez à un "hackathon" Lightning dans votre ville, vous verrez probablement de nombreuses personnes travailler sur leur configuration RaspiBlitz, échanger des conseils et s&#8217;entraider. Vous pouvez trouver le projet RaspiBlitz sur <a href="https://github.com/rootzoll/raspiblitz" data-href="https://github.com/rootzoll/raspiblitz">GitHub</a>.</p>
</div>
<div class="paragraph data-line-152">
<p>En plus d&#8217;un nœud Bitcoin et Lightning, RaspiBlitz peut installer un certain nombre de services supplémentaires, tels que :</p>
</div>
<div class="ulist data-line-154">
<ul>
<li class="data-line-154">
<p>Tor (exécuté en tant que service caché)</p>
</li>
<li class="data-line-155">
<p>ElectRS (serveur Electrum en Rust)</p>
</li>
<li class="data-line-156">
<p>Serveur BTCPay (processeur de paiement en cryptomonnaie)</p>
</li>
<li class="data-line-157">
<p>Explorateur BTC RPC (explorateur de blockchain Bitcoin)</p>
</li>
<li class="data-line-158">
<p>Ride The Lightning (interface graphique de gestion de nœuds Lightning)</p>
</li>
<li class="data-line-159">
<p>LNbits (porte-monnaie Lightning/système de comptes)</p>
</li>
<li class="data-line-160">
<p>Spectre Desktop (multisig Trezor, Ledger, porte-monnaie Coldcard et Spectre-DIY)</p>
</li>
<li class="data-line-161">
<p>lndmanage (interface de ligne de commande pour la gestion avancée de canaux)</p>
</li>
<li class="data-line-162">
<p>Loop (service d&#8217;échanges sous-marins)</p>
</li>
<li class="data-line-163">
<p>Join Market (service CoinJoin)</p>
</li>
</ul>
</div>
<div id="RaspiBlitz" class="imageblock data-line-167">
<div class="content">
<img src="images/mtln_0501.png" alt="mtln 0501">
</div>
<div class="title">Figure 1. Un nœud RaspiBlitz</div>
</div>
</div>
<div class="sect3 data-line-169">
<h4 id="_mynode">myNode</h4>
<div class="paragraph data-line-171">
<p><a href="https://mynodebtc.com" data-href="https://mynodebtc.com"><em>myNode</em></a> est un autre projet "d&#8217;assistant" open source populaire comprenant beaucoup de logiciels liés au Bitcoin. Il est facile à installer : vous « flashez » le programme d&#8217;installation sur une carte SD et démarrez votre mini PC à partir de la carte SD. Vous n&#8217;avez besoin d&#8217;aucun moniteur pour utiliser myNode car les outils d&#8217;administration sont accessibles à distance depuis un navigateur. Si votre mini PC n&#8217;a pas d&#8217;écran, de souris ou de clavier, vous pouvez le gérer depuis un autre ordinateur ou même depuis votre smartphone. Une fois installé, rendez-vous sur <a href="http://mynode.local" class="undefined" data-href="http://mynode.local">http://mynode.local</a> et créez un porte-monnaie et un nœud Lightning en deux clics.</p>
</div>
<div class="paragraph data-line-173">
<p>En plus d&#8217;un nœud Bitcoin et Lightning, myNode peut éventuellement installer une variété de services supplémentaires, tels que :</p>
</div>
<div class="ulist data-line-175">
<ul>
<li class="data-line-175">
<p>Ride The Lightning (interface graphique de gestion de nœuds Lightning)</p>
</li>
<li class="data-line-176">
<p>OpenVPN (prise en charge du réseau privé virtuel [VPN] pour la gestion à distance ou le porte-monnaie)</p>
</li>
<li class="data-line-177">
<p>lndmanage (interface de ligne de commande pour la gestion avancée de canaux)</p>
</li>
<li class="data-line-178">
<p>BTC RPC Explorer (un explorateur de blockchain Bitcoin)</p>
</li>
</ul>
</div>
</div>
<div class="sect3 data-line-180">
<h4 id="_umbrel">Umbrel</h4>
<div class="paragraph data-line-182">
<p>Célèbres pour leur UX/UI (démontrée dans <a href="#umbrel">L&#8217;interface Web d&#8217;Umbrel</a>), <em>Umbrel</em> fournit un moyen très simple et accessible de faire fonctionner votre nœud Bitcoin et Lightning en un rien de temps, en particulier pour les débutants. Une caractéristique très distinctive est qu&#8217;Umbrel utilise Neutrino/SPV pendant l&#8217;IBD afin que vous puissiez commencer instantanément à utiliser votre nœud. Une fois que Bitcoin Core est entièrement synchronisé en arrière-plan, il bascule automatiquement et désactive le mode SPV. Umbrel OS prend en charge le Raspberry Pi 4 et peut également être installé sur n&#8217;importe quel système d&#8217;exploitation basé sur Linux ou sur une machine virtuelle sous macOS ou Windows. Vous pouvez également connecter n&#8217;importe quel porte-monnaie prenant en charge Bitcoin Core P2P, Bitcoin Core RPC, le protocole Electrum ou lndconnect.</p>
</div>
<div class="paragraph data-line-184">
<p>Il n&#8217;est pas nécessaire d&#8217;attendre un jour de pluie &mdash; vous pouvez vous rendre directement sur <a href="https://getumbrel.com" data-href="https://getumbrel.com">Umbrel</a> pour en savoir plus.</p>
</div>
<div id="umbrel" class="imageblock data-line-188">
<div class="content">
<img src="images/mtln_0502.png" alt="L&#8217;interface Web d&#8217;Umbrel">
</div>
<div class="title">Figure 2. L&#8217;interface Web d&#8217;Umbrel</div>
</div>
<div class="paragraph data-line-190">
<p>En plus d&#8217;un nœud Bitcoin et Lightning, Umbrel a introduit l&#8217;App Store Umbrel, où vous pouvez facilement installer des services supplémentaires, tels que :</p>
</div>
<div class="ulist data-line-192">
<ul>
<li class="data-line-192">
<p>Lightning Terminal (interface de gestion de la liquidité de canaux, Loop In et Loop Out)</p>
</li>
<li class="data-line-193">
<p>Ride The Lightning (interface graphique de gestion de nœuds Lightning)</p>
</li>
<li class="data-line-194">
<p>Spectre Desktop (coordinateur de surveillance uniquement pour les porte-monnaie Bitcoin multisignature et à clé unique)</p>
</li>
<li class="data-line-195">
<p>Serveur BTCPay (processeur de paiement en cryptomonnaie)</p>
</li>
<li class="data-line-196">
<p>Explorateur BTC RPC (explorateur de blockchain Bitcoin)</p>
</li>
<li class="data-line-197">
<p>ThunderHub (surveiller et gérer votre nœud)</p>
</li>
<li class="data-line-198">
<p>Sphinx Relay (gestion de la connectivité et du stockage pour le chat Sphinx)</p>
</li>
<li class="data-line-199">
<p>mempool.space (visualiseur de mempool et explorateur de blocs)</p>
</li>
<li class="data-line-200">
<p>LNbits (porte-monnaie Lightning/système de comptes)</p>
</li>
</ul>
</div>
<div class="paragraph data-line-202">
<p>Umbrel est actuellement encore en version bêta et n&#8217;est pas considéré comme sécurisé.</p>
</div>
</div>
<div class="sect3 data-line-204">
<h4 id="_btcpay_server">BTCPay Server</h4>
<div class="paragraph data-line-206">
<p>Bien qu&#8217;elle ne soit pas initialement conçue pour être un "assistant" d&#8217;installation, la plateforme de commerce électronique et de paiement <em>BTCPay Server</em> dispose d&#8217;un système d&#8217;installation incroyablement simple qui utilise des conteneurs Docker et docker-compose pour installer un nœud Bitcoin, un nœud Lightning et une passerelle de paiement, parmi de nombreux autres services. Il peut être installé sur une variété de plateformes matérielles, d&#8217;un simple Raspberry Pi 4 (4 Go recommandés) à un mini PC ou un ancien ordinateur portable, de bureau ou un serveur.</p>
</div>
<div class="paragraph data-line-208">
<p><a href="https://btcpayserver.org" data-href="https://btcpayserver.org">BTCPay Server</a> est une plateforme de commerce électronique entièrement hébergée et autonome qui peut être intégrée à de nombreuses plateformes de commerce électronique, telles que WordPress WooCommerce et autres. L&#8217;installation du nœud complet n&#8217;est qu&#8217;une étape de l&#8217;installation de la plateforme de commerce électronique.
Bien qu&#8217;initialement développé comme un remplacement fonctionnalité par fonctionnalité du service de paiement commercial <em>BitPay</em> et de son API, il a évolué au-delà pour devenir une plateforme complète pour les services BTC et Lightning liés au commerce électronique. Pour de nombreux vendeurs ou magasins, il s&#8217;agit d&#8217;une solution clé en main pour le commerce électronique.</p>
</div>
<div class="paragraph data-line-211">
<p>En plus d&#8217;un nœud Bitcoin et Lightning, BTCPay Server peut également installer une variété de services, notamment :</p>
</div>
<div class="ulist data-line-213">
<ul>
<li class="data-line-213">
<p>Un nœud Lightning <code>c-lightning</code> ou LND</p>
</li>
<li class="data-line-214">
<p>Prise en charge de Litecoin</p>
</li>
<li class="data-line-215">
<p>Prise en charge de Monero</p>
</li>
<li class="data-line-216">
<p>Serveur Spark (porte-monnaie Web <code>c-lightning</code>)</p>
</li>
<li class="data-line-217">
<p>Serveur Charge (API de commerce électronique <code>c-lightning</code>)</p>
</li>
<li class="data-line-218">
<p>Ride The Lightning (interface graphique Web de gestion de nœuds Lightning)</p>
</li>
<li class="data-line-219">
<p>De nombreux forks de BTC</p>
</li>
<li class="data-line-220">
<p>BTCTransmuter (service d&#8217;automatisation d&#8217;événement-action prenant en charge l&#8217;échange de devises)</p>
</li>
</ul>
</div>
<div class="paragraph data-line-222">
<p>Le nombre de services et de fonctionnalités supplémentaires augmente rapidement, de sorte que la liste précédente n&#8217;est qu&#8217;un petit sous-ensemble de ce qui est disponible sur la plateforme BTCPay Server.</p>
</div>
</div>
<div class="sect3 data-line-224">
<h4 id="_nœud_bitcoin_ou_lightning_léger">Nœud Bitcoin ou Lightning léger</h4>
<div class="paragraph data-line-226">
<p>Un choix critique pour votre installation sera celui du nœud Bitcoin et de sa configuration. <em>Bitcoin Core</em>, l&#8217;implémentation de référence, est le choix le plus courant mais pas l&#8217;unique choix disponible. Un choix alternatif est <em>btcd</em>, qui est une implémentation en langage Go de nœud Bitcoin. btcd prend en charge certaines fonctionnalités utiles pour exécuter un nœud LND Lightning et qui ne sont pas disponibles avec Bitcoin Core.</p>
</div>
<div class="paragraph data-line-228">
<p>Une deuxième considération est de savoir si vous exécuterez un nœud Bitcoin <em>d&#8217;archivage</em> avec une copie complète de la blockchain (environ 350 Go à la mi-2021) ou une blockchain <em>réduite</em> ("pruned" en anglais) qui ne conserve que les blocs les plus récents. Une blockchain réduite peut vous faire économiser de l&#8217;espace disque, mais vous devrez toujours télécharger la blockchain complète au moins une fois (pendant l&#8217;IBD). Par conséquent, cela ne vous fera pas économiser de trafic réseau. L&#8217;utilisation d&#8217;un nœud réduit pour exécuter un nœud Lightning est toujours une possibilité expérimentale et peut ne pas prendre en charge toutes les fonctionnalités. Cependant, de nombreuses personnes exécutent un nœud comme celui-ci avec succès.</p>
</div>
<div class="paragraph data-line-230">
<p>Enfin, vous avez également la possibilité de ne pas exécuter de nœud Bitcoin du tout. Au lieu de cela, vous pouvez utiliser le nœud LND Lightning en mode "léger" ("lightweight" en anglais), en utilisant le protocole Neutrino pour récupérer les informations de la blockchain à partir des nœuds publics Bitcoin exploités par d&#8217;autres. L&#8217;exécuter ainsi signifie que vous prenez des ressources du réseau Bitcoin sans en offrir en retour. À la place, vous offrez vos ressources et contribuez à la communauté LN. Pour les nœuds Lightning plus petits, cela réduira généralement le trafic réseau par rapport à l&#8217;exécution d&#8217;un nœud Bitcoin complet.</p>
</div>
<div class="paragraph data-line-232">
<p>Gardez à l&#8217;esprit que l&#8217;exploitation d&#8217;un nœud Bitcoin vous permet de prendre en charge d&#8217;autres services, en plus et en plus d&#8217;un nœud Lightning. Ces autres services peuvent nécessiter un nœud Bitcoin d&#8217;archivage (non réduit) et ne peuvent souvent pas fonctionner sans nœud Bitcoin. Considérez dès le départ quels autres services vous pourriez vouloir exécuter maintenant ou à l&#8217;avenir pour prendre une décision éclairée sur le type de nœud Bitcoin que vous sélectionnez.</p>
</div>
<div class="paragraph data-line-234">
<p>L&#8217;essentiel de cette décision est : si vous pouvez vous permettre un disque de plus de 500 Go, exécutez un nœud Bitcoin d&#8217;archivage complet. Vous apporterez des ressources au système Bitcoin et aiderez les autres qui n&#8217;ont pas les moyens de le faire. Si vous ne pouvez pas vous permettre un disque aussi gros, exécutez un nœud réduit. Si vous ne pouvez pas vous permettre le disque ou la bande passante même pour un nœud élagué, exécutez un nœud LND léger sur Neutrino.</p>
</div>
</div>
<div class="sect3 data-line-236">
<h4 id="_choix_du_système_dexploitation">Choix du système d&#8217;exploitation</h4>
<div class="paragraph data-line-238">
<p>L&#8217;étape suivante consiste à sélectionner un système d&#8217;exploitation pour votre nœud. La grande majorité des serveurs Internet fonctionnent sur une variante de Linux. Linux est la plateforme de choix pour Internet car il s&#8217;agit d&#8217;un puissant système d&#8217;exploitation open source. Linux, cependant, a une courbe d&#8217;apprentissage abrupte et nécessite une familiarité avec un environnement de ligne de commande. C&#8217;est souvent intimidant pour les nouveaux utilisateurs.</p>
</div>
<div class="paragraph data-line-240">
<p>En fin de compte, la plupart des services peuvent être exécutés sur n&#8217;importe quel système d&#8217;exploitation POSIX moderne, y compris macOS, Windows et bien sûr Linux. Votre choix doit être davantage motivé par votre familiarité et votre confort avec un système d&#8217;exploitation et vos objectifs d&#8217;apprentissage. Si vous souhaitez approfondir vos connaissances et apprendre à utiliser un système Linux, c&#8217;est une excellente occasion de le faire avec un projet spécifique et un objectif clair. Si vous voulez juste qu&#8217;un nœud soit opérationnel, utilisez ce que vous connaissez.</p>
</div>
<div class="paragraph data-line-242">
<p>De nos jours, de nombreux services sont également délivrés sous forme de conteneurs, généralement basés sur le système Docker. Ces conteneurs peuvent être déployés sur une variété de systèmes d&#8217;exploitation, en faisant abstraction du système d&#8217;exploitation sous-jacent. Vous devrez peut-être néanmoins apprendre certaines commandes de la ligne de commande de Linux, car la plupart des conteneurs exécutent une variante de Linux en interne.</p>
</div>
</div>
</div>
<div class="sect2 data-line-244">
<h3 id="_choisissez_votre_implémentation_de_nœud_lightning">Choisissez votre implémentation de nœud Lightning</h3>
<div class="paragraph data-line-246">
<p>Comme pour le choix du système d&#8217;exploitation, votre choix d&#8217;implémentation de nœud Lightning doit dépendre principalement de votre familiarité avec le langage de programmation et les outils de développement utilisés par les projets. Bien qu&#8217;il existe quelques petites différences de fonctionnalités entre les différentes implémentations de nœuds, celles-ci sont relativement mineures et la plupart des implémentations convergent vers les normes communes définies dans les BOLT.</p>
</div>
<div class="paragraph data-line-248">
<p>La connaissance du langage de programmation et du système de compilation, en revanche, sont de bonnes bases pour choisir un nœud. En effet, l&#8217;installation, la configuration, la maintenance continue et le dépannage impliqueront tous d&#8217;interagir avec les différents outils utilisés par le système de compilation. Ceci comprend :</p>
</div>
<div class="ulist data-line-250">
<ul>
<li class="data-line-250">
<p>Utilitaires Make, Autotools et GNU pour <code>c-lightning</code></p>
</li>
<li class="data-line-251">
<p>Utilitaires Go pour LND</p>
</li>
<li class="data-line-252">
<p>Java/Maven pour Eclair</p>
</li>
</ul>
</div>
<div class="paragraph data-line-254">
<p>Le langage de programmation influence non seulement le choix du système de compilation, mais également de nombreux autres aspects du programme. Chaque langage de programmation est livré avec une philosophie de conception complète et affecte de nombreux autres aspects, tels que :</p>
</div>
<div class="ulist data-line-256">
<ul>
<li class="data-line-256">
<p>Format et syntaxe des fichiers de configuration</p>
</li>
<li class="data-line-257">
<p>Emplacements des fichiers (dans le système de fichiers)</p>
</li>
<li class="data-line-258">
<p>Arguments de ligne de commande et leur syntaxe</p>
</li>
<li class="data-line-259">
<p>Formatage des messages d&#8217;erreur</p>
</li>
<li class="data-line-260">
<p>Bibliothèques pré-requises</p>
</li>
<li class="data-line-261">
<p>Interfaces d&#8217;appel de procédure à distance (RPC)</p>
</li>
</ul>
</div>
<div class="paragraph data-line-263">
<p>Lorsque vous choisissez votre nœud Lightning, vous choisissez également toutes les caractéristiques susmentionnées. Ainsi, votre familiarité avec ces outils et ces philosophies de conception facilitera l&#8217;exécution d&#8217;un nœud. Ou la rendra plus difficile, si vous vous retrouvez dans un domaine inconnu.</p>
</div>
<div class="paragraph data-line-265">
<p>D&#8217;un autre côté, s&#8217;il s&#8217;agit de votre première incursion dans l&#8217;environnement de la ligne de commande et des serveurs/services, vous ne serez pas familiarisé avec les implémentations et aurez l&#8217;opportunité d&#8217;apprendre quelque chose de complètement nouveau. Dans ce cas, vous voudrez peut-être décider en fonction d&#8217;un certain nombre d&#8217;autres facteurs, tels que :</p>
</div>
<div class="ulist data-line-267">
<ul>
<li class="data-line-267">
<p>Qualité des forums de support et des salons de chat</p>
</li>
<li class="data-line-268">
<p>Qualité de la documentation</p>
</li>
<li class="data-line-269">
<p>Degré d&#8217;intégration avec d&#8217;autres outils que vous souhaitez exécuter</p>
</li>
</ul>
</div>
<div class="paragraph data-line-271">
<p>Enfin, vous souhaiterez peut-être examiner les performances et la fiabilité des différentes implémentations de nœuds. Ceci est particulièrement important si vous utilisez ce nœud dans un environnement de production et que vous vous attendez à un trafic important et à des exigences de fiabilité élevées. Cela peut être le cas si vous envisagez de faire fonctionner le système de paiement d&#8217;une boutique.</p>
</div>
</div>
<div class="sect2 data-line-273">
<h3 id="_installer_un_nœud_bitcoin_ou_lightning">Installer un nœud Bitcoin ou Lightning</h3>
<div class="paragraph data-line-275">
<p>Vous avez décidé de ne pas utiliser "d&#8217;assistant" d&#8217;installation et à la place de plonger dans la ligne de commande d&#8217;un système d&#8217;exploitation Linux ? C&#8217;est une décision courageuse, et nous essaierons de vous aider à la mettre en œuvre. Si vous préférez ne pas essayer de le faire manuellement, envisagez d&#8217;utiliser une application qui vous aide à installer le logiciel de nœud ou une solution basée sur un conteneur, comme décrit dans <a href="#helpers">Utilisation d&#8217;un installateur ou d&#8217;un assistant</a>.</p>
</div>
<div class="admonitionblock warning data-line-278">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph data-line-279">
<p>Cette section approfondira le sujet avancé de l&#8217;administration système à partir de la ligne de commande. L&#8217;administration Linux est un ensemble de compétences qui n&#8217;entre pas dans le cadre de ce livre. C&#8217;est un sujet compliqué et les pièges sont nombreux. Procédez avec prudence !</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-282">
<p>Dans les prochaines sections, nous décrirons brièvement comment installer et configurer un nœud Bitcoin et Lightning sur un système d&#8217;exploitation Linux. Vous devrez consulter les instructions d&#8217;installation des applications de nœud Bitcoin et Lightning spécifiques que vous avez décidé d&#8217;utiliser. Vous pouvez généralement les trouver dans un fichier appelé <em>INSTALL</em> ou dans le sous-répertoire <em>docs</em> de chaque projet. Nous ne décrirons que certaines des étapes communes qui s&#8217;appliquent à tous ces services, et les instructions que nous proposons seront nécessairement incomplètes.</p>
</div>
<div class="sect3 data-line-284">
<h4 id="_services_en_arrière_plan">Services en arrière-plan</h4>
<div class="paragraph data-line-286">
<p>Pour ceux qui sont habitués à exécuter des applications sur leur ordinateur de bureau ou leur smartphone, une application a toujours une interface utilisateur graphique même si elle peut s&#8217;exécutent parfois en arrière-plan. Les applications de nœud Bitcoin et Lightning sont cependant très différentes. Ces applications n&#8217;ont pas d&#8217;interface utilisateur graphique intégrée. Au lieu de cela, elles s&#8217;exécutent en tant que services <em>headless</em> en arrière-plan, ce qui signifie qu&#8217;elles fonctionnent toujours en arrière-plan et n&#8217;interagissent pas directement avec l&#8217;utilisateur.</p>
</div>
<div class="paragraph data-line-288">
<p>Cela peut créer une certaine confusion pour les utilisateurs qui ne sont pas habitués à exécuter des services en arrière-plan. Comment savez-vous si un tel service est actuellement en cours d&#8217;exécution ? Comment le démarrer et l&#8217;arrêter ? Comment interagissez-vous avec lui ? Les réponses à ces questions dépendent du système d&#8217;exploitation que vous utilisez. Pour l&#8217;instant, nous supposerons que vous utilisez une variante Linux et y répondrons dans ce contexte.</p>
</div>
</div>
<div class="sect3 data-line-290">
<h4 id="_isolement_de_processus">Isolement de processus</h4>
<div class="paragraph data-line-292">
<p>Les services en arrière-plan s&#8217;exécutent généralement sous un compte d&#8217;utilisateur spécifique pour les isoler du système d&#8217;exploitation et les uns des autres. Par exemple, Bitcoin Core est configuré pour s&#8217;exécuter en tant qu&#8217;utilisateur bitcoin. Vous devrez utiliser la ligne de commande pour créer un utilisateur pour chacun des services que vous exécutez.</p>
</div>
<div class="paragraph data-line-294">
<p>De plus, si vous avez connecté un lecteur externe, vous devrez indiquer au système d&#8217;exploitation de déplacer le répertoire personnel de l&#8217;utilisateur sur ce lecteur. En effet, un service comme Bitcoin Core créera des fichiers dans le répertoire personnel de l&#8217;utilisateur. Si vous le configurez pour télécharger la blockchain complète de Bitcoin, ces fichiers prendront plusieurs centaines de gigaoctets. Ici, nous supposons que vous avez connecté le lecteur externe et qu&#8217;il se trouve sur le chemin <em>/external_drive/</em> du système d&#8217;exploitation.</p>
</div>
<div class="paragraph data-line-296">
<p>Sur la plupart des systèmes Linux, vous pouvez créer un nouvel utilisateur avec la commande useradd, comme ceci :</p>
</div>
<div class="listingblock data-line-298">
<div class="content">
<pre>$ sudo useradd -m -d /external_drive/bitcoin -s /dev/null bitcoin</pre>
</div>
</div>
<div class="paragraph data-line-302">
<p>Les options m et d créent le répertoire personnel de l&#8217;utilisateur comme spécifié par <em>/external_drive/bitcoin</em> dans ce cas. L&#8217;option s assigne le shell interactif de l&#8217;utilisateur. Dans ce cas, nous le définissons sur <em>/dev/null</em> pour désactiver l&#8217;utilisation du shell interactif. Le dernier argument est le nom d&#8217;utilisateur bitcoin du nouvel utilisateur.</p>
</div>
</div>
<div class="sect3 data-line-304">
<h4 id="_démarrage_du_nœud">Démarrage du nœud</h4>
<div class="paragraph data-line-306">
<p>Pour les services de nœud Bitcoin et Lightning, "l&#8217;installation" implique également la création d&#8217;un <em>script de démarrage</em> pour s&#8217;assurer que le nœud démarre lors du démarrage de l&#8217;ordinateur. Le démarrage et l&#8217;arrêt des services en arrière-plan sont gérés par un processus du système d&#8217;exploitation, qui sous Linux est appelé init ou systemd. Vous pouvez généralement trouver un script de démarrage système dans le sous-répertoire contrib de chaque projet. Par exemple, si vous utilisez un système d&#8217;exploitation Linux moderne qui utilise + systemd +, vous trouverez un script appelé <em>bitcoind.service</em> qui peut démarrer et arrêter le service de nœud Bitcoin Core.</p>
</div>
<div class="paragraph data-line-308">
<p>Voici un exemple de ce à quoi ressemble le script de démarrage d&#8217;un nœud Bitcoin, tiré du dépôt de code Bitcoin Core :</p>
</div>
<div class="listingblock data-line-311">
<div class="title">Depuis bitcoin/contrib/init/bitcoind.service</div>
<div class="content">
<pre>[Unit]
Description=Bitcoin daemon
After=network.target

[Service]
ExecStart=/usr/bin/bitcoind -daemon \
                            -pid=/run/bitcoind/bitcoind.pid \
                            -conf=/etc/bitcoin/bitcoin.conf \
                            -datadir=/var/lib/bitcoind

# Make sure the config directory is readable by the service user
PermissionsStartOnly=true
ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin

# Process management
####################

Type=forking
PIDFile=/run/bitcoind/bitcoind.pid
Restart=on-failure
TimeoutStopSec=600

# Directory creation and permissions
####################################

# Run as bitcoin:bitcoin
User=bitcoin
Group=bitcoin

# /run/bitcoind
RuntimeDirectory=bitcoind
RuntimeDirectoryMode=0710

# /etc/bitcoin
ConfigurationDirectory=bitcoin
ConfigurationDirectoryMode=0710

# /var/lib/bitcoind
StateDirectory=bitcoind
StateDirectoryMode=0710

[...]

[Install]
WantedBy=multi-user.target</pre>
</div>
</div>
<div class="paragraph data-line-359">
<p>En tant qu&#8217;utilisateur root, installez le script en le copiant dans le dossier de service systemd <em>/lib/systemd/system/</em> puis rechargez systemd :</p>
</div>
<div class="listingblock data-line-361">
<div class="content">
<pre>$ sudo systemctl daemon-reload</pre>
</div>
</div>
<div class="paragraph pagebreak-before data-line-366">
<p>Ensuite, activez le service :</p>
</div>
<div class="listingblock data-line-368">
<div class="content">
<pre>$ sudo systemctl enable bitcoind</pre>
</div>
</div>
<div class="paragraph data-line-372">
<p>Vous pouvez maintenant démarrer et arrêter le service. Ne le démarrez pas encore, car nous n&#8217;avons pas configuré le nœud Bitcoin.</p>
</div>
<div class="listingblock data-line-374">
<div class="content">
<pre>$ sudo systemctl start bitcoind
$ sudo systemctl stop bitcoind</pre>
</div>
</div>
</div>
<div class="sect3 data-line-379">
<h4 id="_configuration_du_nœud">Configuration du nœud</h4>
<div class="paragraph data-line-381">
<p>Pour configurer votre nœud, vous devez créer et référencer un fichier de configuration. Par convention, ce fichier est généralement créé dans <em>/etc</em>, sous un répertoire portant le nom du programme. Par exemple, les configurations Bitcoin Core et LND seraient généralement stockées dans <em>/etc/bitcoin/bitcoin.conf</em> et
<em>/etc/lnd/lnd.conf</em>, respectivement.</p>
</div>
<div class="paragraph data-line-384">
<p>Ces fichiers de configuration sont des fichiers texte dont chaque ligne exprime une option de configuration et sa valeur. Les valeurs par défaut sont supposées pour tout ce qui n&#8217;est pas défini dans le fichier de configuration. Vous pouvez voir quelles options peuvent être définies dans la configuration de deux manières. Tout d&#8217;abord, l&#8217;exécution de l&#8217;application de nœud avec un argument help affichera les options qui peuvent être définies sur la ligne de commande. Ces mêmes options peuvent être définies dans le fichier de configuration. Deuxièmement, vous pouvez généralement trouver un exemple de fichier de configuration, avec toutes les options par défaut, dans le dépôt de code du logiciel.</p>
</div>
<div class="paragraph data-line-386">
<p>Vous pouvez trouver un exemple de fichier de configuration dans chacune des images Docker que nous avons utilisées dans <a href="#set_up_a_lightning_node">[set_up_a_lightning_node]</a>. Par exemple, le fichier <em>code/docker/bitcoind/bitcoind/bitcoin.conf</em> :</p>
</div>
<div class="listingblock data-line-389">
<div class="title">Fichier de configuration pour le conteneur Docker bitcoind (code/docker/bitcoind/bitcoind/bitcoin.conf)</div>
<div class="content">
<pre>Unresolved directive in &lt;stdin&gt; - include::code/docker/bitcoind/bitcoind/bitcoin.conf[]</pre>
</div>
</div>
<div class="paragraph data-line-393">
<p>Ce fichier de configuration particulier configure Bitcoin Core pour un fonctionnement en tant que nœud regtest et fournit un nom d&#8217;utilisateur et un mot de passe peu sécurisé pour l&#8217;accès à distance, vous ne devez donc pas l&#8217;utiliser pour la configuration de votre nœud. Cependant, il sert à illustrer la syntaxe d&#8217;un fichier de configuration et vous pouvez y apporter des ajustements dans le conteneur Docker pour expérimenter différentes options. Voyez si vous pouvez utiliser la commande bitcoind -help pour comprendre ce que fait chacune des options dans le contexte du réseau Docker que nous avons construit dans <a href="#set_up_a_lightning_node">[set_up_a_lightning_node]</a>.</p>
</div>
<div class="paragraph data-line-395">
<p>Souvent, les valeurs par défaut suffisent et, avec quelques modifications, votre logiciel de nœud peut être configuré rapidement. Pour faire fonctionner un nœud Bitcoin Core avec une personnalisation minimale, vous n&#8217;avez besoin que de quatre lignes de configuration :</p>
</div>
<div class="listingblock data-line-398">
<div class="content">
<pre class="highlight"><code>server=1
daemon=1
txindex=1
rpcuser=<em>USERNAME</em>
rpcpassword=<em>PASSWORD</em></code></pre>
</div>
</div>
<div class="paragraph data-line-406">
<p>Même l&#8217;option txindex n&#8217;est pas strictement nécessaire, même si elle garantira que votre nœud Bitcoin crée un index de toutes les transactions, ce qui est requis pour certaines applications. L&#8217;option txindex n&#8217;est pas requise pour exécuter un nœud Lightning.</p>
</div>
<div class="paragraph data-line-408">
<p>Un nœud Lightning <code>c-lightning</code> s&#8217;exécutant sur le même serveur ne nécessite également que quelques lignes dans la configuration :</p>
</div>
<div class="listingblock data-line-411">
<div class="content">
<pre class="highlight"><code>network=mainnet
bitcoin-rpcuser=<em>USERNAME</em>
bitcoin-rpcpassword=<em>PASSWORD</em></code></pre>
</div>
</div>
<div class="paragraph data-line-417">
<p>En général, c&#8217;est une bonne idée de minimiser le degré de personnalisation de ces systèmes. La configuration par défaut est soigneusement conçue pour prendre en charge les déploiements les plus courants. Si vous modifiez une valeur par défaut, cela peut entraîner des problèmes ultérieurement ou réduire les performances de votre nœud. Bref, ne modifiez que lorsque c&#8217;est nécessaire !</p>
</div>
</div>
<div class="sect3 data-line-419">
<h4 id="_configuration_réseau">Configuration réseau</h4>
<div class="paragraph data-line-421">
<p> La configuration du réseau n&#8217;est normalement pas un problème lors de la configuration d&#8217;une nouvelle application. Cependant, les réseaux pair-à-pair comme Bitcoin et le Lightning Network présentent des défis uniques pour la configuration du réseau.</p>
</div>
<div class="paragraph data-line-423">
<p>Dans un service centralisé, votre ordinateur se connecte aux "gros serveurs" d&#8217;une entreprise, et non l&#8217;inverse. Votre connexion Internet à domicile est en fait configurée sur l&#8217;hypothèse que vous êtes simplement un consommateur de services fournis par d&#8217;autres. Mais dans un système pair-à-pair, chaque pair consomme et fournit des services à d&#8217;autres nœuds. Si vous utilisez un nœud Bitcoin ou Lightning chez vous, vous fournissez un service à d&#8217;autres ordinateurs sur Internet. Votre service Internet par défaut n&#8217;est pas configuré pour vous permettre d&#8217;exécuter des serveurs et peut nécessiter une configuration supplémentaire pour permettre à d&#8217;autres d&#8217;accéder à votre nœud.</p>
</div>
<div class="paragraph data-line-425">
<p>Si vous souhaitez exécuter un nœud Bitcoin ou Lightning, vous devez permettre à d&#8217;autres nœuds sur Internet de se connecter à vous. Cela signifie activer les connexions TCP entrantes vers le port Bitcoin (port 8333 par défaut) ou le port Lightning (port 9735 par défaut). Bien que vous puissiez exécuter un nœud Bitcoin sans connectivité entrante, vous ne pouvez pas le faire avec un nœud Lightning. Un nœud Lightning doit être accessible aux autres depuis l&#8217;extérieur de votre réseau.</p>
</div>
<div class="paragraph data-line-427">
<p>Par défaut, votre routeur Internet domestique n&#8217;attend pas de connexions entrantes de l&#8217;extérieur et, en fait, les connexions entrantes sont bloquées. L&#8217;adresse IP de votre routeur Internet est la seule adresse IP accessible de l&#8217;extérieur, et tous les ordinateurs que vous utilisez à l&#8217;intérieur de votre réseau domestique partagent cette adresse IP unique. Ceci est réalisé par un mécanisme appelé <em>Network Address Translation</em> (<em>NAT</em>), qui permet à votre routeur Internet d&#8217;agir comme intermédiaire pour toutes les connexions sortantes. Si vous souhaitez autoriser une connexion entrante, vous devez configurer <em>redirection de port</em> ("port forwarding" en anglais), qui indique à votre routeur Internet que les connexions entrantes sur des ports spécifiques doivent être transférées vers des ordinateurs spécifiques à l&#8217;intérieur du réseau. Vous pouvez le faire manuellement en modifiant la configuration de votre routeur Internet ou, si votre routeur le prend en charge, via un mécanisme de transfert de port automatique appelé <em>Universal Plug and Play</em> (<em>UPnP</em>).</p>
</div>
<div class="paragraph data-line-429">
<p>Un mécanisme alternatif à la redirection de port consiste à activer The Onion Router (Tor), qui fournit une sorte de superposition de réseau privé virtuel qui permet les connexions entrantes vers une <em>adresse "onion"</em>. Si vous exécutez Tor, vous n&#8217;avez pas besoin de faire de transfert de port ou d&#8217;activer les connexions entrantes vers les ports Bitcoin ou Lightning. Si vous exécutez vos nœuds à l&#8217;aide de Tor, tout le trafic passe par Tor et aucun autre port n&#8217;est utilisé.</p>
</div>
<div class="paragraph data-line-431">
<p>Examinons différentes manières de permettre à d&#8217;autres de se connecter à votre nœud. Nous examinerons ces alternatives dans l&#8217;ordre, du plus simple au plus difficile.</p>
</div>
<div class="sect4 data-line-433">
<h5 id="_ça_marche">Ça marche !</h5>
<div class="paragraph data-line-435">
<p>Il est possible que votre fournisseur de services Internet ou votre routeur soit configuré pour prendre en charge UPnP par défaut et que tout fonctionne automatiquement. Essayons d&#8217;abord cette approche, juste au cas où nous aurions de la chance.</p>
</div>
<div class="paragraph data-line-437">
<p>En supposant que vous ayez déjà un nœud Bitcoin ou Lightning en cours d&#8217;exécution, nous essaierons de voir s&#8217;ils sont accessibles de l&#8217;extérieur.</p>
</div>
<div class="admonitionblock note data-line-440">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-441">
<p>Pour que ce test fonctionne, vous devez avoir un nœud Bitcoin ou Lightning (ou les deux) opérationnel sur votre réseau domestique. Si votre routeur prend en charge UPnP, le trafic entrant sera automatiquement transféré vers les ports correspondants sur l&#8217;ordinateur exécutant le nœud.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-444">
<p>Vous pouvez utiliser certains sites Web très populaires et utiles pour savoir quelle est votre adresse IP externe et si elle autorise et transmet les connexions entrantes vers un port connu. En voici deux qui sont fiables :</p>
</div>
<div class="ulist data-line-446">
<ul>
<li class="data-line-446">
<p><a href="https://canyouseeme.org" class="undefined" data-href="https://canyouseeme.org">https://canyouseeme.org</a></p>
</li>
<li class="data-line-447">
<p><a href="https://www.whatismyip.com/port-scanner" class="undefined" data-href="https://www.whatismyip.com/port-scanner">https://www.whatismyip.com/port-scanner</a></p>
</li>
</ul>
</div>
<div class="paragraph data-line-449">
<p>Par défaut, ces services vous permettent uniquement de vérifier les connexions entrantes à l&#8217;adresse IP à partir de laquelle vous vous connectez. Ceci est fait pour vous empêcher d&#8217;utiliser le service pour analyser les réseaux et les ordinateurs d&#8217;autres personnes. Vous verrez l&#8217;adresse IP externe de votre routeur et un champ pour entrer un numéro de port. Si vous n&#8217;avez pas modifié les ports par défaut dans la configuration de votre nœud, essayez le port 8333 (Bitcoin) et/ou 9735 (Lightning).</p>
</div>
<div class="paragraph data-line-451">
<p>Sur <a href="#ln_port_check">Vérification du port entrant 9735</a> vous pouvez voir le résultat de la vérification du port 9735 sur un serveur exécutant Lightning, à l&#8217;aide de l&#8217;outil d&#8217;analyse de port <em>whatismyip.com</em>. Cela montre que le serveur accepte les connexions entrantes sur le port Lightning. Si vous voyez un résultat comme celui-ci, vous êtes prêt !</p>
</div>
<div id="ln_port_check" class="imageblock data-line-455">
<div class="content">
<img src="images/mtln_0503.png" alt="mtln 0503">
</div>
<div class="title">Figure 3. Vérification du port entrant 9735</div>
</div>
</div>
<div class="sect4 data-line-457">
<h5 id="_redirection_de_port_automatique_en_utilisant_upnp">Redirection de port automatique en utilisant UPnP</h5>
<div class="paragraph data-line-459">
<p>Parfois, même si votre routeur Internet prend en charge l&#8217;UPnP, il se peut qu&#8217;il soit désactivé par défaut. Dans ce cas, vous devez modifier la configuration de votre routeur Internet depuis son interface d&#8217;administration Web :</p>
</div>
<div class="olist arabic data-line-461">
<ol class="arabic">
<li class="data-line-461">
<p>Connectez-vous au site Web de configuration de votre routeur Internet. Cela peut généralement être fait en se connectant à <em>l&#8217;adresse de passerelle</em> ("gateway address" en anglais) de votre réseau domestique à l&#8217;aide d&#8217;un navigateur Web. Vous pouvez trouver l&#8217;adresse de la passerelle en consultant la configuration IP de n&#8217;importe quel ordinateur de votre réseau domestique. Il s&#8217;agit souvent de la première adresse dans l&#8217;un des réseaux non routables, comme 192.168.0.1 ou 10.0.0.1. Vérifiez également tous les autocollants sur votre routeur pour <em>l&#8217;adresse de la passerelle</em>. Une fois trouvée, ouvrez un navigateur et saisissez l&#8217;adresse IP dans la zone URL/Recherche du navigateur, par exemple, "192.168.0.1" ou "http://192.168.0.1".</p>
</li>
<li class="data-line-463">
<p>Recherchez le nom d&#8217;utilisateur et le mot de passe de l&#8217;administrateur pour le panneau de configuration Web du routeur. Ceci est souvent écrit sur un autocollant sur le routeur lui-même et peut être aussi simple que "admin" et "password". Une recherche rapide sur le Web pour votre FAI et votre modèle de routeur peut également vous aider à trouver ces informations.</p>
</li>
<li class="data-line-465">
<p>Trouvez un paramètre pour UPnP et activez-le.</p>
</li>
</ol>
</div>
<div class="paragraph data-line-467">
<p>Redémarrez votre nœud Bitcoin et/ou Lightning et répétez le test de port ouvert avec l&#8217;un des sites Web que nous avons utilisés dans la section précédente.</p>
</div>
</div>
<div class="sect4 data-line-469">
<h5 id="_utilisation_de_tor_pour_les_connexions_entrantes">Utilisation de Tor pour les connexions entrantes</h5>
<div class="paragraph data-line-471">
<p><em>The Onion Router</em> (<em>Tor</em> ) est un VPN avec la propriété spéciale qu&#8217;il crypte les communications entre les sauts, de sorte qu&#8217;aucun nœud intermédiaire ne peut déterminer l&#8217;origine ou la destination d&#8217;un paquet. Les nœuds Bitcoin et Lightning prennent en charge le fonctionnement sur Tor, ce qui vous permet d&#8217;exploiter un nœud sans révéler votre adresse IP ou votre emplacement. Par conséquent, il offre un haut niveau de confidentialité à votre trafic réseau. Un avantage supplémentaire de l&#8217;exécution de Tor est que, comme il fonctionne comme un VPN, il résout le problème de redirection de port depuis votre routeur Internet. Les connexions entrantes sont reçues via le tunnel Tor et votre nœud peut être trouvé via une <em>adresse "onion"</em> générée ad hoc au lieu d&#8217;une adresse IP.</p>
</div>
<div class="paragraph data-line-473">
<p>L&#8217;activation de Tor nécessite deux étapes. Tout d&#8217;abord, vous devez installer le routeur Tor et le proxy sur votre ordinateur. Deuxièmement, vous devez activer l&#8217;utilisation du proxy Tor dans votre configuration Bitcoin ou Lightning.</p>
</div>
<div class="paragraph data-line-475">
<p>Pour installer Tor sur un système Ubuntu Linux qui utilise le gestionnaire de paquets apt, exécutez :</p>
</div>
<div class="listingblock data-line-477">
<div class="content">
<pre>sudo apt install tor</pre>
</div>
</div>
<div class="paragraph data-line-481">
<p>Ensuite, nous configurons notre nœud Lightning pour utiliser Tor pour sa connectivité externe. Voici un exemple de configuration pour LND :</p>
</div>
<div class="listingblock data-line-483">
<div class="content">
<pre>[Tor]
tor.active=true
tor.v3=true
tor.streamisolation=true
listen=localhost</pre>
</div>
</div>
<div class="paragraph data-line-491">
<p>Cela activera Tor (tor.active), établira un service onion v3 (tor.v3=true), utilisera un flux onion différent pour chaque connexion (tor.streamisolation) et limitera l&#8217;écoute des connexions à l&#8217;hôte local uniquement, pour éviter de divulguer votre adresse IP (<code>l&#x2060;i&#x2060;s&#x2060;t&#x2060;e&#x2060;n&#x200b;=&#x2060;l&#x2060;o&#x2060;c&#x2060;a&#x2060;l&#x2060;h&#x2060;o&#x2060;s&#x2060;t</code>).</p>
</div>
<div class="paragraph data-line-493">
<p>Vous pouvez vérifier si Tor est correctement installé et fonctionne en exécutant une simple commande d&#8217;une ligne. Cette commande devrait fonctionner sur la plupart des versions de Linux :</p>
</div>
<div class="listingblock data-line-495">
<div class="content">
<pre>curl --socks5 localhost:9050 --socks5-hostname localhost:9050 -s https://check.torproject.org/ | cat | grep -m 1 Congratulations | xargs</pre>
</div>
</div>
<div class="paragraph data-line-499">
<p>Si tout fonctionne correctement, la réponse de cette commande devrait être "Congratulations. This browser is configured to use Tor" (traduit en "Félicitations votre navigateur est configuré pour utiliser Tor").</p>
</div>
<div class="paragraph data-line-501">
<p>En raison de la nature de Tor, vous ne pouvez pas facilement utiliser un service externe pour vérifier si votre nœud est accessible via une adresse "onion". Néanmoins, vous devriez voir votre adresse "onion" de Tor dans les journaux de votre nœud Lightning. C&#8217;est une longue chaîne de lettres et de chiffres suivie du suffixe .onion. Votre nœud devrait maintenant être accessible depuis Internet, avec en prime la confidentialité !</p>
</div>
</div>
<div class="sect4 data-line-503">
<h5 id="_redirection_de_port_manuelle">Redirection de port manuelle</h5>
<div class="paragraph data-line-505">
<p>C&#8217;est le processus le plus complexe et nécessite pas mal de compétences techniques. Les détails dépendent du type de routeur Internet dont vous disposez, des paramètres et des politiques de votre fournisseur de services et de nombreux autres contextes. Essayez d&#8217;abord UPnP ou Tor, avant d&#8217;essayer ce mécanisme beaucoup plus difficile.</p>
</div>
<div class="paragraph data-line-507">
<p>Les étapes de base sont les suivantes :</p>
</div>
<div class="olist arabic data-line-509">
<ol class="arabic">
<li class="data-line-509">
<p>Trouvez l&#8217;adresse IP de l&#8217;ordinateur sur lequel se trouve votre nœud. Ceci est généralement alloué dynamiquement par le protocole DHCP (Dynamic Host Configuration Protocol) et se situe souvent quelque part dans la plage 192.168.x.x ou 10.x.x.x.</p>
</li>
<li class="data-line-511">
<p>Recherchez l&#8217;adresse MAC (Media Access Control) de l&#8217;interface réseau de votre nœud. Cela peut être trouvé dans les paramètres Internet de cet ordinateur.</p>
</li>
<li class="data-line-513">
<p>Attribuez une adresse IP statique à votre nœud afin qu&#8217;elle soit toujours la même. Vous pouvez utiliser l&#8217;adresse IP dont il dispose actuellement. Sur votre routeur Internet, recherchez "Baux statiques" ("Static Leases" en anglais) sous la configuration DHCP. Associez l&#8217;adresse MAC à l&#8217;adresse IP que vous avez sélectionnée. Désormais, cette adresse IP sera toujours attribuée à votre nœud. Vous pouvez également consulter la configuration DHCP de votre routeur et découvrir quelle est sa plage d&#8217;adresses DHCP. Sélectionnez une adresse inutilisée <em>hors</em> de la plage d&#8217;adresses DHCP. Ensuite, sur le serveur, configurez le réseau pour qu&#8217;il cesse d&#8217;utiliser DHCP et codez en dur l&#8217;adresse IP non-DHCP sélectionnée dans la configuration réseau du système d&#8217;exploitation.</p>
</li>
<li class="data-line-515">
<p>Enfin, installer une "Redirection de ports" ("Port Forwarding" en anglais) sur votre routeur Internet pour acheminer le trafic entrant sur des ports spécifiques vers l&#8217;adresse IP sélectionnée de votre serveur.</p>
</li>
</ol>
</div>
<div class="paragraph data-line-517">
<p>Une fois la reconfiguration terminée, répétez la vérification du port en utilisant l&#8217;un des sites Web des sections précédentes .</p>
</div>
</div>
</div>
</div>
<div class="sect2 data-line-519">
<h3 id="_sécurité_de_votre_nœud">Sécurité de votre nœud</h3>
<div class="paragraph data-line-521">
<p>Un nœud Lightning est, par définition, un <em>porte-monnaie chaud</em> ("hot wallet" en anglais). Cela signifie que les fonds (à la fois sur la chaîne et hors chaîne) contrôlés par un nœud Lightning sont directement contrôlés par des clés qui sont chargées dans la mémoire du nœud ou stockées sur le disque dur du nœud. Si un nœud Lightning est compromis, il est trivial de créer des transactions sur la chaîne ou hors chaîne pour drainer ses fonds. Il est donc extrêmement important que vous le protégiez contre tout accès non autorisé.</p>
</div>
<div class="paragraph data-line-523">
<p>La sécurité est un effort holistique, ce qui signifie que vous devez sécuriser chaque couche d&#8217;un système. Comme le dit l&#8217;adage : la chaîne est aussi solide que son maillon le plus faible. Il s&#8217;agit d&#8217;un concept important dans la sécurité informatique et nous l&#8217;appliquerons à notre nœud.</p>
</div>
<div class="paragraph data-line-525">
<p>Malgré toutes les mesures de sécurité que vous prendrez, rappelez-vous que le Lightning Network est une technologie expérimentale à un stade précoce et qu&#8217;il est probable qu&#8217;il y ait des bogues exploitables dans le code de tout projet que vous utilisez. <em>Ne mettez pas plus d&#8217;argent que vous n&#8217;êtes prêt à risquer de perdre sur le Lightning Network.</em></p>
</div>
<div class="sect3 data-line-528">
<h4 id="_sécurité_du_système_dexploitation">Sécurité du système d&#8217;exploitation</h4>
<div class="paragraph data-line-530">
<p>La sécurisation d&#8217;un système d&#8217;exploitation est un vaste sujet qui dépasse le cadre de ce livre. Cependant, nous pouvons établir quelques principes de base.</p>
</div>
<div class="paragraph data-line-532">
<p>Pour sécuriser votre système d&#8217;exploitation, voici quelques-uns des principaux éléments à prendre en compte :</p>
</div>
<div class="dlist data-line-534">
<dl>
<dt class="hdlist1">Provenance</dt>
<dd>
<p>Commencez par vous assurer que vous téléchargez la bonne image du système d&#8217;exploitation et vérifiez les signatures ou les sommes de contrôle ("checksum" en anglais) avant de l&#8217;installer. Étendez cela à tous les logiciels que vous installez. Vérifiez à nouveau toute source ou URL à partir de laquelle vous téléchargez. Vérifiez l&#8217;intégrité et l&#8217;exactitude du logiciel téléchargé grâce aux signatures et à la vérification des sommes de contrôle.</p>
</dd>
<dt class="hdlist1">Maintenance</dt>
<dd>
<p>Assurez-vous que votre système d&#8217;exploitation est à jour. Activez l&#8217;installation quotidienne ou hebdomadaire automatisée des mises à jour de sécurité.</p>
</dd>
<dt class="hdlist1">Moindres privilèges</dt>
<dd>
<p>Créez des utilisateurs spécifiquement  pour les processus et accordez-leur le moins d&#8217;accès possible pour exécuter un service. N&#8217;exécutez pas de processus avec des privilèges d&#8217;administrateur (par exemple, root).</p>
</dd>
<dt class="hdlist1">Isolation des processus</dt>
<dd>
<p>Utilisez les fonctionnalités du système d&#8217;exploitation pour isoler les processus les uns par rapport aux autres.</p>
</dd>
<dt class="hdlist1">Autorisations du système de fichiers</dt>
<dd>
<p>Configurez le système de fichiers avec soin, selon le principe des moindres privilèges. Ne rendez pas les fichiers lisibles ou inscriptibles par tout le monde.</p>
</dd>
<dt class="hdlist1">Authentification forte</dt>
<dd>
<p>Utilisez des mots de passe forts générés aléatoirement ou, dans la mesure du possible, une authentification par clé publique. Par exemple, il est plus sûr d&#8217;utiliser Secure Shell (SSH) avec une paire de clés cryptographiques au lieu d&#8217;un mot de passe.</p>
</dd>
<dt class="hdlist1">Authentification à deux facteurs (2FA)</dt>
<dd>
<p>Utilisez l&#8217;authentification à deux facteurs dans la mesure du possible, y compris Universal 2nd Factor (U2F) avec des clés de sécurité matérielles. Cela s&#8217;applique à tous les services externes que vous pourriez utiliser, tels que votre fournisseur de services cloud. Vous pouvez également l&#8217;appliquer à votre propre configuration, telle que votre propre configuration SSH. Utilisez 2FA également pour les services indirects. Par exemple, supposons que vous utilisez un service cloud. Vous avez donné une adresse e-mail à votre fournisseur de services cloud, vous devez donc également protéger votre adresse e-mail avec 2FA.</p>
</dd>
<dt class="hdlist1">Sauvegarde</dt>
<dd>
<p>Effectuez des sauvegardes de votre système et assurez-vous également de protéger les sauvegardes avec un cryptage. Effectuez ces sauvegardes périodiquement. Au moins une fois, testez si vous pouvez restaurer votre sauvegarde et si votre sauvegarde est complète et accessible. Si possible, conservez une copie de vos sauvegardes sur un disque différent pour éviter qu&#8217;une seule panne de disque dur ne détruise <em>à la fois</em> votre nœud actif ainsi que vos copies de sauvegarde.</p>
</dd>
<dt class="hdlist1">Gestion des vulnérabilités et de l&#8217;exposition</dt>
<dd>
<p>Utilisez l&#8217;analyse à distance pour vous assurer que vous avez minimisé la surface d&#8217;attaque de votre système. Fermez tous les services ou ports inutiles. Installez uniquement les logiciels et paquets dont vous avez vraiment besoin et que vous utilisez. Désinstallez les paquets que vous n&#8217;utilisez plus. Il est recommandé de <em>ne pas</em> utiliser votre l&#8217;ordinateur de votre nœud pour des activités non liées au nœud que vous pouvez effectuer sur un autre de vos ordinateurs. Surtout, si vous le pouvez, n&#8217;utilisez <em>pas</em> l&#8217;ordinateur de votre nœud pour naviguer, surfer sur Internet ou lire vos e-mails.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-544">
<p>Voici une liste des mesures de sécurité les plus élémentaires. Elle n&#8217;est en aucun cas exhaustive.</p>
</div>
</div>
<div class="sect3 data-line-546">
<h4 id="_accès_au_nœud">Accès au nœud</h4>
<div class="paragraph data-line-548">
<p>Votre nœud Lightning va exposer une API d&#8217;appel de procédure distante (RPC). Cela signifie que votre nœud peut être contrôlé à distance par des commandes envoyées à un port TCP spécifique. Le contrôle d&#8217;accès à cette API RPC est réalisé après une certaine forme d&#8217;authentification de l&#8217;utilisateur. Selon le type de nœud Lightning que vous configurez, cela se fera soit par une authentification <span class="keep-together">nom d'utilisateur/mot de passe</span> ou par un mécanisme appelé un <em>macaron</em> d&#8217;authentification ("macaroon" en anglais). Comme son nom l&#8217;indique, un macaron est un type de cookie plus sophistiqué. Contrairement à un cookie, il est signé cryptographiquement et peut exprimer un ensemble de <span class="keep-together">capacités</span>.</p>
</div>
<div class="paragraph data-line-550">
<p>Par exemple, LND utilise des macarons pour accorder l&#8217;accès à l&#8217;API RPC. Par défaut, le logiciel LND crée trois macarons avec différents niveaux d&#8217;accès, appelés admin, invoice et readonly. Selon le macaron que vous copiez et utilisez dans votre client RPC, vous disposez soit d&#8217;un accès en <em>lecture seule</em>, d&#8217;un accès <em>facture</em> (qui inclut les capacités de lecture seule) ou d&#8217;un accès <em>admin</em>, qui vous donne un contrôle total. Il existe également une fonction macaron + boulangerie + dans LND qui peut construire des macarons avec n&#8217;importe quelle combinaison de capacités permettant un contrôle très fin.</p>
</div>
<div class="paragraph data-line-552">
<p>Si vous utilisez un modèle d&#8217;authentification nom d&#8217;utilisateur/mot de passe, assurez-vous de sélectionner un mot de passe long et aléatoire. Vous n&#8217;aurez pas à taper souvent ce mot de passe, car il sera stocké dans les fichiers de configuration. Vous devez donc en choisir un qui ne peut pas être deviné. De nombreux exemples que vous verrez incluent des mots de passe mal choisis, et souvent les gens les copient dans leurs propres systèmes, offrant un accès facile à n&#8217;importe qui. Ne fais pas cela ! Utilisez un gestionnaire de mots de passe pour générer un long mot de passe alphanumérique aléatoire. Étant donné que certains caractères spéciaux tels que $?/!*\&amp;%`"' peuvent interférer avec la ligne de commande, il est préférable de les éviter pour les mots de passe qui seront utilisés dans un environnement shell. Pour éviter les problèmes, restez avec de longs mots de passe alphanumériques aléatoires.</p>
</div>
<div class="paragraph data-line-554">
<p>Une séquence alphanumérique simple de plus de 12 caractères et générée de manière aléatoire est généralement suffisante. Si vous prévoyez de stocker de grosses sommes d&#8217;argent sur votre nœud Lightning et que vous êtes préoccupé par les attaques par force brute à distance, sélectionnez un mot de passe de plus de 20 caractères pour rendre ces attaques pratiquement impossibles.</p>
</div>
</div>
</div>
<div class="sect2 data-line-556">
<h3 id="_sauvegardes_de_nœuds_et_de_canaux">Sauvegardes de nœuds et de canaux</h3>
<div class="paragraph data-line-558">
<p>Une considération très importante lors de l&#8217;exécution d&#8217;un nœud Lightning est la question des sauvegardes. Contrairement à un porte-monnaie Bitcoin, où une phrase mnémonique BIP-39 peut récupérer tout l&#8217;état du porte-monnaie, sur Lightning ce n&#8217;est <em>pas</em> le cas.</p>
</div>
<div class="paragraph data-line-560">
<p>Les porte-monnaie Lightning utilisent une sauvegarde de phrase mnémonique BIP-39, mais uniquement pour le porte-monnaie sur la chaîne. Cependant, en raison de la manière dont les canaux sont construits, la phrase mnémonique n&#8217;est <em>pas</em> suffisante pour restaurer un nœud Lightning. Une couche supplémentaire de sauvegardes est nécessaire, appelée <em>sauvegarde de canal statique</em> ("Static Channel Backup" ou <em>"SCB"</em> en anglais). Sans SCB, un opérateur de nœud Lightning peut perdre <em>tous</em> les fonds qui se trouvent dans les canaux s&#8217;il perd le magasin de données du nœud Lightning.</p>
</div>
<div class="admonitionblock warning data-line-563">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph data-line-564">
<p>Ne financez <em>pas</em> de canaux tant que vous n&#8217;avez pas mis en place un système pour sauvegarder en permanence l&#8217;état de vos canaux. Vos sauvegardes doivent être déplacées "hors site" vers un système et un emplacement différents de votre nœud, afin qu&#8217;elles puissent survivre à diverses pannes du système (coupure de courant, corruption de données, etc.) ou à des catastrophes naturelles (inondation, incendie, etc.).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-567">
<p>Les SCB ne sont pas une panacée. Tout d&#8217;abord, l&#8217;état de chaque canal doit être sauvegardé chaque fois qu&#8217;il y a une nouvelle transaction d&#8217;engagement. Deuxièmement, la restauration à partir d&#8217;une sauvegarde de canal est dangereuse. Si vous n&#8217;avez pas la <em>dernière</em> transaction d&#8217;engagement et que vous diffusez accidentellement un ancien engagement (révoqué), votre pair de canal supposera que vous essayez de tricher et réclamera l&#8217;intégralité du solde du canal avec une transaction de pénalité. Pour vous assurer que vous fermez le canal, vous devez effectuer une <em>fermeture coopérative</em>. Mais un pair malveillant pourrait induire votre nœud en erreur en diffusant un ancien engagement révoqué lors de cette fermeture coopérative, vous trompant ainsi en obligeant votre nœud à essayer de tricher par inadvertance.</p>
</div>
<div class="paragraph data-line-569">
<p>De plus, les sauvegardes de vos canaux doivent être cryptées pour préserver votre confidentialité et la sécurité de votre canal. Sinon, quiconque trouve les sauvegardes peut non seulement voir tous vos canaux, mais peut également utiliser les sauvegardes pour fermer tous vos canaux de manière à remettre le solde à vos pairs. En d&#8217;autres termes, une personne malveillante qui accède à vos sauvegardes peut vous faire perdre tous les fonds sur vos canaux.</p>
</div>
<div class="paragraph data-line-571">
<p>Vous pouvez voir que les SCB ne sont pas une garantie infaillible. Ils constituent un compromis faible car ils remplacent un type de risque (corruption ou perte de données) par un autre type de risque (pair malveillant). Pour restaurer à partir d&#8217;un SCB, vous devez interagir avec vos pairs de canal et espérer qu&#8217;ils n&#8217;essaieront pas de vous tromper en vous fournissant un ancien engagement ou en trompant votre nœud en diffusant un engagement révoqué afin qu&#8217;ils puissent vous pénaliser. Malgré les faiblesses du SCB, les SCB ont du sens et vous devez les mettre en œuvre. Si vous n&#8217;utilisez pas les SCB et que vous perdez vos données de nœud, vous perdrez les fonds de votre canal pour toujours. Garanti ! Cependant, si vous utilisez les SCB et que vous perdez vos données de nœud, vous avez une chance raisonnable que certains de vos pairs soient honnêtes et que vous puissiez récupérer une partie des fonds de votre canal. Si vous êtes chanceux, vous pourriez récupérer tous vos fonds. En conclusion, il est préférable pour d&#8217;utiliser des SCB continus sur un disque autre que le disque dur primaire du nœud.</p>
</div>
<div class="paragraph data-line-573">
<p>Les mécanismes de sauvegarde des canaux sont toujours en cours de développement et constituent une faiblesse dans la plupart des implémentations de Lightning.</p>
</div>
<div class="paragraph data-line-575">
<p>Au moment de la rédaction de ce livre, seul LND propose un mécanisme intégré pour les SCB. Eclair dispose d&#8217;un mécanisme similaire déployé pour les déploiements côté serveur, toutefois Eclair Mobile propose une sauvegarde facultative sur Google Drive. <code>c-lightning</code> a récemment fusionné les interfaces nécessaires à un plug-in pour implémenter des sauvegardes de canaux. Malheureusement, il n&#8217;y a pas de mécanisme de sauvegarde cohérent et convenu entre les différentes <span class="keep-together">implémentations</span> de nœuds.</p>
</div>
<div class="paragraph data-line-577">
<p>Les sauvegardes basées sur des fichiers des bases de données du nœud Lightning sont au mieux une solution partielle car vous courez le risque de sauvegarder un état de base de données incohérent. De plus, vous ne pouvez pas attraper de manière fiable les états d&#8217;engagements les plus récents. Il est bien préférable d&#8217;avoir un mécanisme de sauvegarde qui se déclenche à chaque changement d&#8217;état d&#8217;un canal, assurant ainsi la cohérence des données.</p>
</div>
<div class="paragraph data-line-579">
<p>Pour configurer des SCB dans LND, définissez le paramètre backupfilepath sur la ligne de commande ou dans le fichier de configuration. LND enregistrera alors un fichier SCB dans ce chemin de répertoire. Bien sûr, ce n&#8217;est que la première étape de la solution. Maintenant, vous devez mettre en place un mécanisme qui surveille ce fichier pour les modifications. A chaque fois que le fichier change, le mécanisme <span class="keep-together">de sauvegarde</span> doit copier ce fichier sur un autre disque, de préférence hors site. De tels mécanismes de sauvegarde sortent du cadre de ce livre. Néanmoins, toute solution de sauvegarde sophistiquée devrait être capable de gérer ce scénario. Rappelez-vous que les fichiers de sauvegarde doivent également être cryptés.</p>
</div>
<div class="sect3 data-line-581">
<h4 id="_risque_des_porte_monnaie_chauds">Risque des porte-monnaie chauds</h4>
<div class="paragraph data-line-583">
<p>Comme nous en avons parlé précédemment, le Lightning Network se compose d&#8217;un réseau de <em>porte-monnaie chaud</em>. Les fonds que vous stockez dans un porte-monnaie Lightning sont en ligne tout le temps. Cela les rend vulnérables. Par conséquent, vous ne devez pas stocker de grandes quantités dans un porte-monnaie Lightning. Les montants importants doivent être conservés dans un porte-monnaie <em>froid</em> qui n&#8217;est <em>pas</em> en ligne et qui ne peut effectuer des transactions que sur la chaîne.</p>
</div>
<div class="paragraph data-line-585">
<p>Même si vous commencez petit, au fil du temps, vous constaterez peut-être que vous avez encore une somme d&#8217;argent importante dans un porte-monnaie Lightning. Il s&#8217;agit d&#8217;un scénario typique pour les propriétaires de magasins. Si vous utilisez un nœud Lightning pour une opération de commerce électronique, votre porte-monnaie recevra probablement des fonds souvent, mais en enverra rarement. Vous finirez donc par avoir deux problèmes simultanément. Premièrement, vos canaux seront déséquilibrés, les gros soldes locaux l&#8217;emportant sur les petits soldes distants. Deuxièmement, vous aurez trop d&#8217;argent dans le porte-monnaie. Heureusement, vous pouvez aussi résoudre ces deux problèmes simultanément.</p>
</div>
<div class="paragraph data-line-587">
<p>Examinons quelques-unes des solutions que vous pouvez utiliser pour réduire les fonds exposés dans un porte-monnaie chaud.</p>
</div>
</div>
<div class="sect3 data-line-589">
<h4 id="_balayage_de_fonds_sweeping_en_anglais">Balayage de fonds ("sweeping" en anglais)</h4>
<div class="paragraph data-line-591">
<p>Si le solde de votre porte-monnaie Lightning devient trop important pour votre tolérance de risques, vous devrez "balayer" des fonds hors du porte-monnaie. Vous pouvez le faire de trois manières : sur la chaîne, hors chaîne et Loop Out. Examinons chacune de ces options dans les prochaines sections.</p>
</div>
<div class="sect4 data-line-593">
<h5 id="_balayage_sur_la_chaîne">Balayage sur la chaîne</h5>
<div class="paragraph data-line-595">
<p>Le balayage ("sweeping" en anglais) de fonds sur la chaîne est accompli en déplaçant les fonds du porte-monnaie Lightning vers un porte-monnaie Bitcoin. Vous faites cela en fermant des canaux. Lorsque vous fermez un canal, tous les fonds de votre solde local sont "balayés" vers une adresse Bitcoin. L&#8217;adresse Bitcoin pour les fonds sur la chaîne est généralement générée par votre porte-monnaie Lightning, il s&#8217;agit donc toujours d&#8217;un porte-monnaie chaud. Vous devrez peut-être effectuer une transaction supplémentaire sur la chaîne pour déplacer les fonds vers une adresse plus sécurisée, telle que celle générée sur votre porte-monnaie matériel.</p>
</div>
<div class="paragraph data-line-597">
<p>La fermeture des canaux entraînera des frais de chaîne et réduira la capacité et la connectivité de votre nœud Lightning. Cependant, si vous exploitez un nœud de commerce électronique populaire, vous ne manquerez pas de capacité entrante et pourrez fermer stratégiquement des canaux avec des soldes locaux importants, en "regroupant" essentiellement vos fonds pour les mouvements sur la chaîne. Vous devrez peut-être utiliser certaines techniques de rééquilibrage des canaux (voir <a href="#channel_rebalancing">Rééquilibrage de canaux</a>) avant de fermer des canaux pour maximiser les avantages de cette stratégie.</p>
</div>
</div>
<div class="sect4 data-line-599">
<h5 id="_balayage_hors_chaîne">Balayage hors chaîne</h5>
<div class="paragraph data-line-601">
<p>Une autre technique que vous pouvez utiliser consiste à exécuter un deuxième nœud Lightning qui n&#8217;est pas annoncé sur le réseau. Vous pouvez établir des canaux de grande capacité à partir de votre nœud public (par exemple, celui qui gère votre boutique) vers votre nœud non annoncé (caché). Régulièrement, "balayez" des fonds en effectuant un paiement Lightning sur votre nœud caché.</p>
</div>
<div class="paragraph data-line-603">
<p>L&#8217;avantage de cette technique réside dans le fait que le nœud Lightning qui reçoit les paiements pour votre boutique sera connu publiquement. Cela en fait une cible pour les pirates, car tout nœud Lightning associé à une boutique serait supposé avoir un solde important. Un deuxième nœud qui n&#8217;est pas associé à votre boutique ne sera pas facilement identifié comme une cible valable.</p>
</div>
<div class="paragraph data-line-605">
<p>Comme mesure de sécurité supplémentaire, vous pouvez faire de votre deuxième nœud un service Tor caché afin que son adresse IP ne soit pas connue. Cela réduit encore les risques d&#8217;attaques et augmente votre confidentialité.</p>
</div>
<div class="paragraph data-line-607">
<p>Vous devrez configurer un script qui s&#8217;exécute à intervalles réguliers. Le but de ce script est de créer une facture sur votre nœud caché et de payer cette facture depuis le nœud de votre boutique, transférant ainsi des fonds vers votre nœud caché.</p>
</div>
<div class="paragraph data-line-609">
<p>Gardez à l&#8217;esprit que cette technique ne déplace pas les fonds dans un cold storage. Les deux nœuds Lightning sont des porte-monnaie chauds. L&#8217;objectif de ce balayage est de déplacer des fonds d&#8217;un porte-monnaie chaud très connu vers un porte-monnaie chaud obscur.</p>
</div>
</div>
<div class="sect4 data-line-611">
<h5 id="_balayage_par_échange_sous_marin">Balayage par échange sous-marin</h5>
<div class="paragraph data-line-613">
<p>Une autre façon de réduire le solde de votre porte-monnaie chaud Lightning consiste à utiliser une technique appelée <em>échange sous-marin</em> ("submarine swaps" en anglais). Les échanges sous-marins, conceptualisés par le co-auteur Olaoluwa Osuntokun et Alex Bosworth, permettent l&#8217;échange de bitcoins sur la chaîne contre des paiements Lightning et vice versa. Essentiellement, les échanges sous-marins sont des échanges atomiques entre les fonds hors chaîne Lightning et les fonds sur la chaîne Bitcoin.</p>
</div>
<div class="paragraph data-line-615">
<p>Un opérateur de nœud peut initier un échange sous-marin et envoyer tous les soldes de canaux disponibles à l&#8217;autre partie, qui leur enverra des bitcoins sur la chaîne en échange.</p>
</div>
<div class="paragraph data-line-617">
<p>À l&#8217;avenir, il pourrait s&#8217;agir d&#8217;un service payant proposé par les nœuds du Lightning Network qui annoncent des taux de change ou facturent des frais fixes pour la conversion.</p>
</div>
<div class="paragraph data-line-619">
<p>L&#8217;avantage d&#8217;un échange sous-marin pour balayer des fonds est qu&#8217;aucun canal n&#8217;a besoin d&#8217;être fermé. Cela signifie que nous préservons nos canaux, ne rééquilibrant nos canaux qu&#8217;à travers cette opération. Lorsque nous envoyons un paiement Lightning, nous transférons une partie du solde depuis le local vers le distant sur un ou plusieurs de nos canaux. Non seulement cela réduit le solde exposé dans le porte-monnaie actif de notre nœud, mais cela augmente également le solde disponible pour les futurs paiements entrants.</p>
</div>
<div class="paragraph data-line-621">
<p>Vous pouvez le faire en confiant à un intermédiaire le rôle de passerelle, mais cela risque de vous faire voler vos pièces. Cependant, dans le cas d&#8217;un échange sous-marin, l&#8217;opération ne nécessite pas de confiance. Les échanges sous-marins sont des opérations <em>atomiques</em> non dépositaires. Cela signifie que la contrepartie de votre échange sous-marin ne peut pas voler vos fonds car le paiement sur la chaîne dépend de l&#8217;achèvement du paiement hors chaîne et vice versa.</p>
</div>
</div>
<div class="sect4 data-line-623">
<h5 id="_échanges_sous_marins_avec_loop">Échanges sous-marins avec Loop</h5>
<div class="paragraph data-line-625">
<p>Un exemple de service d&#8217;échange sous-marin est <em>Loop</em> de Lightning Labs, la même société qui développe LND. Loop existe en deux variantes : Loop In et Loop Out. <em>Loop In</em> accepte un paiement Bitcoin sur la chaîne et le convertit en un paiement Lightning hors chaîne. <em>Loop Out</em> convertit un paiement Lightning en paiement Bitcoin.</p>
</div>
<div class="admonitionblock note data-line-628">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-629">
<p>Pour utiliser le service Loop, vous devez exécuter un nœud Lightning LND.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-632">
<p>Dans le but de réduire le solde de votre porte-monnaie chaud Lightning, vous utiliserez le service Loop Out. Pour utiliser le service Loop, vous devez installer des logiciels supplémentaires sur votre nœud. Le logiciel Loop fonctionne avec votre nœud LND et fournit des outils de ligne de commande pour exécuter des échanges sous-marins. Vous pouvez trouver le logiciel Loop et les instructions d&#8217;installation sur <a href="https://github.com/lightninglabs/loop" data-href="https://github.com/lightninglabs/loop">GitHub</a>.</p>
</div>
<div class="paragraph data-line-634">
<p>Une fois que vous avez installé et exécuté le logiciel, une opération Loop Out est aussi simple que d&#8217;exécuter une seule commande :</p>
</div>
<div class="listingblock data-line-636">
<div class="content">
<pre>loop out --amt 501000 --conf_target 400
Max swap fees for 501000 sat Loop Out: 25716 sat
Regular swap speed requested, it might take up to 30m0s for the swap to be executed.
CONTINUE SWAP? (y/n), expand fee detail (x): x

Estimated on-chain sweep fee:        149 sat
Max on-chain sweep fee:              14900 sat
Max off-chain swap routing fee:      10030 sat
Max no show penalty (prepay):        1337 sat
Max off-chain prepay routing fee:    36 sat
Max swap fee:                        750 sat
CONTINUE SWAP? (y/n): y
Swap initiated

Run `loop monitor` to monitor progress.</pre>
</div>
</div>
<div class="paragraph data-line-654">
<p>Notez que vos frais maximums, qui représentent le pire des cas, dépendront de la cible de confirmation que vous sélectionnez.</p>
</div>
</div>
</div>
</div>
<div class="sect2 data-line-656">
<h3 id="_disponibilité_et_temps_de_fonctionnement_des_nœuds_lightning">Disponibilité et temps de fonctionnement des nœuds Lightning</h3>
<div class="paragraph data-line-658">
<p>Contrairement à Bitcoin, les nœuds Lightning doivent être en ligne presque en permanence. Votre nœud doit être en ligne pour recevoir des paiements, ouvrir des canaux, fermer des canaux (de manière coopérative) et surveiller les violations du protocole. La disponibilité des nœuds est une exigence si importante sur le Lightning Network qu&#8217;il s&#8217;agit d&#8217;une métrique utilisée par divers outils de gestion automatique des canaux (par exemple, un pilote automatique) pour décider avec quels nœuds ouvrir des canaux. Vous pouvez également voir la "disponibilité" en tant que métrique de nœud sur les explorateurs de nœuds populaires (voir <a href="#ln_explorer">[ln_explorer]</a>) comme <a href="https://1ml.com" data-href="https://1ml.com">1ML</a>.</p>
</div>
<div class="paragraph data-line-660">
<p>La disponibilité des nœuds est particulièrement importante pour mitiger et résoudre les violations de protocole potentielles (c&#8217;est-à-dire les engagements révoqués). Bien que vous puissiez vous permettre de courtes interruptions d&#8217;une heure à un ou deux jours, vous ne pouvez pas avoir votre nœud hors ligne pendant de plus longues périodes sans risquer de perdre des fonds.</p>
</div>
<div class="paragraph data-line-662">
<p>Maintenir un nœud en ligne en permanence n&#8217;est pas facile, car divers bogues et limitations de ressources peuvent entraîner et entraîneront occasionnellement des temps d&#8217;arrêt. Surtout si vous exécutez un nœud occupé et populaire, vous rencontrerez des limitations de mémoire, d&#8217;espace de swap, de nombre de fichiers ouverts, d&#8217;espace disque, etc. Une multitude de problèmes différents feront planter votre nœud ou votre serveur.</p>
</div>
<div class="sect3 data-line-664">
<h4 id="_tolérer_les_défauts_et_automatiser">Tolérer les défauts et automatiser</h4>
<div class="paragraph data-line-666">
<p>Si vous avez le temps et les compétences, vous devez tester certains scénarios d&#8217;erreur de base sur le Lightning testnet. Sur le testnet, vous apprendrez de précieuses leçons sans risquer d&#8217;argent. Chaque étape que vous effectuez pour automatiser votre système améliorera votre disponibilité :</p>
</div>
<div class="dlist data-line-668">
<dl>
<dt class="hdlist1">Redémarrage automatique d&#8217;ordinateur serveur</dt>
<dd>
<p>Que se passe-t-il lorsque votre serveur ou le système d&#8217;exploitation tombe en panne ? Que se passe-t-il en cas de panne de courant ? Simulez ce défaut en appuyant sur le bouton "reset" de votre PC ou en débranchant le câble d&#8217;alimentation. Après un plantage, une réinitialisation ou une panne de courant, l&#8217;ordinateur doit redémarrer automatiquement. Certains ordinateurs ont un paramètre dans leur BIOS pour spécifier comment l&#8217;ordinateur doit réagir en cas de panne de courant. Testez-le pour vous assurer que l&#8217;ordinateur redémarre vraiment automatiquement en cas de panne de courant sans intervention humaine.</p>
</dd>
<dt class="hdlist1">Redémarrage automatique des nœuds</dt>
<dd>
<p>Que se passe-t-il lorsque votre nœud ou l&#8217;un de vos nœuds plante ? Simulez cette erreur en tuant les processus de nœud correspondants. Si un nœud tombe en panne, il doit redémarrer automatiquement. Testez-le pour vous assurer que le ou les nœuds redémarrent vraiment automatiquement en cas d&#8217;échec sans intervention humaine. Si ce n&#8217;est pas le cas, votre nœud n&#8217;est probablement pas configuré correctement en tant que service du système d&#8217;exploitation.</p>
</dd>
<dt class="hdlist1">Reconnexion automatique au réseau</dt>
<dd>
<p>Que se passe-t-il si votre réseau tombe en panne ? Que se passe-t-il lorsque votre FAI tombe temporairement en panne ? Que se passe-t-il lorsque votre FAI attribue une nouvelle adresse IP à votre routeur ou à votre ordinateur ? Lorsque le réseau revient, les nœuds que vous exécutez se reconnectent-ils automatiquement au réseau ? Simulez ce défaut en débranchant puis en rebranchant le câble Ethernet de l&#8217;appareil hébergeant vos nœuds. Les nœuds doivent se reconnecter automatiquement et continuer à fonctionner sans intervention humaine.</p>
</dd>
<dt class="hdlist1">Configurez vos fichiers journaux</dt>
<dd>
<p>Tous les échecs précédents doivent laisser des entrées textuelles dans les fichiers journaux correspondants. Augmentez la verbosité de la journalisation si nécessaire. Recherchez ces entrées d&#8217;erreur dans les fichiers journaux et utilisez-les pour la surveillance.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 data-line-676">
<h4 id="_surveillance_de_la_disponibilité_des_nœuds">Surveillance de la disponibilité des nœuds</h4>
<div class="paragraph data-line-678">
<p>La surveillance de vos nœuds est une partie importante de leur fonctionnement. Vous devez surveiller non seulement la disponibilité de l&#8217;ordinateur lui-même, mais également la disponibilité et le bon fonctionnement du logiciel du nœud Lightning.</p>
</div>
<div class="paragraph data-line-680">
<p>Il existe plusieurs façons de procéder, mais la plupart nécessitent une certaine personnalisation. Vous pouvez utiliser des outils génériques de surveillance de l&#8217;infrastructure ou de surveillance des applications, mais vous devez les personnaliser spécifiquement pour interroger l&#8217;API du nœud Lightning afin de vous assurer que le nœud est en cours d&#8217;exécution, synchronisé avec la blockchain et connecté aux pairs des canaux.</p>
</div>
<div class="paragraph data-line-682">
<p><a href="https://lightning.watch" data-href="https://lightning.watch">Lightning.watch</a> fournit un service spécialisé qui offre la surveillance de nœuds Lightning. Il utilise un bot Telegram pour vous informer de toute interruption de service. Il s&#8217;agit d&#8217;un service gratuit, bien que vous puissiez payer (sur Lightning, bien sûr) pour obtenir des alertes plus rapides.</p>
</div>
<div class="paragraph data-line-684">
<p>Au fil du temps, nous nous attendons à ce que davantage de services tiers fournissent une surveillance spécialisée de nœuds Lightning payable via des micropaiements. Peut-être que ces services et leurs API deviendront standardisés et seront un jour directement pris en charge par le logiciel de nœud Lightning.</p>
</div>
</div>
<div class="sect3 data-line-687">
<h4 id="watchtowers">Tours de guet</h4>
<div class="paragraph data-line-689">
<p>Les <em>tours de guet</em> ("watchtowers" en anglais) sont un mécanisme d&#8217;externalisation de la surveillance et de la résolution des pénalités pour les violations du protocole Lightning.</p>
</div>
<div class="paragraph data-line-691">
<p>Comme nous l&#8217;avons mentionné dans les chapitres précédents, le protocole Lightning maintient la sécurité grâce à un mécanisme de pénalité. Si l&#8217;un de vos partenaires de canal diffuse une ancienne transaction d&#8217;engagement, votre nœud devra exercer la clause de révocation et diffuser une transaction de pénalité pour éviter de perdre de l&#8217;argent. Mais si votre nœud est en panne pendant la violation du protocole, vous risquez de perdre de l&#8217;argent.</p>
</div>
<div class="paragraph data-line-693">
<p>Pour résoudre ce problème, nous pouvons utiliser une ou plusieurs tours de guet pour externaliser le travail de surveillance des violations de protocole et d&#8217;émission de transactions de pénalité. Il y a deux parties dans une configuration de tour de guet : un serveur de tour de guet (ou simplement une tour de guet) qui surveille la blockchain et un client de tour de guet qui demande au serveur de la tour de guet ce service de surveillance.</p>
</div>
<div class="paragraph data-line-695">
<p>La technologie de tour de guet en est encore aux premiers stades de développement et n&#8217;est pas largement prise en charge. Cependant, dans le passage suivant, nous énumérons quelques implémentations expérimentales que vous pouvez essayer.</p>
</div>
<div class="paragraph data-line-697">
<p>Le logiciel LND comprend à la fois un serveur de tour de guet et un client de tour de guet. Vous pouvez activer le serveur de tour de guet en ajoutant les options de configuration suivantes :</p>
</div>
<div class="listingblock data-line-700">
<div class="content">
<pre class="highlight"><code>[watchtower]
watchtower.active=1
watchtower.towerdir=<em>/path_to_watchtower_data_directory</em></code></pre>
</div>
</div>
<div class="paragraph data-line-706">
<p>Vous pouvez utiliser le client de tour de guet de LND en l&#8217;activant dans la configuration puis en utilisant la ligne de commande pour le connecter à un serveur watchtower. La configuration est :</p>
</div>
<div class="listingblock data-line-708">
<div class="content">
<pre>[wtclient]
wtclient.active=1</pre>
</div>
</div>
<div class="paragraph data-line-713">
<p>Le client de ligne de commande de LND lncli affiche les options suivantes pour gérer le client de tour de guet :</p>
</div>
<div class="listingblock data-line-715">
<div class="content">
<pre>$ lncli wtclient

NAME:
   lncli wtclient - Interact with the watchtower client.

USAGE:
   lncli wtclient command [command options] [arguments...]

COMMANDS:
     add     Register a watchtower to use for future sessions/backups.
     remove  Remove a watchtower to prevent its use for future sessions/backups.
     towers  Display information about all registered watchtowers.
     tower   Display information about a specific registered watchtower.
     stats   Display the session stats of the watchtower client.
     policy  Display the active watchtower client policy configuration.

OPTIONS:
   --help, -h  show help</pre>
</div>
</div>
<div class="paragraph data-line-736">
<p><code>c-lightning</code> a les hooks d&#8217;API nécessaires pour un plug-in client de tour de guet, bien qu&#8217;aucun plug-in de ce type n&#8217;ait encore été implémenté.</p>
</div>
<div class="paragraph data-line-738">
<p>Enfin, un serveur de tour de guet autonome populaire est <em>The Eye of Satoshi</em> (TEOS, traduit en "l&#8217;Oeuil de Satoshi"). Il peut être trouvé sur <a href="https://github.com/talaia-labs/python-teos" data-href="https://github.com/talaia-labs/python-teos">GitHub</a>.</p>
</div>
</div>
</div>
<div class="sect2 data-line-740">
<h3 id="_gestion_des_canaux">Gestion des canaux</h3>
<div class="paragraph data-line-742">
<p>En tant qu&#8217;opérateur de nœud Lightning, l&#8217;une des tâches récurrentes que vous devrez effectuer est la gestion de vos canaux. Cela signifie ouvrir des canaux sortants de votre nœud vers d&#8217;autres nœuds, ainsi que faire en sorte que d&#8217;autres nœuds ouvrent des canaux entrants vers votre nœud. À l&#8217;avenir, la construction de canaux coopératifs pourrait devenir possible, vous pourriez donc ouvrir des canaux symétriques qui auraient des fonds engagés aux deux extrémités lors de leur création. Pour l&#8217;instant, cependant, les nouveaux canaux n&#8217;ont de fonds que d&#8217;un côté, du côté de l&#8217;initiateur. Par conséquent, pour rendre votre nœud <em>équilibré</em> avec une capacité entrante et sortante, vous devez ouvrir des canaux avec les autres et inciter les autres à ouvrir des canaux vers votre nœud.</p>
</div>
<div class="sect3 data-line-744">
<h4 id="_ouverture_de_canaux_sortants">Ouverture de canaux sortants</h4>
<div class="paragraph data-line-746">
<p>Dès que votre nœud Lightning est opérationnel, vous pouvez financer son porte-monnaie Bitcoin, puis commencer à ouvrir des canaux avec ces fonds.</p>
</div>
<div class="paragraph data-line-748">
<p>Vous devez choisir les partenaires de canal avec soin, car la capacité de votre nœud à envoyer des paiements dépend de qui sont vos partenaires de canal et de leur niveau de connexion au reste du Lightning Network. Vous souhaitez également disposer de plusieurs canaux pour éviter d&#8217;être exposé à un seul point de défaillance. Étant donné que Lightning prend désormais en charge les paiements en plusieurs parties, vous pouvez diviser vos fonds initiaux en plusieurs canaux et acheminer des paiements plus importants en combinant leur capacité. En même temps, évitez de rendre vos canaux trop petits. Étant donné que vous devez payer des frais de transaction Bitcoin pour ouvrir et fermer un canal, le solde du canal ne doit pas être si faible que les frais sur la chaîne en consommeraient une part importante. Tout est question d&#8217;équilibre !</p>
</div>
<div class="paragraph data-line-750">
<p>En résumé :</p>
</div>
<div class="ulist data-line-752">
<ul>
<li class="data-line-752">
<p>Connectez-vous à quelques nœuds bien connectés</p>
</li>
<li class="data-line-753">
<p>Ouvrez plus d&#8217;un canal</p>
</li>
<li class="data-line-754">
<p>N&#8217;ouvrez pas trop de canaux</p>
</li>
<li class="data-line-755">
<p>Ne faites pas des canaux trop petits</p>
</li>
</ul>
</div>
<div class="paragraph data-line-757">
<p>Une façon de trouver des nœuds bien connectés consiste à ouvrir un canal vers un marchand populaire vendant des produits sur le Lightning Network. Ces nœuds ont tendance à être bien financés et bien connectés. Ainsi, lorsque vous êtes prêt à acheter quelque chose en ligne via Lightning, vous pouvez ouvrir un canal directement sur le nœud du marchand. L&#8217;ID de nœud du marchand figurera sur la facture que vous recevrez lorsque vous essaierez d&#8217;acheter quelque chose. Cela facilite les choses.</p>
</div>
<div class="paragraph data-line-759">
<p>Une autre façon de trouver des nœuds bien connectés consiste à utiliser un Lightning Explorer (voir <a href="#ln_explorer">[ln_explorer]</a>) comme <a href="https://1ml.com" data-href="https://1ml.com">1ML</a> et parcourez la liste des nœuds triés par capacité de canal et nombre de canaux. N&#8217;optez pas pour les plus gros nœuds, car cela encourage la centralisation. Optez pour un nœud au milieu de la liste afin de pouvoir les aider à grandir. Un autre facteur à prendre en compte peut être la durée de fonctionnement d&#8217;un nœud. Les nœuds établis depuis plus d&#8217;un an sont susceptibles d&#8217;être plus réputés et moins risqués que les nœuds qui ont commencé à fonctionner il y a une semaine.</p>
</div>
<div class="sect4 data-line-762">
<h5 id="autopilot">Pilote automatique</h5>
<div class="paragraph data-line-764">
<p>La tâche d&#8217;ouverture des canaux peut être partiellement automatisée grâce à l&#8217;utilisation d&#8217;un <em>pilote automatique</em> qui est un logiciel qui ouvre automatiquement les canaux en fonction de certaines règles heuristiques. Le logiciel de pilote automatique est encore relativement nouveau et il ne sélectionne pas toujours les meilleurs partenaires de canal pour vous. Surtout au début, il serait peut-être préférable d&#8217;ouvrir des canaux manuellement.
Les pilotes automatiques existent actuellement sous trois formes :</p>
</div>
<div class="ulist data-line-767">
<ul>
<li class="data-line-767">
<p>lnd intègre un pilote automatique entièrement intégré à lnd et fonctionne constamment en arrière-plan lorsqu&#8217;il est en fonction.</p>
</li>
<li class="data-line-768">
<p>lib_autopilot.py peut offrir des calculs de pilote automatique pour n&#8217;importe quelle implémentation de nœud basée sur les bavardages et les données des canaux.</p>
</li>
<li class="data-line-769">
<p>Il existe un plug-in c-lightning basé sur lib_autopilot.py qui fournit une interface facile à utiliser pour les utilisateurs de c-lightning.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-771">
<p>Sachez que le pilote automatique lnd commencera à fonctionner en arrière-plan dès qu&#8217;il sera activé via le fichier de configuration. En conséquence, il commencera à ouvrir des canaux immédiatement si vous avez des sorties sur la chaîne dans votre porte-monnaie lnd.
Si vous souhaitez avoir un contrôle total sur les transactions en bitcoins que vous effectuez et les canaux que vous ouvrez, assurez-vous de désactiver le pilote automatique <em>avant</em> de charger votre porte-monnaie lnd avec des fonds en bitcoins.
Si le pilote automatique était activé auparavant, vous aurez peut-être à redémarrer votre lnd avant de recharger votre porte-monnaie avec une transaction sur la chaîne ou avant de fermer des canaux, ce qui vous redonne effectivement des fonds sur la chaîne.
Il est essentiel que vous définissiez des valeurs de configuration clés si vous souhaitez exécuter le pilote automatique.
Jetez un œil à cet exemple de configuration :</p>
</div>
<div class="listingblock data-line-778">
<div class="content">
<pre>[lnd-autopilot]
autopilot.active=1
autopilot.maxchannels=40
autopilot.allocation=0.70
autopilot.minchansize=500000
autopilot.maxchansize=5000000
autopilot.heuristic=top_centrality:1.0</pre>
</div>
</div>
<div class="paragraph data-line-788">
<p>Ce fichier de configuration activerait le pilote automatique.
Cela ouvrirait des canaux tant que les deux conditions suivantes seraient remplies :</p>
</div>
<div class="olist arabic data-line-791">
<ol class="arabic">
<li class="data-line-791">
<p>Votre nœud a actuellement moins de 40 canaux ouverts.</p>
</li>
<li class="data-line-792">
<p>Moins de 70 % de vos fonds totaux sont hors chaîne dans les canaux de paiement.</p>
</li>
</ol>
</div>
<div class="paragraph data-line-794">
<p>Les nombres 40 et 0,7 sont choisis de manière complètement arbitraire ici car nous ne pouvons faire aucune recommandation valable pour tout le monde sur le nombre de canaux que vous devriez avoir ouverts et le pourcentage de vos fonds qui devraient être hors chaîne.
Le pilote automatique dans lnd ne prendra pas en compte les frais sur la chaîne. En d&#8217;autres termes, il ne retardera pas l&#8217;ouverture de canaux pour attendre une période où les frais sont bas.
Pour réduire les frais, vous pouvez ouvrir manuellement les canaux pendant une période où les frais sont bas, par exemple, pendant le week-end.
Le pilote automatique fera des recommandations de canaux chaque fois que les conditions sont remplies et essaiera immédiatement d&#8217;ouvrir un canal en utilisant les frais actuels appropriés.
Selon le fichier de configuration précédent, les canaux auront une taille comprise entre 5 mBTC (<code>minchansize</code> = 500 000 satoshis) et 50 mBTC (<code>maxchansize</code> = 5 000 000 satoshis).
Comme il est courant, les montants dans le fichier de configuration sont énumérés en satoshis.
Actuellement, les canaux inférieurs à 1 mBTC ne sont pas très utiles, et nous vous déconseillons d&#8217;ouvrir des canaux trop petits et inférieurs à ce montant.
Avec l&#8217;adoption plus large des paiements en plusieurs parties, les petits canaux sont moins un fardeau. Mais pour le moment, c&#8217;est notre recommandation.</p>
</div>
<div class="paragraph data-line-803">
<p>Le plugin c-lightning, qui a été écrit à l&#8217;origine par René Pickhardt (un co-auteur de ce livre), fonctionne très différemment par rapport au pilote automatique lnd.
Premièrement, il diffère dans les algorithmes utilisés pour faire les recommandations. Nous ne couvrirons pas cela ici. Deuxièmement, il diffère par son interface utilisateur.
Vous devrez télécharger le plug-in de <em>pilote automatique</em> à partir du <a href="https://github.com/lightningd/plugins/tree/master/autopilot" data-href="https://github.com/lightningd/plugins/tree/master/autopilot">dépôt</a> de plug-ins c-lightning et l&#8217;activer.</p>
</div>
<div class="admonitionblock note data-line-808">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph data-line-809">
<p>Pour activer un plug-in dans c-lightning, placez-le dans le répertoire <em>~/.lightning/plugins</em>, assurez-vous qu&#8217;il est exécutable (par exemple, <code>chmod +x ~/.lightning/plugins/autopilot.py</code>), puis redémarrez lightningd.</p>
</div>
<div class="paragraph data-line-811">
<p>Sinon, si vous ne souhaitez pas qu&#8217;un plug-in s&#8217;active automatiquement lorsque vous démarrez lightningd, vous pouvez le placer dans un répertoire différent et l&#8217;activer manuellement avec l&#8217;argument plugin de lightningd :</p>
</div>
<div class="listingblock data-line-813">
<div class="content">
<pre>   lightningd --plugin=~/lightning-plugins/autopilot.py</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-819">
<p>Le pilote automatique dans c-lightning est contrôlé via trois valeurs de configuration qui peuvent être définies dans le fichier de configuration ou en tant qu&#8217;arguments de ligne de commande lorsque vous démarrez lightningd :</p>
</div>
<div class="listingblock data-line-821">
<div class="content">
<pre>[c-lightning-autopilot]
autopilot-percent=75
autopilot-num-channels=10
autopilot-min-channel-size-msat=100000000msat</pre>
</div>
</div>
<div class="paragraph data-line-828">
<p>Ces valeurs sont la configuration par défaut réelle et vous n&#8217;avez pas du tout besoin de les définir.</p>
</div>
<div class="paragraph data-line-830">
<p>Le pilote automatique ne fonctionnera pas automatiquement en arrière-plan comme dans lnd.
Au lieu de cela, vous devez démarrer une exécution spécifiquement avec <code>lightning-cli autopilot-run-once</code> si vous souhaitez que le pilote automatique ouvre les canaux recommandés.
Mais si vous voulez qu&#8217;il vous fournisse simplement des recommandations, à partir desquelles vous pouvez sélectionner les nœuds, vous pouvez ajouter l&#8217;argument facultatif <code>dryrun</code>.</p>
</div>
<div class="paragraph data-line-834">
<p>Une différence clé entre les pilotes automatiques lnd et c-lightning est que le pilote automatique c-lightning fera également une recommandation pour la taille du canal.
Par exemple, si le pilote automatique recommande d&#8217;ouvrir un canal avec un petit nœud qui n&#8217;a que de petits canaux, il ne recommandera pas d&#8217;ouvrir un grand canal.
Cependant, s&#8217;il ouvre un canal avec un nœud bien connecté qui possède également de nombreux canaux volumineux, il recommandera probablement une taille de canal plus grande.</p>
</div>
<div class="paragraph data-line-838">
<p>Comme vous pouvez le voir, le pilote automatique c-lightning n&#8217;est pas aussi automatique que celui de lnd, mais il vous donne un peu plus de contrôle.
Ces différences reflètent des préférences personnelles et pourraient en fait être le facteur décisif pour vous de choisir une implémentation plutôt qu&#8217;une autre.</p>
</div>
<div class="paragraph data-line-841">
<p>Gardez à l&#8217;esprit que les pilotes automatiques actuels utiliseront principalement les informations publiques du protocole de bavardage sur la topologie actuelle du Lightning Network.
Il est évident que vos exigences personnelles en matière de canaux ne peuvent être reflétées que dans une certaine mesure.
Des pilotes automatiques plus avancés utiliseraient les informations historiques et d&#8217;utilisation que votre nœud aurait recueillies lors de son exécution passée, y compris des informations sur les succès de routage, qui vous avez payé dans le passé et qui vous a payé.
À l&#8217;avenir, ces pilotes automatiques améliorés pourraient également utiliser ces données collectées pour faire des recommandations sur la fermeture des canaux et la réaffectation des fonds.</p>
</div>
<div class="paragraph data-line-846">
<p>Dans l&#8217;ensemble, au moment de la rédaction de ce livre, veillez à ne pas dépendre ou trop compter sur les pilotes automatiques.</p>
</div>
</div>
</div>
<div class="sect3 data-line-848">
<h4 id="_obtenir_des_liquidités_entrantes">Obtenir des liquidités entrantes</h4>
<div class="paragraph data-line-850">
<p>Dans la conception actuelle du Lightning Network, il est plus courant que les utilisateurs obtiennent des liquidités sortantes <em>avant</em> d&#8217;obtenir des liquidités entrantes.
Ils le feront en ouvrant un canal avec un autre nœud, et le plus souvent ils pourront dépenser des bitcoins avant de pouvoir en recevoir.
Il existe trois façons typiques d&#8217;obtenir des liquidités entrantes :</p>
</div>
<div class="ulist data-line-854">
<ul>
<li class="data-line-854">
<p>Ouvrez un canal avec des liquidités sortantes, puis dépensez une partie de ces fonds. Maintenant, le solde est à l&#8217;autre bout du canal, ce qui signifie que vous pouvez recevoir des paiements.</p>
</li>
<li class="data-line-856">
<p>Demandez à quelqu&#8217;un d&#8217;ouvrir un canal vers votre nœud. Proposez de rendre la pareille, afin que vos deux nœuds deviennent mieux connectés et équilibrés.</p>
</li>
<li class="data-line-858">
<p>Utilisez un swap sous-marin (par exemple, Loop In) pour échanger des BTC sur la chaîne contre un canal entrant vers votre nœud.</p>
</li>
<li class="data-line-860">
<p>Payez un service tiers pour ouvrir un canal avec vous. Plusieurs services de ce type existent. Certains facturent des frais pour fournir des liquidités, d&#8217;autres sont gratuits.</p>
</li>
</ul>
</div>
<div class="paragraph pagebreak-before data-line-863">
<p>Voici une liste des fournisseurs de liquidité actuellement disponibles qui ouvriront un canal vers votre nœud moyennant des frais :</p>
</div>
<div class="ulist data-line-865">
<ul>
<li class="data-line-865">
<p><a href="https://www.bitrefill.com/thor-lightning-network-channels" data-href="https://www.bitrefill.com/thor-lightning-network-channels">Service Thor de Bitrefill</a></p>
</li>
<li class="data-line-867">
<p><a href="https://lightningto.me" data-href="https://lightningto.me">Lightning To Me</a></p>
</li>
<li class="data-line-869">
<p><a href="https://lnbig.com" data-href="https://lnbig.com">LNBig</a></p>
</li>
<li class="data-line-871">
<p><a href="https://lightningconductor.net/channels" data-href="https://lightningconductor.net/channels">Lightning Conductor</a></p>
</li>
</ul>
</div>
<div class="paragraph data-line-873">
<p>La création de liquidités entrantes est un défi à la fois du point de vue pratique et de l&#8217;expérience utilisateur. La liquidité entrante ne se produit pas automatiquement, vous devez donc trouver des moyens de la créer pour votre nœud. Cette asymétrie des canaux de paiement n&#8217;est pas non plus intuitive. Dans la plupart des autres systèmes de paiement, vous êtes payé en premier (entrant) avant de payer les autres (sortant).</p>
</div>
<div class="paragraph data-line-875">
<p>Le défi de créer des liquidités entrantes est plus visible si vous êtes un commerçant ou si vous vendez vos services pour les paiements Lightning. Dans ce cas, vous devez être vigilant pour vous assurer que vous disposez de suffisamment de liquidités entrantes pour pouvoir continuer à recevoir des paiements. Que se passe-t-il s&#8217;il y a une vague d&#8217;acheteurs dans votre magasin, mais qu&#8217;ils ne peuvent pas vous payer parce qu&#8217;il n&#8217;y a plus de capacité entrante ?</p>
</div>
<div class="paragraph data-line-877">
<p>À l&#8217;avenir, ces défis peuvent être partiellement atténués par la mise en œuvre de canaux à double financement, qui sont financés des deux côtés et offrent une capacité entrante et sortante équilibrée. La charge pourrait également être atténuée par un logiciel de pilote automatique plus sophistiqué, qui pourrait demander et payer la capacité entrante selon les besoins.</p>
</div>
<div class="paragraph data-line-879">
<p>En fin de compte, les utilisateurs de Lightning doivent être stratégiques et proactifs en matière de gestion des canaux pour s&#8217;assurer qu&#8217;une capacité entrante suffisante est disponible pour répondre à leurs besoins.</p>
</div>
</div>
<div class="sect3 data-line-881">
<h4 id="_fermeture_de_canaux">Fermeture de canaux</h4>
<div class="paragraph data-line-883">
<p>Comme discuté précédemment dans le livre, une <em>fermeture mutuelle</em> est la méthode préférée pour fermer un canal. Cependant, il existe des cas où une <em>fermeture forcée</em> est nécessaire.</p>
</div>
<div class="paragraph data-line-885">
<p>Quelques exemples :</p>
</div>
<div class="ulist data-line-887">
<ul>
<li class="data-line-887">
<p>Votre partenaire de canal est hors ligne et ne peut pas être contacté pour initier une fermeture mutuelle.</p>
</li>
<li class="data-line-888">
<p>Votre partenaire de canal est en ligne, mais ne répond pas aux demandes d&#8217;initiation d&#8217;une fermeture mutuelle.</p>
</li>
<li class="data-line-889">
<p>Votre partenaire de canal est en ligne et vos nœuds négocient une fermeture mutuelle, mais ils sont bloqués et ne parviennent pas à une résolution.</p>
</li>
</ul>
</div>
</div>
<div class="sect3 data-line-892">
<h4 id="channel_rebalancing">Rééquilibrage de canaux</h4>
<div class="paragraph data-line-894">
<p>Au cours des transactions et du routage de paiements sur Lightning, la combinaison des capacités entrantes et sortantes peut devenir déséquilibrée.</p>
</div>
<div class="paragraph data-line-896">
<p>Par exemple, si l&#8217;un de vos partenaires de canal achemine fréquemment des paiements via votre nœud, vous épuiserez la capacité entrante sur ce canal, tout en épuisant également la capacité sortante sur les canaux sortants. Une fois que cela se produit, vous ne pouvez plus acheminer les paiements par cette route.</p>
</div>
<div class="paragraph data-line-898">
<p>Il existe de nombreuses façons de rééquilibrer les canaux, chacune présentant des avantages et des inconvénients différents. Une façon consiste à utiliser un échange sous-marin (par exemple, Loop Out), comme décrit précédemment dans ce chapitre. Une autre façon de rééquilibrer consiste simplement à attendre les paiements acheminés qui circulent dans la direction opposée. Si votre nœud est bien connecté, lorsqu&#8217;une route spécifique devient épuisée dans une direction, la même route devient disponible dans la direction opposée. D&#8217;autres nœuds peuvent "découvrir" cette route dans la direction opposée et commencer à l&#8217;utiliser dans le cadre de leur chemin de paiement, rééquilibrant ainsi à nouveau les fonds.</p>
</div>
<div class="paragraph data-line-900">
<p>Une troisième façon de rééquilibrer les canaux consiste à créer délibérément une <em>route circulaire</em> qui renvoie un paiement de votre nœud vers votre nœud, via le Lightning Network. En envoyant un paiement sur un canal local de grande capacité et en organisant le chemin de manière à ce qu&#8217;il revienne à votre nœud sur un canal distant de grande capacité, ces deux canaux deviendront plus équilibrés. Un exemple de stratégie de rééquilibrage de route circulaire peut être aperçu dans <a href="#circular_rebalancing">Rééquilibrage par une route circulaire</a>.</p>
</div>
<div id="circular_rebalancing" class="imageblock data-line-904">
<div class="content">
<img src="images/mtln_0504.png" alt="mtln 0504">
</div>
<div class="title">Figure 4. Rééquilibrage par une route circulaire</div>
</div>
<div class="paragraph data-line-906">
<p>Le rééquilibrage circulaire est pris en charge par la plupart des implémentations de nœuds Lightning et peut être effectué en ligne de commande ou via l&#8217;une des interfaces de gestion Web telles que Ride The Lightning (voir <a href="#rtl">Ride The Lightning</a>).</p>
</div>
<div class="paragraph data-line-908">
<p>Le rééquilibrage des canaux est une question complexe qui fait l&#8217;objet de recherches actives et abordée plus en détail dans <a href="#channel_rebalancing">Rééquilibrage de canaux</a>.</p>
</div>
</div>
</div>
<div class="sect2 data-line-910">
<h3 id="_frais_de_routage">Frais de routage</h3>
<div class="paragraph data-line-912">
<p>L&#8217;exécution d&#8217;un nœud Lightning vous permet de gagner des frais en acheminant les paiements sur vos canaux. Les frais de routage ne sont généralement pas une source de revenus importante et sont éclipsés par le coût d&#8217;exploitation d&#8217;un nœud. Par exemple, sur un nœud relativement occupé qui achemine une douzaine de paiements par jour, les frais ne dépassent pas 2 000 satoshis.</p>
</div>
<div class="paragraph data-line-914">
<p>Les nœuds se font concurrence pour les frais de routage en fixant leur taux de frais désirés sur chaque canal. Les frais de routage sont définis par deux paramètres sur chaque canal : un <em>frais de base</em> ("base fee" en anglais) fixe qui est facturé pour tout paiement et un <em>taux de frais</em> ("fee rate" en anglais) variable supplémentaire qui est proportionnel au montant du paiement.</p>
</div>
<div class="paragraph data-line-916">
<p>Lors de l&#8217;envoi d&#8217;un paiement Lightning, un nœud sélectionnera un chemin afin de minimiser les frais, de minimiser les sauts, ou les deux. En conséquence, un marché des frais de routage émerge de ces interactions. Il existe actuellement de nombreux nœuds qui facturent des frais de routage très faibles ou nuls, ce qui crée une pression à la baisse sur le marché des frais de routage.</p>
</div>
<div class="paragraph data-line-918">
<p>Si vous ne faites aucun choix, votre nœud Lightning définira des frais de base et un taux de frais par défaut pour chaque nouveau canal. Les valeurs par défaut dépendent de l&#8217;implémentation de nœud que vous utilisez.
Les frais de base sont fixés dans l&#8217;unité <em>millisatoshi</em> (millièmes de satoshi). Le taux de frais proportionnel est défini dans l&#8217;unité de <em>millionièmes</em> et est appliqué au montant du paiement.
L&#8217;unité des millionièmes est souvent abrégée en <em>ppm</em> (parties par million).
Par exemple, des frais de base de 1 000 (millisatoshis) et un taux de frais de 1 000 ppm (millionièmes) entraîneraient les frais suivants pour un paiement de 100 000 satoshis :</p>
</div>
<div class="stemblock data-line-924">
<div class="content">
\[\begin{equation}
\begin{aligned}
P &amp;= 100,000 \text{ satoshis} \\
F_{base} &amp;= 1,000 \text{ millisatoshis} = 1 \text{ satoshi} \\
F_{rate} &amp;= 1,000 \text{ ppm} = 1,000/1,000,000 = 1/1,000 = \text{0.001} = 0.1\% \\
F_{total} &amp;= F_{base} + ( P * F_{rate} ) \\
 \Rightarrow  F_{total} &amp;= 1 \text{ satoshi} + ( 100,000/1,000 ) \text{ satoshis} \\
 \Rightarrow  F_{total} &amp;= 1 \text{ satoshi} + 100 \text{ satoshis} = 101 \text{ satoshis} \\
\end{aligned}
\end{equation}\]
</div>
</div>
<div class="paragraph data-line-937">
<p>D&#8217;une manière générale, vous pouvez adopter l&#8217;une des deux approches des frais de routage. Vous pouvez acheminer de nombreux paiements avec des frais peu élevés, en compensant les frais peu élevés par un volume élevé. Alternativement, vous pouvez choisir de facturer des frais plus élevés. Si vous choisissez de fixer des frais plus élevés, votre nœud sera sélectionné uniquement lorsqu&#8217;il n&#8217;existe pas d&#8217;autres itinéraires moins chers. Par conséquent, vous routerez moins fréquemment mais gagnerez plus par routage réussi.</p>
</div>
<div class="paragraph data-line-939">
<p>Pour la plupart des nœuds, il est généralement préférable d&#8217;utiliser les valeurs de frais de routage par défaut. De cette façon, votre nœud est en concurrence sur un pied d&#8217;égalité avec les autres nœuds qui utilisent les valeurs par défaut.</p>
</div>
<div class="paragraph data-line-941">
<p>Vous pouvez également utiliser les paramètres de frais de routage pour rééquilibrer les canaux. Si la plupart de vos canaux ont les frais par défaut mais que vous souhaitez rééquilibrer un canal particulier, réduisez simplement les frais sur ce canal spécifique à zéro ou à des taux très bas. Ensuite, asseyez-vous et attendez que quelqu&#8217;un achemine un paiement sur votre itinéraire "bon marché" et rééquilibre vos canaux pour vous comme effet secondaire.</p>
</div>
</div>
<div class="sect2 data-line-943">
<h3 id="_gestion_de_nœuds">Gestion de nœuds</h3>
<div class="paragraph data-line-945">
<p>Gérer votre nœud Lightning en ligne de commande n&#8217;est évidemment pas facile. Cela vous offre toute la flexibilité de l&#8217;API du nœud et la possibilité d&#8217;écrire vos propres scripts personnalisés pour répondre à vos besoins personnels. Mais si vous ne souhaitez pas gérer la complexité de la ligne de commande et n&#8217;avez besoin que de certaines fonctionnalités de base de gestion des nœuds, vous devriez envisager d&#8217;installer une interface utilisateur Web qui facilite la gestion de nœuds.</p>
</div>
<div class="paragraph data-line-947">
<p>Il existe un certain nombre de projets concurrents qui offrent une gestion Web de nœuds Lightning. Plusieurs des plus populaires sont décrits dans la section suivante.</p>
</div>
<div class="sect3 data-line-950">
<h4 id="rtl">Ride The Lightning</h4>
<div class="paragraph data-line-952">
<p>Ride The Lightning (RTL) est une interface utilisateur Web graphique pour aider les utilisateurs à gérer les opérations du nœud Lightning pour les trois principales implémentations du nœud Lightning (LND, `c-lightning `, et Eclair). RTL est un projet open source développé par Shahana Farooqui et de nombreux autres contributeurs. Vous pouvez trouver le logiciel RTL sur <a href="https://github.com/Ride-The-Lightning/RTL" data-href="https://github.com/Ride-The-Lightning/RTL">GitHub</a>.</p>
</div>
<div class="paragraph data-line-954">
<p><a href="#rtl-web-interface">Exemple de l&#8217;interface Web de RTL</a> montre un exemple de capture d&#8217;écran de l&#8217;interface Web de RTL, telle que fournie sur le dépôt du projet.</p>
</div>
<div id="rtl-web-interface" class="imageblock data-line-958">
<div class="content">
<img src="images/mtln_0505.png" alt="mtln 0505">
</div>
<div class="title">Figure 5. Exemple de l&#8217;interface Web de RTL</div>
</div>
</div>
<div class="sect3 data-line-960">
<h4 id="_lndmon">lndmon</h4>
<div class="paragraph data-line-962">
<p>Lightning Labs, les créateurs de LND, fournissent un interface utilisateur graphique basée sur le Web appelée lndmon pour surveiller les différentes métriques d&#8217;un nœud LND Lightning. lndmon ne fonctionne qu&#8217;avec les nœuds LND. Il s&#8217;agit d&#8217;une interface en lecture seule pour la surveillance et, en tant que telle, ne vous permet pas de gérer activement de nœud. Elle ne peut pas ouvrir de canaux ni effectuer de paiements. Retrouvez lndmon sur <a href="https://github.com/lightninglabs/lndmon" data-href="https://github.com/lightninglabs/lndmon">GitHub</a>.</p>
</div>
</div>
<div class="sect3 data-line-964">
<h4 id="_thunderhub">ThunderHub</h4>
<div class="paragraph data-line-966">
<p><a href="https://thunderhub.io" data-href="https://thunderhub.io">ThunderHub</a> est un interface utilisateur graphique basée sur le Web très esthétique, similaire à RTL mais exclusive à LND. Elle peut être utilisée pour effectuer des paiements, rééquilibrer les canaux et gérer le nœud via une variété de fonctionnalités.</p>
</div>
</div>
</div>
<div class="sect2 data-line-968">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph data-line-970">
<p>Au fur et à mesure que vous entretenez votre nœud et gagnez de l&#8217;expérience, vous en apprendrez beaucoup sur le Lightning Network. Être un opérateur de nœud est une tâche difficile mais gratifiante. La maîtrise de ces compétences vous permettra de contribuer à la croissance et au développement de cette technologie et du Lightning Network lui-même. Vous aurez en outre la possibilité d&#8217;envoyer et de recevoir des paiements Lightning avec le plus grand degré de contrôle et de facilité. Vous jouerez un rôle central dans l&#8217;infrastructure du réseau et ne serez pas seulement un participant à la périphérie.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-28 02:37:31 -0400
</div>
</div>
</body>
</html>