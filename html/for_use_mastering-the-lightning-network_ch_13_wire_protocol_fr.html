<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Protocole filaire : tramage et extensibilité</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
</div>
<div id="content">
<div class="sect1 data-line-2">
<h2 id="wire_protocol">Protocole filaire : tramage et extensibilité</h2>
<div class="sectionbody">
<div class="paragraph data-line-4">
<p>Dans ce chapitre, nous plongeons dans le protocole filaire du Lightning Network
et couvrent également tous les différents leviers d&#8217;extensibilité qui ont été intégrés dans
le protocole. À la fin de ce chapitre, un lecteur ambitieux devrait être en mesure
d&#8217;écrire leur propre parseur de protocole filaire pour le Lightning Network. En plus
d&#8217;être capable d&#8217;écrire un parseur de protocole filaire personnalisé, un lecteur de ce chapitre
acquerra une compréhension approfondie des différents mécanismes de mise à niveau
qui ont été intégrés au protocole.</p>
</div>
<div class="sect2 data-line-12">
<h3 id="_couche_de_messagerie_dans_la_suite_de_protocoles_lightning">Couche de messagerie dans la suite de protocoles Lightning</h3>
<div class="paragraph data-line-14">
<p>La couche de messagerie, qui est détaillée dans ce chapitre, se compose de "Framing and message format" (tramage et format de message), encodage "Type-Length-Value" (Type-Longueur-Valeur) et "Feature bits" (bits de fonctionnalités). Ces composants sont mis en évidence par un contour épais dans la suite de protocoles, illustrée dans <a href="#LN_protocol_wire_message_highlight">Couche de messagerie dans la suite de protocoles Lightning</a>.</p>
</div>
<div id="LN_protocol_wire_message_highlight" class="imageblock data-line-18">
<div class="content">
<img src="images/mtln_1301.png" alt="Couche de messagerie dans la suite de protocoles Lightning">
</div>
<div class="title">Figure 1. Couche de messagerie dans la suite de protocoles Lightning</div>
</div>
</div>
<div class="sect2 data-line-20">
<h3 id="_le_tramage_du_fil">Le tramage du fil</h3>
<div class="paragraph data-line-22">
<p>Nous commençons par décrire la structure de haut niveau du <em>tramage</em> ("framing" en anglais) sur le fil
au sein du protocole. Lorsque nous parlons de tramage, nous entendons la façon dont les octets sont
empaquetés sur le fil pour <em>encoder</em> un message de protocole particulier. Sans connaissance
du système de tramage utilisé dans le protocole, une chaîne d&#8217;octets sur le fil
ressemblerait à une série d&#8217;octets aléatoires car aucune structure n&#8217;a été imposée. En appliquant
un tramage approprié pour décoder ces octets sur le fil, nous pourrons extraire
une structure et enfin analyser cette structure en messages de protocole dans notre
langue de haut niveau.</p>
</div>
<div class="paragraph data-line-31">
<p>Il est important de noter que le Lightning Network est un protocole <em>encrypté de
de bout-en-bout</em>, et le tramage de fil est lui-même encapsulé dans une
couche de transport des messages <em>cryptés</em>. Comme on le voit dans <a href="#encrypted_message_transport">[encrypted_message_transport]</a>, le Lightning
Network utilise une variante personnalisée du Noise Protocol pour gérer
l&#8217;encryptage du transport. Dans ce chapitre, chaque fois que nous donnons un exemple de tramage du fil,
nous supposons que la couche de cryptage a déjà été retirée (lors du
décodage), ou que nous n&#8217;avons pas encore encrypté l&#8217;ensemble d&#8217;octets avant de les envoyer
sur le fil (encodage).</p>
</div>
<div class="sect3 data-line-40">
<h4 id="_tramage_du_fil_de_haut_niveau">Tramage du fil de haut niveau</h4>
<div class="paragraph data-line-42">
<p>Cela étant précisé, nous sommes prêts à décrire le schéma de haut niveau utilisé pour
encoder les messages sur le fil :</p>
</div>
<div class="ulist data-line-45">
<ul>
<li class="data-line-45">
<p>Les messages sur le fil commencent par un champ de type <em>2 octets</em>, suivi d&#8217;une
charge utile de message.</p>
</li>
<li class="data-line-47">
<p>La charge utile de message elle-même peut atteindre une taille de 65 Ko.</p>
</li>
<li class="data-line-48">
<p>Tous les entiers sont encodés en big-endian (ordre de réseau)</p>
</li>
<li class="data-line-49">
<p>N&#8217;importe quel octet qui suit un message défini peut être ignoré en toute sécurité.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-51">
<p>Oui, c&#8217;est tout. Comme le protocole repose sur une couche de cryptage de protocole
de transport <em>encapsulant</em>, nous n&#8217;avons pas besoin d&#8217;une longueur explicite pour chaque type de message. En effet,
l&#8217;encryptage du transport s&#8217;effectue au niveau du <em>message</em>, de sorte que
lorsque nous sommes prêts à décoder le message suivant, nous connaissons déjà le nombre total
d&#8217;octets du message lui-même. En utilisant 2 octets pour le type de message
(encodés en big-endian), le protocole peut avoir jusqu&#8217;à 2^16 – 1 ou
65 535 messages distincts. Comme nous savons que tous les messages doivent être inférieurs à
65 Ko, cela simplifie notre parsage car nous pouvons utiliser un tampon de <em>taille fixe</em> et
maintenir de fortes limites sur la quantité totale de mémoire nécessaire pour décomposer un
message filaire entrant.</p>
</div>
<div class="paragraph data-line-62">
<p>Le dernier point permet un degré de <em>rétrocompatibilité</em> car les nouveaux nœuds sont capables de fournir des informations dans des messages sur le fil que les nœuds plus anciens
(qui peuvent ne pas les comprendre) peuvent ignorer en toute sécurité. Comme on le verra par la suite, cette
fonctionnalité combinée à un format d&#8217;extensibilité de messages filaires très flexible, permet au protocole d&#8217;atteindre également la compatibilité <em>ascendante</em>.</p>
</div>
</div>
<div class="sect3 data-line-66">
<h4 id="_encodage_de_type">Encodage de type</h4>
<div class="paragraph data-line-68">
<p>Avec ce contexte de haut niveau, nous commençons maintenant à la couche la
plus primitive : parsage de types primitifs. En plus d&#8217;encoder des entiers, le protocole
Lightning permet également l&#8217;encodage d&#8217;un vaste éventail de types, y compris des tranches d&#8217;octets à longueur variable, des clés publiques de courbe elliptique, des adresses Bitcoin et
des signatures. Lorsque nous décrivons la <em>structure</em> des messages filaires plus loin dans ce
chapitre, nous nous référons au type de haut niveau (le type abstrait) plutôt qu&#8217;à la
représentation de bas niveau dudit type. Dans cette section, nous épluchons cette
couche d&#8217;abstraction pour s&#8217;assurer que notre futur parseur de fil est capable de correctement
encoder/décoder n&#8217;importe lequel des types de haut niveau.</p>
</div>
<div class="paragraph data-line-77">
<p>Dans <a href="#message_types">Types de messages de haut niveau</a>, nous mappons le nom d&#8217;un type de message donné à la
routine de haut niveau utilisée pour coder/décoder ce type.</p>
</div>
<table id="message_types" class="tableblock frame-all grid-all stretch data-line-83">
<caption class="title">Table 1. Types de messages de haut niveau</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type de haut niveau</th>
<th class="tableblock halign-left valign-top">Tramage</th>
<th class="tableblock halign-left valign-top">Commentaire</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node_alias</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une tranche d&#8217;octets de longueur fixe de 32 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lors du décodage, rejeter si le contenu n&#8217;est pas une chaîne UTF-8 valide</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>channel_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une tranche d&#8217;octets de longueur fixe de 32 octets qui mappe un point de sortie à une valeur de 32 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Étant donné un point de sortie, on peut le convertir en un <code>channel_id</code> en prenant le TxID du point de sortie et en effectuant une opération binaire XOR avec l&#8217;index (interprété comme les 2 octets inférieurs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>short_chan_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier 64 bits non signé (<code>uint64</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Composé de la hauteur de bloc (24 bits), de l&#8217;index de transaction (24 bits) et de l&#8217;index de sortie (16 bits) regroupés sur 8 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>milli_satoshi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier de 64 bits non signé (<code>uint64</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Représente un 1000ème d&#8217;un satoshi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>satoshi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier de 64 bits non signé (<code>uint64</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L&#8217;unité de base de Bitcoin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pubkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une clé publique secp256k1 encodée au format <em>compressé</em>, occupant 33 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Occupe une longueur fixe de 33 octets sur le fil</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une signature ECDSA de la courbe elliptique secp256k1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodé sous la forme d&#8217;une tranche d&#8217;octets <em>fixe</em> de 64 octets, compressée sous la forme <code>R || S</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uint8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier de 8 bits</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uint16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier de 16 bits</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uint64</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un entier de 64 bits</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[]byte</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une tranche d&#8217;octets de longueur variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Préfixé d&#8217;un entier 16 bits indiquant la longueur des octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>color_rgb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodage couleur RVB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodé comme une série d&#8217;entiers de 8 bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>net_addr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L&#8217;encodage d&#8217;une adresse réseau</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodé avec un préfixe de 1 octet qui indique le type d&#8217;adresse, suivi du corps de l&#8217;adresse</p></td>
</tr>
</tbody>
</table>
<div class="paragraph data-line-100">
<p>Dans la section suivante, nous décrivons la structure de chaque message filaire,
y compris le type de préfixe du message ainsi que le contenu du corps de
son message.</p>
</div>
</div>
</div>
<div class="sect2 data-line-105">
<h3 id="tlv_message_extensions">Extensions de message Type-Longueur-Valeur</h3>
<div class="paragraph data-line-107">
<p>Plus tôt dans ce chapitre, nous avons mentionné que les messages peuvent atteindre une taille de 65 Ko,
et si lors du parsage d&#8217;un message, il reste des octets supplémentaires, alors ces octets
sont à ignorer. À première vue, cette exigence peut sembler
quelque peu arbitraire ; cependant, cette exigence permet une évolution désynchronisée découplée du protocole
Lightning. Nous en discuterons davantage vers la fin du chapitre. Mais d&#8217;abord, nous portons notre attention sur ce à quoi ces "octets supplémentaires" à
la fin d&#8217;un message peuvent être utilisés.</p>
</div>
<div class="sect3 data-line-114">
<h4 id="_le_format_de_message_protocol_buffers">Le format de message Protocol Buffers</h4>
<div class="paragraph data-line-116">
<p>Le format de sérialisation des messages Protocol Buffers (Protobuf) a commencé comme un
format interne utilisé par Google et s&#8217;est développé pour devenir l&#8217;un des formats de sérialisation
de messages les plus populaires utilisés par les développeurs du monde entier. Le format Protobuf
décrit comment un message (généralement une sorte de structure de données liée à une API)
est encodé sur le fil et décodé à l&#8217;autre extrémité. Il existe plusieurs
"compilateurs Protobuf" dans des dizaines de langages qui agissent comme un pont permettant
à n&#8217;importe quel langage d&#8217;encoder un Protobuf qui pourra être décodé par un décodeur conforme
dans un autre langage. Cette compatibilité inter-langues des structures de données permet
un large éventail d&#8217;innovations, car il est possible de transmettre des structures et même
des structures de données typées à travers les frontières de langage et d&#8217;abstraction.</p>
</div>
<div class="paragraph data-line-127">
<p>Les Protobufs sont également connus pour leur flexibilité en ce qui concerne
la manière dont ils gèrent les changements dans la structure des messages sous-jacents. Tant que le schéma
de numérotation des champs est respecté, il est possible pour un nouvel écrit de
Protobufs d&#8217;inclure dans un Protobuf des informations qui peuvent être inconnues
des anciens lecteurs. Lorsque l&#8217;ancien lecteur rencontre le nouveau format sérialisé, s&#8217;il
y a des types/champs qu&#8217;il ne comprend pas, il les <em>ignore</em> tout simplement.
Cela permet aux anciens et aux nouveaux clients de coexister, car tous les clients peuvent
analyser une partie du nouveau format de message.</p>
</div>
</div>
<div class="sect3 data-line-136">
<h4 id="_compatibilité_ascendante_et_descendante">Compatibilité ascendante et descendante</h4>
<div class="paragraph data-line-138">
<p>Les Protobufs sont extrêmement populaires parmi les développeurs car ils intègrent
une compatibilité ascendante et descendante. La plupart des développeurs sont
probablement familiarisés avec le concept de compatibilité descendante. En termes simples,
ce principe stipule que toute modification apportée à un format de message ou à une API doit être
effectuée de manière à ne pas interrompre la prise en charge des clients plus anciens. Dans les exemples précédents d&#8217;extensibilité de Protobuf, la compatibilité descendante est assurée en
veillant à ce que les nouveaux ajouts au format Protobuf ne cassent pas les parties connues
des anciens lecteurs. La compatibilité ascendante, quant à elle, est tout aussi importante
pour les mises à jour désynchronisées, mais elle est moins connue. Pour qu&#8217;une modification
soit compatible de manière ascendante, les clients doivent simplement ignorer les informations
qu&#8217;ils ne comprennent pas. On peut dire que le mécanisme de soft fork pour à mettre à jour
le système de consensus de Bitcoin fournit une compatibilité ascendante et descendante : les
clients qui ne font pas la mise à jour peuvent toujours utiliser Bitcoin, et s&#8217;ils rencontrent des
transactions qu&#8217;ils ne comprennent pas, ils les ignorent tout simplement, car leurs fonds
n&#8217;utilisent pas ces nouvelles fonctionnalités.</p>
</div>
</div>
</div>
<div class="sect2 data-line-154">
<h3 id="tlv">Format Type-Longueur-Valeur</h3>
<div class="paragraph data-line-156">
<p>Pour pouvoir pour mettre à niveau les messages avec une compatibilité à la fois ascendante et descendante
en plus des bits de fonctionnalités (nous y reviendrons plus tard), le Lightning Network utilise un format de sérialisation de message personnalisé appelé simplement Type-Longueur-Valeur, TLV en abrégé. Le format a été inspiré par le format Protobuf largement utilisé
et emprunte de nombreux concepts en simplifiant considérablement
l&#8217;implémentation ainsi que le logiciel qui interagit avec le parsage des messages. Un
lecteur curieux pourrait demander, "pourquoi ne pas simplement utiliser Protobufs ?" En réponse, le
développeur de Lightning répondrait que nous sommes en mesure d&#8217;avoir le meilleur de
l&#8217;extensibilité de Protobufs tout en ayant l&#8217;avantage d&#8217;une plus petite
implémentation et donc plus petite surface d&#8217;attaque. La version 3.15.6, le compilateur Protobuf
fait plus de 656 671 lignes de code. En comparaison,
l&#8217;implémentation LND du format de messages TLV ne pèse que 2,3k lignes de code
(tests inclus).</p>
</div>
<div class="paragraph data-line-168">
<p>Avec ce contexte nécessaire expliqué, nous sommes maintenant prêts à décrire le
format TLV en détails. On dit qu&#8217;une extension de message TLV est un flux
<span class="keep-together">d'enregistrements TLV</span> individuels. Un seul enregistrement TLV comporte trois éléments : le type
d&#8217;enregistrement, la longueur de l&#8217;enregistrement, et enfin la valeur opaque de
l&#8217;enregistrement :</p>
</div>
<div class="dlist data-line-174">
<dl>
<dt class="hdlist1"><code>type</code></dt>
<dd>
<p>Un entier représentant le nom de l&#8217;enregistrement en cours d&#8217;encodage</p>
</dd>
<dt class="hdlist1"><code>length</code></dt>
<dd>
<p>La longueur de l&#8217;enregistrement</p>
</dd>
<dt class="hdlist1"><code>value</code></dt>
<dd>
<p>La valeur opaque de l&#8217;enregistrement</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-178">
<p>Le <code>type</code> et la <code>longueur</code> sont encodés à l&#8217;aide d&#8217;un entier de taille variable inspiré par l&#8217;entier de taille variable (varint) utilisé dans le protocole P2P de Bitcoin, appelé <code>BigSize</code> pour faire court.</p>
</div>
<div class="sect3 data-line-180">
<h4 id="_encodage_dentiers_bigsize">Encodage d&#8217;entiers BigSize</h4>
<div class="paragraph data-line-182">
<p>Dans sa forme la plus complète, un entier <code>BigSize</code>
peut représenter une valeur jusqu&#8217;à 64 bits. Contrairement au format varint
de Bitcoin, le format <code>BigSize</code> encode des entiers en utilisant une orientation d&#8217;octets
big-endian.</p>
</div>
<div class="paragraph data-line-187">
<p>Le varint <code>BigSize</code> a deux composants : le discriminant et le corps. Dans le
contexte de l&#8217;entier <code>BigSize</code>, le discriminant communique au décodeur
la taille de l&#8217;entier de taille variable qui suit. Rappelez-vous que ce qui est unique à propos des
entiers de taille variable est qu&#8217;ils permettent à un parseur d&#8217;utiliser moins d&#8217;octets pour encoder
les entiers plus petits que les plus grands, économisant de l&#8217;espace. L&#8217;encodage d&#8217;un entier <code>BigSize</code>
suit l&#8217;une des quatre options suivantes :</p>
</div>
<div class="olist arabic data-line-194">
<ol class="arabic">
<li class="data-line-194">
<p>Si la valeur est inférieure à <code>0xfd</code> (<code>253</code>) : alors le discriminant n&#8217;est pas vraiment utilisé et l&#8217;encodage est simplement l&#8217;entier lui-même. Cela nous permet d&#8217;encoder de très petits entiers sans surcharge supplémentaire.</p>
</li>
<li class="data-line-196">
<p>Si la valeur est inférieure ou égale à <code>0xffff</code> (<code>65535</code>) : le discriminant est codé comme <code>0xfd</code>, ce qui indique que la valeur qui suit est supérieure à <code>0xfd</code>, mais inférieure à <code>0xffff</code>. Le nombre est ensuite codé sous la forme d&#8217;un entier de 16 bits. Y compris le discriminant, nous pouvons coder une valeur supérieure à 253, mais inférieure à 65 535 en utilisant 3 octets.</p>
</li>
<li class="data-line-198">
<p>Si la valeur est inférieure à <code>0xffffffff</code> (<code>4294967295</code>) : Le discriminant est codé comme <code>0xfe</code>. Le corps est encodé à l&#8217;aide d&#8217;un entier 32 bits, y compris le discriminant, et nous pouvons encoder une valeur inférieure à "4 294 967 295" en utilisant 5 octets.</p>
</li>
<li class="data-line-200">
<p>Sinon, nous encodons simplement la valeur sous la forme d&#8217;un entier de 64 bits de taille normale.</p>
</li>
</ol>
</div>
</div>
<div class="sect3 data-line-203">
<h4 id="_contraintes_dencodage_tlv">Contraintes d&#8217;encodage TLV</h4>
<div class="paragraph data-line-205">
<p>Dans le contexte d&#8217;un message TLV, les types d&#8217;enregistrement inférieurs à <code>2^16</code> sont dits <em>réservés</em> pour une utilisation future. Les types au-delà de cette
plage doivent être utilisés pour les extensions de message "personnalisées" utilisées par les protocoles d&#8217;application de niveau supérieur.</p>
</div>
<div class="paragraph data-line-208">
<p>La <code>value</code> d&#8217;un enregistrement dépend du <code>type</code>. En d&#8217;autres termes, elle peut prendre n&#8217;importe quelle forme car les parseurs tenteront de l&#8217;interpréter en fonction du contexte du type.</p>
</div>
</div>
<div class="sect3 data-line-210">
<h4 id="_encodage_canonique_tlv">Encodage canonique TLV</h4>
<div class="paragraph data-line-212">
<p>Un problème avec le format Protobuf est que les encodages du même message peuvent
produire un ensemble d&#8217;octets entièrement différent lorsqu&#8217;il est encodé par deux
versions du compilateur. De telles instances d&#8217;un codage non canonique ne sont pas
acceptable dans le contexte de Lightning, car de nombreux messages contiennent une
signature du digest du message. S&#8217;il est possible qu&#8217;un message soit encodé
de deux manières différentes, alors il serait possible de casser l&#8217;authentification de
d&#8217;une signature par inadvertance en réencodant un message en utilisant un ensemble d&#8217;octets
 légèrement différent sur le fil.</p>
</div>
<div class="paragraph data-line-221">
<p>Pour s&#8217;assurer que tous les messages codés sont canoniques, les éléments de
de contraintes suivants sont définis lors de l&#8217;encodage :</p>
</div>
<div class="ulist data-line-224">
<ul>
<li class="data-line-224">
<p>Tous les enregistrements d&#8217;un flux de TLV doivent être encodés dans un ordre
strictement croissant.</p>
</li>
<li class="data-line-227">
<p>Tous les enregistrements doivent encoder au minimum les champs <code>type</code> et <code>length</code> (longueur). En d&#8217;autres termes, la plus petite représentation <code>BigSize</code> d&#8217;un entier doit être utilisée à tout moment.</p>
</li>
<li class="data-line-229">
<p>Chaque <code>type</code> ne peut apparaître qu&#8217;une seule fois dans un flux TLV donné.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-231">
<p>En plus de ces contraintes d&#8217;encodage, une série d&#8217;exigences
d&#8217;interprétation de plus haut niveau est également définie en fonction de <em>l&#8217;arité</em> d&#8217;un <code>type</code> d&#8217;entier donné. Nous approfondirons ces détails vers la fin du
chapitre, lorsque nous décrirons la manière dont le protocole Lightning est mis à niveau en pratique et
 en théorie.</p>
</div>
</div>
</div>
<div class="sect2 data-line-237">
<h3 id="feature_bits">Bits de fonctionnalités et extensibilité du protocole</h3>
<div class="paragraph data-line-239">
<p>Parce que le Lightning Network est un système décentralisé, aucune entité ne peut appliquer de
changement ou modification de protocole pour tous les utilisateurs du système. Cette
caractéristique est également observée dans d&#8217;autres réseaux décentralisés tels que Bitcoin.
Cependant, contrairement à Bitcoin, un consensus majoritaire <em>n&#8217;est pas</em> nécessaire pour changer un
sous-ensemble du Lightning Network. Lightning est capable d&#8217;évoluer à volonté sans
une forte exigence de coordination car, contrairement au Bitcoin, il n&#8217;y a pas de consensus global requis sur le Lightning Network. En raison de ce fait et des nombreux
mécanismes de mise à niveau intégrés au Lightning Network, seuls les
participants qui souhaitent utiliser ces nouvelles fonctionnalités de Lightning Network doivent
faire une mise à niveau, et ensuite ils peuvent interagir les uns avec les autres.</p>
</div>
<div class="paragraph data-line-249">
<p>Dans cette section, nous explorons les différentes manières dont les développeurs et les utilisateurs sont
capable de concevoir et de déployer de nouvelles fonctionnalités sur le Lightning Network. Les
concepteurs du Lightning Network original savaient qu&#8217;il y avait de nombreuses orientations futures possibles pour le réseau et le protocole sous-jacent. En conséquence, ils se sont assurés de mettre en œuvre plusieurs
mécanismes d&#8217;extensibilité au sein du système, qui peuvent être utilisés pour le mettre à niveau partiellement ou totalement de manière découplée, désynchronisée et
décentralisé.</p>
</div>
<div class="sect3 data-line-255">
<h4 id="_bits_de_fonctionnalités_en_tant_que_mécanisme_de_découverte_de_mises_à_niveau">Bits de fonctionnalités en tant que mécanisme de découverte de mises à niveau</h4>
<div class="paragraph data-line-257">
<p>Un lecteur avisé a peut-être remarqué les différents emplacements où les bits de fonctionnalités sont
inclus dans le protocole Lightning. Un <em>bit de fonctionnalité</em> est un champ de bits qui peut
être utilisé pour annoncer la compréhension ou l&#8217;adhésion à une mise à jour potentielle du protocole
réseau. Les bits de fonctionnalités sont généralement attribués par paires, ce qui signifie que chaque
nouvelle fonctionnalité/mise à niveau potentielle définit toujours deux bits dans le champ de bits.
Un bit signale que la fonctionnalité annoncée est <em>facultative</em>, ce qui signifie que le
nœud connaît la fonctionnalité et peut l&#8217;utiliser, mais ne
la considère pas comme nécessaire pour un fonctionnement normal. L&#8217;autre bit signale que la
fonctionnalité est <em>requise</em>, ce qui signifie que le nœud ne continuera pas
l&#8217;opération si un pair potentiel ne comprend pas cette fonctionnalité.</p>
</div>
<div class="paragraph data-line-268">
<p>En utilisant ces deux bits (facultatif et obligatoire), nous pouvons construire une simple
matrice de compatibilité que les nœuds/utilisateurs peuvent consulter pour déterminer si un pair est compatible avec une fonctionnalité souhaitée, comme illustrée dans <a href="#table1302">Matrice de compatibilité des bits de fonctionnalités</a>.</p>
</div>
<table id="table1302" class="tableblock frame-all grid-all stretch data-line-274">
<caption class="title">Table 2. Matrice de compatibilité des bits de fonctionnalités</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type de bit</th>
<th class="tableblock halign-left valign-top">Distant facultatif</th>
<th class="tableblock halign-left valign-top">Distant requis</th>
<th class="tableblock halign-left valign-top">Distant inconnu</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local facultatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local requis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconnu local</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✅</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
</tr>
</tbody>
</table>
<div class="paragraph data-line-281">
<p>À partir de cette matrice de compatibilité simplifiée, nous pouvons voir que tant que l&#8217;autre
partie connaît nos bits de fonctionnalités, alors nous pouvons interagir avec eux en utilisant le
protocole. Si l&#8217;autre partie ne sait même pas à quoi nous faisons référence
<em>et</em> qu&#8217;elle a besoin de la fonctionnalité, alors nous sommes incompatibles avec eux. Au sein du
réseau, les fonctionnalités optionnelles sont signalées à l&#8217;aide d&#8217;un <em>nombre de bits impair</em>, tandis que
les caractéristiques requises sont signalées à l&#8217;aide d&#8217;un <em>nombre de bits pair</em>. Par exemple, si un pair signale qu&#8217;il connaît une fonctionnalité qui utilise le bit 15, alors nous savons
qu&#8217;il s&#8217;agit d&#8217;une fonctionnalité facultative, et nous pouvons interagir avec eux ou répondre à
leurs messages même si nous ne connaissons pas la fonctionnalité. Si
en revanche ils ont signalé la fonctionnalité en utilisant le bit 16, alors nous savons qu&#8217;il s&#8217;agit d&#8217;une
fonctionnalité requise, et nous ne pouvons pas interagir avec eux à moins que notre nœud comprenne
aussi cette fonctionnalité.</p>
</div>
<div class="paragraph data-line-293">
<p>Les développeurs de Lightning ont trouvé une phrase facile à retenir qui
encode cette matrice : "it&#8217;s OK to be odd" (c&#8217;est ok d&#8217;être étrange/impair, jeu de mot sur le double sens du mot "odd"). Cette règle simple permet un
riche ensemble d&#8217;interactions au sein du protocole, car une simple opération de masquage de bits
entre deux vecteurs de bits de fonctionnalités permet aux pairs de déterminer si certaines
interactions sont compatibles les unes avec les autres ou non. En d&#8217;autres termes, les bits
de fonctionnalité sont utilisés comme un mécanisme de découverte de mises à niveau : ils permettent facilement
aux pairs de comprendre s&#8217;ils sont compatibles ou non sur la base des concepts de
bits de fonctionnalités facultatifs, requis et inconnus.</p>
</div>
<div class="paragraph data-line-302">
<p>Les bits de fonctionnalités se trouvent dans les messages <code>node_announcement</code>, <code>channel_announcement</code> et
<code>init</code> du protocole. Par conséquent, ces trois messages peuvent être
utilisés pour signaler la connaissance et/ou la compréhension des mises à jour du protocole en vol
au sein du réseau. Les bits de fonctionnalités trouvés dans le message <code>node_announcement</code>
peuvent permettre à un pair de déterminer si leurs <em>connexions</em> sont compatibles ou
non. Les bits de fonctionnalités contenus dans les messages <code>channel_announcement</code> permettent à un pair
de déterminer si un type de paiement ou un HTLC donné peut transiter par un pair donné ou
non. Les bits de fonctionnalités contenus dans le message <code>init</code> permettent aux pairs de comprendre s&#8217;ils
peuvent maintenir une connexion, et également quelles fonctionnalités sont négociées pour la
durée de vie d&#8217;une connexion donnée.</p>
</div>
</div>
<div class="sect3 data-line-313">
<h4 id="_tlv_pour_la_compatibilité_ascendante_et_descendante">TLV pour la compatibilité ascendante et descendante</h4>
<div class="paragraph data-line-315">
<p>Comme nous l&#8217;avons appris précédemment dans ce chapitre, les enregistrements TLV peuvent être
utilisés pour étendre les messages avec une compatible ascendante et descendante.
Au fil du temps, ces enregistrements ont été utilisés pour étendre les messages existants sans
rompre le protocole en utilisant la zone "indéfinie" dans un message au-delà
cet ensemble d&#8217;octets connus.</p>
</div>
<div class="paragraph data-line-321">
<p>Par exemple, le protocole Lightning original n&#8217;avait pas de concept de
"la plus grand montant de HTLC" qui pourrait traverser un canal comme dicté par une politique
de routage. Plus tard, le champ <code>max_htlc</code> a été ajouté au message
<code>channel_update</code> pour introduire progressivement ce concept au fil du temps. Les pairs qui reçoivent un
<code>channel_update</code> qui définit un tel champ mais ne sait même pas que cette mise à niveau existait
ne sont pas affectés par le changement, mais voient leurs HTLC rejetés s&#8217;ils sont
au-delà de la limite. Les pairs plus à jour, en revanche, sont capables de parser, de vérifier
et d&#8217;utiliser le nouveau champ.</p>
</div>
<div class="paragraph data-line-330">
<p>Ceux qui connaissent le concept de soft forks dans Bitcoin peuvent maintenant voir quelques
similitudes entre les deux mécanismes. Contrairement aux soft forks de Bitcoin
au niveau du consensus, les mises à niveau du Lightning Network ne nécessitent pas de consensus
majoritaire pour être adoptées. Au lieu de cela, au minimum, seuls deux pairs au sein du
réseau n&#8217;ont besoin de comprendre une nouvelle mise à niveau pour commencer à l&#8217;utiliser. Généralement, ces deux pairs peuvent être le destinataire et l&#8217;expéditeur d&#8217;un
paiement, ou peuvent être des partenaires de canal d&#8217;un nouveau canal de paiement.</p>
</div>
</div>
<div class="sect3 data-line-337">
<h4 id="_une_taxonomie_des_mécanismes_de_mise_à_niveau">Une taxonomie des mécanismes de mise à niveau</h4>
<div class="paragraph data-line-339">
<p>Plutôt qu&#8217;il y ait un mécanisme de mise à niveau unique largement utilisé au sein du
réseau (comme les soft forks pour Bitcoin), il existe plusieurs mécanismes de mise à niveau possibles au sein du Lightning Network. Dans cette
section, nous énumérons ces mécanismes de mise à niveau et
fournissons un exemple concret de leur utilisation dans le passé.</p>
</div>
<div class="sect4 data-line-344">
<h5 id="_mises_à_niveau_du_réseau_interne">Mises à niveau du réseau interne</h5>
<div class="paragraph data-line-346">
<p>Nous commençons par le type de mise à niveau qui nécessite le plus de coordination
au niveau de protocole : les mises à niveau du réseau interne. Une mise à niveau du réseau interne est
caractérisée par le fait qu&#8217;elle nécessite que <em>chaque nœud</em> dans un chemin de paiement potentiel comprenne la nouvelle fonctionnalité. Une telle mise à niveau est similaire à n&#8217;importe quelle
mise à niveau sur Internet qui nécessite des mises à niveau matérielles dans
la portion de relai central de la mise à niveau. Dans le cadre du Lightning Network, cependant, nous traitons
avec un logiciel pur, de telles mises à niveau sont donc plus faciles à déployer, mais elles
nécessitent toutefois beaucoup plus de coordination que tout autre mécanisme de mise à niveau dans le
réseau.</p>
</div>
<div class="paragraph data-line-355">
<p>Un exemple d&#8217;une telle mise à niveau au sein du réseau a été l&#8217;introduction d&#8217;un encodage
TLV pour les informations de routage codées dans les paquets
oignon. Le format précédent utilisait un format de message de longueur fixe codé en dur
pour communiquer des informations telles que le saut suivant.
Étant donné que ce format était fixe, cela signifiait que les nouvelles mises à niveau au niveau du protocole n&#8217;étaient pas possibles. Le passage à un format TLV plus flexible
signifie qu&#8217;après cette mise à jour, toute fonctionnalité
modifiant le type d&#8217;informations communiquées à chaque saut peut être déployée à volonté.</p>
</div>
<div class="paragraph data-line-363">
<p>Il convient de mentionner que la mise à niveau de l&#8217;oignon TLV était une sorte de mise à niveau "douce"
du réseau interne, en ce sens que si un paiement n&#8217;utilisait pas de nouvelle fonctionnalité au-delà
du nouvel encodage des informations de routage, alors un paiement pouvait être transmit.
en utilisant un ensemble mixte de nœuds.</p>
</div>
</div>
<div class="sect4 data-line-368">
<h5 id="_mises_à_niveau_de_bout_en_bout">Mises à niveau de bout en bout</h5>
<div class="paragraph data-line-370">
<p>Pour contraster la mise à niveau du réseau interne, dans cette section, nous décrivons les
mises à niveau du réseau <em>de bout en bout</em>. Ce mécanisme de mise à niveau diffère du mécanisme de
mise à niveau du réseau interne en ce sens qu&#8217;il ne nécessite la mise à jour que les "bouts" du paiement, c&#8217;est à dire l&#8217;expéditeur
et le destinataire.</p>
</div>
<div class="paragraph data-line-375">
<p>Ce type de mise à niveau permet
pour un large éventail d&#8217;innovations sans restriction au sein du réseau. En raison de la
nature encryptée en oignon des paiements au sein du réseau, ceux qui transmettent les HTLC
au centre du réseau peuvent même ne pas savoir que de nouvelles fonctionnalités sont en cours
d&#8217;utilisation.</p>
</div>
<div class="paragraph data-line-381">
<p>Un exemple de mise à niveau de bout en bout au sein du réseau fut le déploiement des paiements en plusieurs partites (MPP). MPP est une fonctionnalité au niveau du protocole qui permet à
un paiement unique d&#8217;être divisé en plusieurs parties ou chemins, à assembler par le
destinataire du règlement. Le déploiement de MPP s&#8217;est accompagné d&#8217;un nouveau
bit de fonctionnalité au niveau de <code>node_announcement</code> qui indique que le destinataire sait
comment gérer les paiements partiels. En supposant qu&#8217;un expéditeur et un destinataire se connaissent
(éventuellement via une facture BOLT #11), alors ils peuvent utiliser la nouvelle
fonctionnalité sans autre négociation.</p>
</div>
<div class="paragraph data-line-389">
<p>Un autre exemple d&#8217;une mise à niveau de bout en bout sont les différents types de
de paiements <em>spontanés</em> déployés au sein du réseau. Un premier type de
paiements spontanés appelés <em>keysend</em> fonctionne en plaçant simplement la préimage d&#8217;un paiement dans l&#8217;oignon encrypté. Dès réception, la destination décrypterait la
préimage, puis l&#8217;utilise pour régler le paiement. Étant donné que l&#8217;ensemble du paquet est encrypté de bout en bout, ce type de paiement est sûr, car aucun des nœuds intermédiaires
n&#8217;est capable de d&#8217;éplucher complètement l&#8217;oignon pour découvrir la préimage de paiement.</p>
</div>
</div>
</div>
<div class="sect3 data-line-395">
<h4 id="_mises_à_jour_au_niveau_de_construction_de_canal">Mises à jour au niveau de construction de canal</h4>
<div class="paragraph data-line-397">
<p>La dernière grande catégorie de mises à jour sont celles qui se produisent au
niveau de la construction du canal, mais qui ne modifient pas la structure des HTLC largement utilisé au sein du réseau. Lorsque nous parlons de construction de canaux, nous entendons
par là comment le canal est financé ou créé. Par exemple, le type de canal eltoo
peut être déployé au sein du réseau à l&#8217;aide d&#8217;un nouveau bit de  fonctionnalité
au niveau de <code>node_announcement</code> et d&#8217;un autre au niveau de <code>channel_announcement</code>. Seuls les deux
pairs aux extrémités des canaux doivent comprendre et annoncer ces nouvelles
fonctionnalités. Cette paire de canaux peut ensuite être utilisée pour transférer tout type de paiement
pour autant que le canal le prenne en charge.</p>
</div>
<div class="paragraph data-line-406">
<p>Une autre est le format de canal <em>sorties d&#8217;ancrage</em> qui permet aux frais d&#8217;engagement d&#8217;être
"augmenté" via le mécanisme de gestion des frais Child-Pays-For-Parent (CPFP) de Bitcoin.</p>
</div>
</div>
</div>
<div class="sect2 data-line-409">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph data-line-411">
<p>Le protocole filaire de Lightning est incroyablement flexible et permet une innovation et une interopérabilité rapides sans consensus strict. C&#8217;est l&#8217;une des raisons pour lesquelles le Lightning Network connaît un développement beaucoup plus rapide et attire de nombreux développeurs, qui pourraient autrement trouver le style de développement de Bitcoin trop conservateur et lent.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-28 02:38:19 -0400
</div>
</div>
</body>
</html>